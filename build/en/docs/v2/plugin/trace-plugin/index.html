<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.X plugin-docs plugin-id-default docs-doc-id-v2/plugin/trace-plugin" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Tracing | Nacos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" name="twitter:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" property="og:url" content="https://nacos.io/en/docs/v2/plugin/trace-plugin"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.X"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.X"><meta data-rh="true" name="docsearch:version" content="2.X"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.X"><meta data-rh="true" property="og:title" content="Tracing | Nacos"><meta data-rh="true" name="description" content="Nacos supports Track tracing plugin, can help developers and maintainers find out problems quickly by extending plugin like push tracing."><meta data-rh="true" property="og:description" content="Nacos supports Track tracing plugin, can help developers and maintainers find out problems quickly by extending plugin like push tracing."><meta data-rh="true" name="keywords" content="Track tracing,push tracing,modifying tracing"><link data-rh="true" rel="icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"><link data-rh="true" rel="canonical" href="https://nacos.io/en/docs/v2/plugin/trace-plugin"><link data-rh="true" rel="alternate" href="https://nacos.io/en/docs/v2/plugin/trace-plugin" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://nacos.io/zh-cn/docs/v2/plugin/trace-plugin" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/v2/plugin/trace-plugin" hreflang="default"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/v2/plugin/trace-plugin" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1QV814950M-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Nacos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Nacos Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Nacos" href="/en/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=nacos">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" href="//dev.g.alicdn.com/mamba/mse-arc-ui/0.0.20/umd/mse-arc-ui.min.css">
<script src="//dev.g.alicdn.com/mamba/mse-arc-ui/0.0.20/umd/mse-arc-ui.min.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-0YDFJ7LX7F" async></script><link rel="stylesheet" href="/en/assets/css/styles.ada177ca.css">
<link rel="preload" href="/en/assets/js/runtime~main.6e276cfd.js" as="script">
<link rel="preload" href="/en/assets/js/main.ed1d33c2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script>
<script src="//hm.baidu.com/hm.js?e3a5cec56ef8619cf9d7c2abebd509e3"></script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/en/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/what-is-nacos" href="/en/docs/v2/what-is-nacos">2.X</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next/v2/plugin/trace-plugin">User Docs</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/v2/plugin/trace-plugin">2.X</a></li><li><a class="dropdown__link" href="/en/docs/1.X/v2/plugin/trace-plugin">1.X</a></li></ul></div><a class="navbar__item navbar__link" href="/en/cloud">NACOS CLOUD</a><a href="https://developer.aliyun.com/ebook/36?spm=a2c6h.20345107.ebook-index.18.152c2984fsi5ST" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">E-BOOK-NACOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/en/blog">BLOG</a><a class="navbar__item navbar__link" href="/en/community">COMMUNITY</a><a href="http://console.nacos.io/nacos/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DEMO-CONSOLE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>En</a><ul class="dropdown__menu"><li><a href="/en/docs/v2/plugin/trace-plugin" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">En</a></li><li><a href="/zh-cn/docs/v2/plugin/trace-plugin" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Nacos</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/what-is-nacos">What is Nacos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/concepts">Nacos Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/architecture">Nacos architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Quick Start</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/quickstart/quick-start">Quick Start for Nacos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/quickstart/quick-start-docker">Quick Start for Nacos Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/quickstart/quick-start-kubernetes">Kubernetes Nacos</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Upgrading</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/upgrading/2.0.0-compatibility">Nacos 2.0.0 compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/upgrading/2.0.0-upgrading">Nacos 2.0 升级文档</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Plugin</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/auth-plugin">Authorization Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/config-encryption-plugin">CONFIGURE ENCRYPTION</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/datasource-plugin">多数据源</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/v2/plugin/trace-plugin">Tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/custom-environment-plugin">CustomEnvironment</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">User Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/sdk">Java SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/other-language">Other languages SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/open-api">Open API Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/auth">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Admin Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/deployment">Nacos supports three types of deployment modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/cluster-mode-quick-start">Cluster deployment instructions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/system-configurations">Nacos system parameters introduce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/management-api">Management API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/console-guide">Console Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/monitor-guide">Nacos monitor guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/nacos2-config-benchmark">Nacos2.0服务配置性能测试报告</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/nacos2-naming-benchmark">Nacos2.0服务发现性能测试报告</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-sync">NacosSync user guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Ecology</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-dubbo">Nacos with Dubbo fusion become registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-spring">Nacos with Spring Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-spring-boot">Nacos with Spring Boot Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-spring-cloud">Nacos with Spring Cloud Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-sync">NacosSync user guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-coredns">Nacos push domain with CoreDNS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Contributor Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/contributing">How to Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/contributing-flow">Contributing Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/pull-request">Pull request template</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/how-to-reporting-bugs">How to report bugs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Community</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/community/">Community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/community/nacos-dev">Developers</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Plugin</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tracing</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.X</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Track tracing plugin</h1><p>Since version 2.2.0, Nacos support to inject track tracing plugins through <a href="https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html" target="_blank" rel="noopener noreferrer">SPI</a>, to subscribe and process trace events in the plugin with the way you want (such as logging, writing to storage, etc.).
This document will describe how to implement a track tracing plugin and how to make it work.</p><blockquote><p>Attention:
At present, the track tracing plugin is still in the beta stage, and its API and interface definitions maybe modified with version upgrades. Please pay attention to the applicable version of your plugin.</p><p>The track tracing of Nacos is different from the tracking in general sense. It is mainly used to trace and record some Nacos related operations, such as service registration, de-registration, push, status change, etc.
It is not used to trace the access and request between micro-services. If you need to monitor the access and request between services, please use the corresponding tracing projects.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts-in-track-tracing-plugin">Concepts in Track tracing Plugin<a href="#concepts-in-track-tracing-plugin" class="hash-link" aria-label="Direct link to Concepts in Track tracing Plugin" title="Direct link to Concepts in Track tracing Plugin">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="traceevent">TraceEvent<a href="#traceevent" class="hash-link" aria-label="Direct link to TraceEvent" title="Direct link to TraceEvent">​</a></h3><p>Nacos embeds points in the important operations, and defines a series of trace events named &#x27;TraceEvent&#x27;. After combined multiple &#x27;TraceEvent&#x27;s for the same resource (such as services, configurations, etc.), the trace of the resource will be gotten.</p><p>The TraceEvent will include following:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td>Type of event, defined by sub-events</td></tr><tr><td>eventTime</td><td>Time of the event occurs</td></tr><tr><td>namespaceId</td><td>Corresponding resource namespace ID of the event</td></tr><tr><td>group</td><td>Corresponding resource group name of the event</td></tr><tr><td>name</td><td>Corresponding resource name of the event，such as service name or dataId for config</td></tr></tbody></table><p>Currently, the sub event types defined in Nacos include:</p><table><thead><tr><th>Event Name</th><th>Description</th><th>Details</th></tr></thead><tbody><tr><td>RegisterInstanceTraceEvent</td><td>The event for service instance registration, mainly occurs when the service provider is registered</td><td><a href="#1.1">Detail</a></td></tr><tr><td>DeregisterInstanceTraceEvent</td><td>The event for service instance de-registration, mainly occurs when the service provider is de-registered</td><td><a href="#1.2">Detail</a></td></tr><tr><td>RegisterServiceTraceEvent</td><td>The event for service registration, different from <code>RegisterInstanceTraceEvent</code>, mainly occurs when create empty services</td><td><a href="#1.3">Detail</a></td></tr><tr><td>DeregisterServiceTraceEvent</td><td>The event for service de-registration, different from <code>DeregisterInstanceTraceEvent</code>, mainly occurs when remove empty services</td><td><a href="#1.4">Detail</a></td></tr><tr><td>SubscribeServiceTraceEvent</td><td>The event for service subscription, mainly occurs when the service is subscribed</td><td><a href="#1.5">Detail</a></td></tr><tr><td>UnsubscribeServiceTraceEvent</td><td>The event for service unsubscription, mainly occurs when the service is unsubscribed</td><td><a href="#1.6">Detail</a></td></tr><tr><td>PushServiceTraceEvent</td><td>The event for service pushing, mainly occurs when the service is pushed to subscribed</td><td><a href="#1.7">Detail</a></td></tr><tr><td>HealthStateChangeTraceEvent</td><td>The event for service instance health state changing, mainly occurs when an instance&#x27;s health state changes due to a heartbeat/health check</td><td><a href="#1.8">Detail</a></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-development">Plugin Development<a href="#plugin-development" class="hash-link" aria-label="Direct link to Plugin Development" title="Direct link to Plugin Development">​</a></h2><p>To develop a Nacos track tracing plugin, developer first need to depend on the relevant API of the track tracing plugin.</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba.nacos</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nacos-trace-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${project.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>${project.version}</code> is the version of Nacos for your development plugin.</p><p>Then implement interface <code>com.alibaba.nacos.plugin.trace.spi.NacosTraceSubscriber</code>, and put your implementation into services of SPI.</p><p>The methods of interface in following:</p><table><thead><tr><th>method name</th><th>parameters</th><th>returns</th><th>description</th></tr></thead><tbody><tr><td>getName</td><td>void</td><td>String</td><td>he name of the plugin. When the name is the same, the plugin loaded later will overwrite the plugin loaded first.</td></tr><tr><td>subscribeTypes</td><td>void</td><td>List&lt;Class&lt;? extends TraceEvent&gt;&gt;</td><td>The expected the event type of the subscription for this plugin. If returns an empty list, plugin will not subscribe any event.</td></tr><tr><td>onEvent</td><td>TraceEvent</td><td>void</td><td>The logic for handle events. The type of events will defined by <code>subscribeTypes</code>.</td></tr><tr><td>executor</td><td>void</td><td>Executor</td><td>When return not <code>null</code>, Nacos will use the <code>Executor</code> to call <code>onEvent</code>, otherwise use event distribution thread to call <code>onEvent</code>.</td></tr></tbody></table><blockquote><p>Attention:
It is recommend that you use a dependent Executor for plugin implementations, such as blocked IO operations in plugin implementations, which will block onEvent called to other events when there are IO exceptions, causing backlogs.</p></blockquote><p>In <a href="https://github.com/nacos-group/nacos-plugin" target="_blank" rel="noopener noreferrer">nacos-group/nacos-plugin</a>，providing a demo implementation for track tracing plugin. This demo subscribes <code>RegisterInstanceTraceEvent</code> and <code>DeregisterInstanceTraceEvent</code> and print result information into logs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="degradation-of-track-tracking-plugin">Degradation of Track Tracking Plugin<a href="#degradation-of-track-tracking-plugin" class="hash-link" aria-label="Direct link to Degradation of Track Tracking Plugin" title="Direct link to Degradation of Track Tracking Plugin">​</a></h2><p>Because the Track Tracking Plugin is for the monitoring category, and will not affect Nacos data. So when the Track Tracking Plugin has problems, it should not affect the Nacos primary works.</p><p>It is recommend that you use a dependent Executor for plugin implementations, such as blocked IO operations in plugin implementations, which will block onEvent called to other events when there are IO exceptions, causing backlogs.</p><p>If the backlog occurs unfortunately, subsequent events will be automatically discarded when the event queue of the Track Tracking Plugin reaches the upper limit to ensure overall system stability.</p><p>You can see the words <code>Trace Event Publish failed, event : {}, publish queue size : {}</code> in <code>nacos.log</code> when the discard occurred</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-sub-trace-event-details">Appendix: Sub-trace Event Details<a href="#appendix-sub-trace-event-details" class="hash-link" aria-label="Direct link to Appendix: Sub-trace Event Details" title="Direct link to Appendix: Sub-trace Event Details">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.1">RegisterInstanceTraceEvent<a href="#1.1" class="hash-link" aria-label="Direct link to RegisterInstanceTraceEvent" title="Direct link to RegisterInstanceTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>REGISTER_INSTANCE_TRACE_EVENT</code></p><p>Extra Content:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td>clientIp</td><td>The source IP of registering service instance request, probably null.</td></tr><tr><td>rpc</td><td>Whether the source request is gRPC, <code>true</code> when request is gRPC, <code>false</code> is HTTP.</td></tr><tr><td>instanceIp</td><td>The IP or Host of service instance registered</td></tr><tr><td>instancePort</td><td>The Port of service instance registered</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.2">DeregisterInstanceTraceEvent<a href="#1.2" class="hash-link" aria-label="Direct link to DeregisterInstanceTraceEvent" title="Direct link to DeregisterInstanceTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>DEREGISTER_INSTANCE_TRACE_EVENT</code></p><p>Extra Content:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td>clientIp</td><td>The source IP of de-registering service instance request, probably null.</td></tr><tr><td>reason</td><td>The reason of de-registering, details see <a href="#1.2.1">DeregisterInstanceReason</a></td></tr><tr><td>rpc</td><td>Whether the source request is gRPC, <code>true</code> when request is gRPC, <code>false</code> is HTTP.</td></tr><tr><td>instanceIp</td><td>The IP or Host of service instance de-registered</td></tr><tr><td>instancePort</td><td>The Port of service instance de-registered</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1.2.1"> DeregisterInstanceReason <a href="#1.2.1" class="hash-link" aria-label="Direct link to  DeregisterInstanceReason " title="Direct link to  DeregisterInstanceReason ">​</a></h4><table><thead><tr><th>Reason</th><th>Description</th></tr></thead><tbody><tr><td>REQUEST</td><td>De-registration comes from client requests, in other word, user initiated de-registration.</td></tr><tr><td>NATIVE_DISCONNECTED</td><td>De-registration comes from client disconnected</td></tr><tr><td>SYNCED_DISCONNECTED</td><td>De-registration comes from client disconnected in other server node, and synced from other server node.</td></tr><tr><td>HEARTBEAT_EXPIRE</td><td>De-registration comes from heartbeat timeout for 1.X version client.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.3">RegisterServiceTraceEvent<a href="#1.3" class="hash-link" aria-label="Direct link to RegisterServiceTraceEvent" title="Direct link to RegisterServiceTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>REGISTER_SERVICE_TRACE_EVENT</code></p><p>Extra Content: None</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.4">DeregisterServiceTraceEvent<a href="#1.4" class="hash-link" aria-label="Direct link to DeregisterServiceTraceEvent" title="Direct link to DeregisterServiceTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>DEREGISTER_SERVICE_TRACE_EVENT</code></p><p>Extra Content: None</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.5">SubscribeServiceTraceEvent<a href="#1.5" class="hash-link" aria-label="Direct link to SubscribeServiceTraceEvent" title="Direct link to SubscribeServiceTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>SUBSCRIBE_SERVICE_TRACE_EVENT</code></p><p>Extra Content:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td>clientIp</td><td>The IP of subscriber</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.6">UnsubscribeServiceTraceEvent<a href="#1.6" class="hash-link" aria-label="Direct link to UnsubscribeServiceTraceEvent" title="Direct link to UnsubscribeServiceTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>UNSUBSCRIBE_SERVICE_TRACE_EVENT</code></p><p>Extra Content:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td>clientIp</td><td>The IP of subscriber</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.7">PushServiceTraceEvent<a href="#1.7" class="hash-link" aria-label="Direct link to PushServiceTraceEvent" title="Direct link to PushServiceTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>PUSH_SERVICE_TRACE_EVENT</code></p><p>Extra Content:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td>clientIp</td><td>The IP of subscriber</td></tr><tr><td>instanceSize</td><td>The size of service instance for this push</td></tr><tr><td>pushCostTimeForAll</td><td>The full cost for this push, means that the cost from start pushing to end pushing, including the wait time in combined queue and the time for executing.</td></tr><tr><td>pushCostTimeForNetWork</td><td>The network cost for this push, means that the cost from executing to end pushing, only including the network cost.</td></tr><tr><td>serviceLevelAgreementTime</td><td>The actual cost for this push, means the cost from services changeing to end pushing. It&#x27;s a reference value not accuracy.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1.8">HealthStateChangeTraceEvent<a href="#1.8" class="hash-link" aria-label="Direct link to HealthStateChangeTraceEvent" title="Direct link to HealthStateChangeTraceEvent">​</a></h3><blockquote><p>Since 2.2.0.</p></blockquote><p>type: <code>HEALTH_STATE_CHANGE_TRACE_EVENT</code></p><p>Extra Content:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td>instanceIp</td><td>The IP or Host of service instance changed</td></tr><tr><td>instancePort</td><td>The Port of service instance changed</td></tr><tr><td>isHealthy</td><td>The change result is healthy or not</td></tr><tr><td>healthCheckType</td><td>The type of health check</td></tr><tr><td>healthStateChangeReason</td><td>The reason of healthy changed</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/v2/plugin/datasource-plugin"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">多数据源</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/v2/plugin/custom-environment-plugin"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CustomEnvironment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concepts-in-track-tracing-plugin" class="table-of-contents__link toc-highlight">Concepts in Track tracing Plugin</a><ul><li><a href="#traceevent" class="table-of-contents__link toc-highlight">TraceEvent</a></li></ul></li><li><a href="#plugin-development" class="table-of-contents__link toc-highlight">Plugin Development</a></li><li><a href="#degradation-of-track-tracking-plugin" class="table-of-contents__link toc-highlight">Degradation of Track Tracking Plugin</a></li><li><a href="#appendix-sub-trace-event-details" class="table-of-contents__link toc-highlight">Appendix: Sub-trace Event Details</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/en/assets/js/runtime~main.6e276cfd.js"></script>
<script src="/en/assets/js/main.ed1d33c2.js"></script>
</body>
</html>