{
  "filename": "huya-nacos.md",
  "__html": "<h1>虎牙直播共建Nacos生态</h1>\n<p><img src=\"https://img.alicdn.com/tfs/TB1i4ugBjDpK1RjSZFrXXa78VXa-1522-584.png\" alt=\"huya\"></p>\n<h2>虎牙直播平台(<a href=\"https://www.huya.com/\">https://www.huya.com/</a>)</h2>\n<p>虎牙直播是中国一家以游戏直播为主的视频直播网站。网站以YY直播为名创建于2011年，隶属于欢聚时代，2014年11月24日更名为虎牙直播，开始独立运营。其海外版本为以东南亚为市场的Nimo TV。虎牙直播是国内最为资深的以游戏内容为核心的直播平台，其在游戏方面有丰富的独家资源，汇聚目前最为火爆的游戏，如英雄联盟、王者荣耀、球球大作战、守望先锋、炉石传说、绝地求生、绝地求生手游——刺激战场、全民突击等主题的直播内容。</p>\n<h2>虎牙中间件团队介绍</h2>\n<p>虎牙中间件团队主要负责虎牙服务注册发现与配置中心 ，负责均衡，中间件等平台相关的建设，致力于保障改进虎牙用户接入的请求成功率及请求耗时，为虎牙提供稳定可靠全球基础接入服务设施，服务间通信的基础设施。</p>\n<h2>虎牙团队成功引入Nacos到生产环境</h2>\n<h3>nacos dns数据库高可用场景上落地</h3>\n<p>通过DNS-F和nacos实现基于域名的服务发现，数据库接入由ip方式改成域名接入，数据库切换在秒级完成，已在内部数十个业务系统上完成接入。</p>\n<h3>nacos cmdb方案落地</h3>\n<p>nacos通过支持spi扩展的方式， 支持虎牙将cmdb的数据导入到nacos中，  可以实现对注册实例打入来自cmdb标签，  实现基于cmdb标签的负载均衡功能，  赋予业务同机房调度， 同set调度，  基于自己定义的标签进行流量分发的能力。</p>\n<h3>tars服务框架融合nacos为注册中心</h3>\n<p>通过nacos-sync这个中间件，将tars中的注册数据实时同步到nacos中，实现秒级同步tars中实例的变化， 同时提供高可用的集群方案；部署在国内外的nacos注册中心，满足业务就近注册服务，同时本地的服务会通过nacos-sync同步到其他集群，满足业务跨区域服务调用的需求。</p>\n<h3>负载均衡层解到nacos config做配置管理</h3>\n<p>国内外流量接入层位于全球各地， 配置的推送服务遇到比较大的挑战。 nacos config通过部署3地的配置服务集群，国内外流量接入层可以就近拉取配置，解决使用国内单节点svn服务的的速度问题。同时通过使用集群方案和本地文件缓存机制保证配置服务的高可用， 解决之前svn的单点问题。</p>\n<h3>未来计划</h3>\n<p>虎牙后续会继续在nacos上持续投入，今后的内部service mesh，容器服务注册场景发力。</p>\n<h2>虎牙中间件团队深入共建Nacos</h2>\n<p>虎牙中间件团队也深入参与了Nacos生态的构建，核心成员张波、周建、李志鹏参与构建了包括Nacos的核心同步组件Nacos-sync、Nacos的DNS-F模块，把虎牙的业务模型和生产部署经验也共建到Nacos生态中,在过程当中，张波、周建、李志鹏成为了Nacos的核心Committer，是Nacos重要的社区成员。</p>\n"
}