{
  "filename": "use-nacos-with-k8s-sync.md",
  "__html": "<h1>Nacos supports synchronizing metadata from K8S service discovery</h1>\n<h2>Data synchronization</h2>\n<p>Nacos monitors the changes of services and instances in K8S, obtains its service metadata, and synchronizes the change information to Nacos' service discovery. Supports K8S version 1.22 (corresponding to K8S-Java-API version 14.0.0).The diagram is as follow:\n<img src=\"img/k8s-sync.jpg\" alt=\"\"></p>\n<p>Mapping scheme of K8S resource synchronization to Nacos resource (single-direction, Nacos resource synchronization to K8S resource to be supplemented) :</p>\n<table>\n<thead>\n<tr>\n<th>K8S Data to be synchronized</th>\n<th>Field in K8S</th>\n<th>Field mapped to Nacos</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>service name</td>\n<td><a href=\"http://service.metadata.name\">service.metadata.name</a></td>\n<td><a href=\"http://service.name\">service.name</a></td>\n</tr>\n<tr>\n<td>service targetPort(pod port)(multiple)</td>\n<td>service.ports.targetPort</td>\n<td>instance.port</td>\n</tr>\n<tr>\n<td>service name</td>\n<td><a href=\"http://service.metadata.name\">service.metadata.name</a></td>\n<td>instance.cluster</td>\n</tr>\n<tr>\n<td>service port(multiple)</td>\n<td>service.ports.port</td>\n<td>instance.extendData&lt;String, Object&gt;</td>\n</tr>\n<tr>\n<td>pod ip</td>\n<td>pod.status.hostIP / service.ipFamilies</td>\n<td>instance.ip</td>\n</tr>\n</tbody>\n</table>\n<h2>Configuration file</h2>\n<p>Deploy the Nacos cluster according to <a href=\"../guide/admin/deployment.md\">the deploy document</a></p>\n<p>Configure the application.properties file to enable K8S synchronization:</p>\n<pre><code>nacos.k8s.sync.enabled=true\n</code></pre>\n<p>If you are using the Java API from an application outside the K8S cluster, you need to specify kubeConfig:</p>\n<pre><code>nacos.k8s.sync.outsideCluster=true\nnacos.k8s.sync.kubeConfig=/.kube/config\n</code></pre>\n<p>After configuration, services and instance changes in K8S are automatically synchronized to Nacos.</p>\n",
  "link": "/en-us/docs/v2/ecology/use-nacos-with-k8s-sync.html",
  "meta": {
    "title": "Nacos supports synchronizing metadata from K8S service discovery",
    "keywords": "Nacos,k8s,kubernetes",
    "description": "Nacos supports synchronizing metadata from K8S service discovery"
  }
}