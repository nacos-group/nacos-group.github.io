{
  "filename": "sdk.md",
  "__html": "<h1>Java SDK</h1>\n<h2>Overview</h2>\n<p>Maven coordinates</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;\n&lt;artifactId&gt;nacos-client&lt;/artifactId&gt;\n&lt;version&gt;${version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h2>Configuration Management</h2>\n<h3>Get configuration</h3>\n<h4>Description</h4>\n<p>Get configuration from Nacos when a service starts.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getConfig</span><span class=\"hljs-params\">(String dataId, String group, <span class=\"hljs-keyword\">long</span> timeoutMs)</span> <span class=\"hljs-keyword\">throws</span> NacosException\n</span></code></pre>\n<h4>Request parameters</h4>\n<div class=\"bi-table\">\n  <table>\n    <colgroup>\n      <col width=\"auto\" />\n      <col width=\"auto\" />\n      <col width=\"auto\" />\n    </colgroup>\n    <tbody>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Name</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Type</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Description</div>\n        </td>\n      </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">dataId</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">string</div>\n          <div data-type=\"p\"></div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Configuration ID. Use a naming rule similar to package.class (for example, com.taobao.tc.refund.log.level) to ensure global uniqueness. It is recommended to indicate business meaning of the configuration in the &quot;class&quot; section. Use\n            lower case for all characters. Use alphabetical letters and these four special characters (&quot;.&quot;, &quot;:&quot;, &quot;-&quot;, &quot;_&quot;) only. Up to 256 characters are allowed.</div>\n        </td>\n      </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">group</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">string</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Configuration group. To ensure uniqueness, format such as <strong>product name: module name </strong>(for example, Nacos:Test) is preferred. Use alphabetical letters and these four special characters (&quot;.&quot;, &quot;:&quot;, &quot;-&quot;,\n            &quot;_&quot;) only. Up to 128 characters are allowed.</div>\n        </td>\n      </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">timeout</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">long</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Length of configuration read time-out (in ms). Recommended value: 3000.</div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<h4>Return values</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Type</th>\n<th style=\"text-align:left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">configuration value</td>\n</tr>\n</tbody>\n</table>\n<h4>Request example</h4>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-comment\">// Initialize the configuration service, and the console automatically obtains the following parameters through the sample code.</span>\n\tString serverAddr = <span class=\"hljs-string\">\"{serverAddr}\"</span>;\n\tString dataId = <span class=\"hljs-string\">\"{dataId}\"</span>;\n\tString group = <span class=\"hljs-string\">\"{group}\"</span>;\n\tProperties properties = <span class=\"hljs-keyword\">new</span> Properties();\n\tproperties.put(<span class=\"hljs-string\">\"serverAddr\"</span>, serverAddr);\n\tConfigService configService = NacosFactory.createConfigService(properties);\n    <span class=\"hljs-comment\">// Actively get the configuration.</span>\n\tString content = configService.getConfig(dataId, group, <span class=\"hljs-number\">5000</span>);\n\tSystem.out.println(content);\n} <span class=\"hljs-keyword\">catch</span> (NacosException e) {\n    <span class=\"hljs-comment\">// TODO Auto-generated catch block</span>\n    e.printStackTrace();\n}\n</code></pre>\n<h4>Exception specification</h4>\n<p>A ConfigException is thrown in case of a configuration read time-out or a network error.</p>\n<h3>Listen configuration</h3>\n<h4>Description</h4>\n<p>Use dynamic configuration listening API to enable Nacos to send configuration change notifications.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">addListener</span><span class=\"hljs-params\">(String dataId, ConfigChangeListenerAdapter listener)</span>\n</span></code></pre>\n<h4>Request parameters</h4>\n<div class=\"bi-table\">\n  <table>\n    <colgroup>\n      <col width=\"auto\" />\n      <col width=\"auto\" />\n      <col width=\"auto\" />\n    </colgroup>\n    <tbody>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Name</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Type</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Description</div>\n        </td>\n      </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">dataId</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">string</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Configuration ID. Use a naming rule similar to package.class (for example, com.taobao.tc.refund.log.level) to ensure global uniqueness. It is recommended to indicate business meaning of the configuration in the &quot;class&quot; section. Use\n            lower case for all characters. Use alphabetical letters and these four special characters (&quot;.&quot;, &quot;:&quot;, &quot;-&quot;, &quot;_&quot;) only. Up to 256 characters are allowed.</div>\n        </td>\n      </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">group</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">string</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Configuration group. To ensure uniqueness, format such as <strong>product name: module name </strong> (for example, Nacos:Test) is preferred. Use alphabetical letters and these four special characters (&quot;.&quot;, &quot;:&quot;, &quot;-&quot;,\n            &quot;_&quot;) only. Up to 128 characters are allowed.</div>\n        </td>\n      </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">listener</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Config Change Listener</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Listener. Configuration changes go into the callback function of the listener.</div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<h4>Return values</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Type</th>\n<th style=\"text-align:left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">Configuration value. This value is returned through the callback function during initialization or configuration modification.</td>\n</tr>\n</tbody>\n</table>\n<h4>Request example</h4>\n<pre><code class=\"language-java\">\n<span class=\"hljs-comment\">// Initialize the configuration service, and the console automatically obtains the following parameters through the sample code.</span>\nString serverAddr = <span class=\"hljs-string\">\"{serverAddr}\"</span>;\nString dataId = <span class=\"hljs-string\">\"{dataId}\"</span>;\nString group = <span class=\"hljs-string\">\"{group}\"</span>;\nProperties properties = <span class=\"hljs-keyword\">new</span> Properties();\nproperties.put(<span class=\"hljs-string\">\"serverAddr\"</span>, serverAddr);\nConfigService configService = NacosFactory.createConfigService(properties);\nString content = configService.getConfig(dataId, group, <span class=\"hljs-number\">5000</span>);\nSystem.out.println(content);\nconfigService.addListener(dataId, group, <span class=\"hljs-keyword\">new</span> Listener() {\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">receiveConfigInfo</span><span class=\"hljs-params\">(String configInfo)</span> </span>{\n\t\tSystem.out.println(<span class=\"hljs-string\">\"receive1:\"</span> + configInfo);\n\t}\n\t<span class=\"hljs-meta\">@Override</span>\n\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Executor <span class=\"hljs-title\">getExecutor</span><span class=\"hljs-params\">()</span> </span>{\n\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;\n\t}\n});\n\n<span class=\"hljs-comment\">// Keep the main thread alive throughout the test, because the configuration subscription runs in a daemon thread, which exits once the main thread exits. The following code is not required in a real environment.</span>\n<span class=\"hljs-keyword\">while</span> (<span class=\"hljs-keyword\">true</span>) {\n    <span class=\"hljs-keyword\">try</span> {\n        Thread.sleep(<span class=\"hljs-number\">1000</span>);\n    } <span class=\"hljs-keyword\">catch</span> (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<h3>Delete Listening</h3>\n<h4>Description</h4>\n<p>Cancel listen configuration. No more notification after cancellation.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">removeListener</span><span class=\"hljs-params\">(String dataId, String group, Listener listener)</span>\n</span></code></pre>\n<h4>Request parameters</h4>\n<div class=\"bi-table\">\n  <table>\n    <colgroup>\n      <col width=\"auto\" />\n      <col width=\"auto\" />\n      <col width=\"auto\" />\n    </colgroup>\n    <tbody>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Name</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Type</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Description</div>\n        </td>\n      </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">dataId</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">string</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Configuration ID. Use a naming rule similar to package.class (for example, com.taobao.tc.refund.log.level) to ensure global uniqueness. It is recommended to indicate business meaning of the configuration in the &quot;class&quot; section. Use\n            lower case for all characters. Use alphabetical letters and these four special characters (&quot;.&quot;, &quot;:&quot;, &quot;-&quot;, &quot;_&quot;) only. Up to 256 characters are allowed.</div>\n        </td>\n      </tr>\n            <tr>\n              <td rowspan=\"1\" colSpan=\"1\">\n                <div data-type=\"p\">group</div>\n              </td>\n              <td rowspan=\"1\" colSpan=\"1\">\n                <div data-type=\"p\">string</div>\n              </td>\n              <td rowspan=\"1\" colSpan=\"1\">\n                <div data-type=\"p\">Configuration group\n                </td>\n            </tr>\n      <tr>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">listener</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">ConfigChangeListenerAdapter</div>\n        </td>\n        <td rowspan=\"1\" colSpan=\"1\">\n          <div data-type=\"p\">Listener. Configuration changes go into the callback function of the listener.</div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<h4>Request example</h4>\n<pre><code class=\"language-java\">String serverAddr = <span class=\"hljs-string\">\"{serverAddr}\"</span>;\nString dataId = <span class=\"hljs-string\">\"{dataId}\"</span>;\nString group = <span class=\"hljs-string\">\"{group}\"</span>;\nProperties properties = <span class=\"hljs-keyword\">new</span> Properties();\nproperties.put(<span class=\"hljs-string\">\"serverAddr\"</span>, serverAddr);\nConfigService configService = NacosFactory.createConfigService(properties);\nconfigService.removeListener(dataId, group, yourListener);\n</code></pre>\n<h3>Publish configuration</h3>\n<h4>Description</h4>\n<p>Publish Nacos configurations automatically to reduce the operation and maintenance cost.</p>\n<p><strong>Note:</strong> It uses the same publishing interface to create or modify a configuration. If the specified configuration doesn’t exist, it will create a configuration. If the specified configuration exists, it will update the configuration.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">publishConfig</span><span class=\"hljs-params\">(String dataId, String group, String content)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-meta\">@Since</span> <span class=\"hljs-number\">1.4</span><span class=\"hljs-number\">.1</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">publishConfig</span><span class=\"hljs-params\">(String dataId, String group, String content, String type)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n</code></pre>\n<h4>Request parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th style=\"text-align:left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">dataId</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">Configuration ID. Naming rule is similar to package.class (com.taobao.tc.refund.log.level) is used to ensure the global uniqueness We recommend that you define class by business meaning. All characters must be in lower case. Use alphabetical letters and these four special characters (&quot;.&quot;, &quot;:&quot;, &quot;-&quot;, &quot;_&quot;) only. Up to 256 characters are allowed.</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">group</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">Configuration group. We recommend that you use product name: module name (for example Nacos:Test) to ensure the uniqueness. Use alphabetical letters and these four special characters (&quot;.&quot;, &quot;:&quot;, &quot;-&quot;, &quot;_&quot;) only. Up to 128 characters are allowed.</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">content</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">Configuration content. No more than 100K bytes.</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">type</td>\n<td style=\"text-align:left\">string</td>\n<td style=\"text-align:left\">@Since 1.4.1. Configuration type. See com.alibaba.nacos.api.config.ConfigType, default as TEXT.</td>\n</tr>\n</tbody>\n</table>\n<h4>Response parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Type</th>\n<th style=\"text-align:left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">If the publishing is successful</td>\n</tr>\n</tbody>\n</table>\n<h4>Request example</h4>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-comment\">// Initialize the configuration service. Retrieves the following parameters in console with sample code</span>\n\tString serverAddr = <span class=\"hljs-string\">\"{serverAddr}\"</span>;\n\tString dataId = <span class=\"hljs-string\">\"{dataId}\"</span>;\n\tString group = <span class=\"hljs-string\">\"{group}\"</span>;\n\tProperties properties = <span class=\"hljs-keyword\">new</span> Properties();\n\tproperties.put(<span class=\"hljs-string\">\"serverAddr\"</span>, serverAddr);\n    ConfigService configService = NacosFactory.createConfigService(properties);\n\t<span class=\"hljs-keyword\">boolean</span> isPublishOk = configService.publishConfig(dataId, group, <span class=\"hljs-string\">\"content\"</span>);\n\tSystem.out.println(isPublishOk);\n} <span class=\"hljs-keyword\">catch</span> (NacosException e) {\n    <span class=\"hljs-comment\">// TODO Auto-generated catch block</span>\n    e.printStackTrace();\n}\n</code></pre>\n<h4>Exceptions</h4>\n<p>In case of reading configuration timeout or network issues, ConfigException exception is thrown.</p>\n<h3>Delete configuration</h3>\n<h4>Description</h4>\n<p>It deletes Nacos configurations automatically with program to reduce operation and maintenance costs with automation.</p>\n<p><strong>Note:</strong> If the specified configuration exists, then it deletes the configuration. If the specified configuration doesn’t exist, then it returns a successful message.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">removeConfig</span><span class=\"hljs-params\">(String dataId, String group)</span> <span class=\"hljs-keyword\">throws</span> NacosException\n\n</span></code></pre>\n<h4>Request parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Parameter name</th>\n<th style=\"text-align:left\">Parameter type</th>\n<th style=\"text-align:left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">dataId</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">Configuration ID</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">group</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">Configuration group</td>\n</tr>\n</tbody>\n</table>\n<h4>Response parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Parameter type</th>\n<th style=\"text-align:left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">boolean</td>\n<td style=\"text-align:left\">If the deletion is successful</td>\n</tr>\n</tbody>\n</table>\n<h4>Request example</h4>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-comment\">// Initialize the configuration service. Retrieves the following parameters in console with sample code</span>\n\tString serverAddr = <span class=\"hljs-string\">\"{serverAddr}\"</span>;\n\tString dataId = <span class=\"hljs-string\">\"{dataId}\"</span>;\n\tString group = <span class=\"hljs-string\">\"{group}\"</span>;\n\tProperties properties = <span class=\"hljs-keyword\">new</span> Properties();\n\tproperties.put(<span class=\"hljs-string\">\"serverAddr\"</span>, serverAddr);\n\n\tConfigService configService = NacosFactory.createConfigService(properties);\n\t<span class=\"hljs-keyword\">boolean</span> isRemoveOk = configService.removeConfig(dataId, group);\n\tSystem.out.println(isRemoveOk);\n} <span class=\"hljs-keyword\">catch</span> (NacosException e) {\n    <span class=\"hljs-comment\">// TODO Auto-generated catch block</span>\n    e.printStackTrace();\n}\n</code></pre>\n<h4>Exceptions</h4>\n<p>In case of reading configuration timeout or network issues, ConfigException exception is thrown.</p>\n<h2>Service Discovery SDK</h2>\n<h3>Register Instance</h3>\n<h4>Description</h4>\n<p>Register an instance to service.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerInstance</span><span class=\"hljs-params\">(String serviceName, String ip, <span class=\"hljs-keyword\">int</span> port)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerInstance</span><span class=\"hljs-params\">(String serviceName, String ip, <span class=\"hljs-keyword\">int</span> port, String clusterName)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerInstance</span><span class=\"hljs-params\">(String serviceName, Instance instance)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n</code></pre>\n<h4>Request Parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">serviceName</td>\n<td style=\"text-align:left\">String</td>\n<td>service name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ip</td>\n<td style=\"text-align:left\">String</td>\n<td>instance ip</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">port</td>\n<td style=\"text-align:left\">int</td>\n<td>instance port</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusterName</td>\n<td style=\"text-align:left\">String</td>\n<td>cluster name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">instance</td>\n<td style=\"text-align:left\">Refer to Java docs</td>\n<td>instance properties</td>\n</tr>\n</tbody>\n</table>\n<h4>Response</h4>\n<p>void</p>\n<h4>Request Example</h4>\n<pre><code class=\"language-java\">NamingService naming = NamingFactory.createNamingService(System.getProperty(<span class=\"hljs-string\">\"serveAddr\"</span>));\nnaming.registerInstance(<span class=\"hljs-string\">\"nacos.test.3\"</span>, <span class=\"hljs-string\">\"11.11.11.11\"</span>, <span class=\"hljs-number\">8888</span>, <span class=\"hljs-string\">\"TEST1\"</span>);\n\nInstance instance = <span class=\"hljs-keyword\">new</span> Instance();\ninstance.setIp(<span class=\"hljs-string\">\"55.55.55.55\"</span>);\ninstance.setPort(<span class=\"hljs-number\">9999</span>);\ninstance.setHealthy(<span class=\"hljs-keyword\">false</span>);\ninstance.setWeight(<span class=\"hljs-number\">2.0</span>);\nMap&lt;String, String&gt; instanceMeta = <span class=\"hljs-keyword\">new</span> HashMap&lt;&gt;();\ninstanceMeta.put(<span class=\"hljs-string\">\"site\"</span>, <span class=\"hljs-string\">\"et2\"</span>);\ninstance.setMetadata(instanceMeta);\n\nService service = <span class=\"hljs-keyword\">new</span> Service(<span class=\"hljs-string\">\"nacos.test.4\"</span>);\nservice.setApp(<span class=\"hljs-string\">\"nacos-naming\"</span>);\nservice.setHealthCheckMode(<span class=\"hljs-string\">\"server\"</span>);\nservice.setProtectThreshold(<span class=\"hljs-number\">0.8F</span>);\nservice.setGroup(<span class=\"hljs-string\">\"CNCF\"</span>);\nMap&lt;String, String&gt; serviceMeta = <span class=\"hljs-keyword\">new</span> HashMap&lt;&gt;();\nserviceMeta.put(<span class=\"hljs-string\">\"symmetricCall\"</span>, <span class=\"hljs-string\">\"true\"</span>);\nservice.setMetadata(serviceMeta);\ninstance.setService(service);\n\nCluster cluster = <span class=\"hljs-keyword\">new</span> Cluster();\ncluster.setName(<span class=\"hljs-string\">\"TEST5\"</span>);\nAbstractHealthChecker.Http healthChecker = <span class=\"hljs-keyword\">new</span> AbstractHealthChecker.Http();\nhealthChecker.setExpectedResponseCode(<span class=\"hljs-number\">400</span>);\nhealthChecker.setCurlHost(<span class=\"hljs-string\">\"USer-Agent|Nacos\"</span>);\nhealthChecker.setCurlPath(<span class=\"hljs-string\">\"/xxx.html\"</span>);\ncluster.setHealthChecker(healthChecker);\nMap&lt;String, String&gt; clusterMeta = <span class=\"hljs-keyword\">new</span> HashMap&lt;&gt;();\nclusterMeta.put(<span class=\"hljs-string\">\"xxx\"</span>, <span class=\"hljs-string\">\"yyyy\"</span>);\ncluster.setMetadata(clusterMeta);\n\ninstance.setCluster(cluster);\n\nnaming.registerInstance(<span class=\"hljs-string\">\"nacos.test.4\"</span>, instance);\n</code></pre>\n<h3>Deregister Instance</h3>\n<h4>Description</h4>\n<p>Remove instance from service.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">deregisterInstance</span><span class=\"hljs-params\">(String serviceName, String ip, <span class=\"hljs-keyword\">int</span> port)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">deregisterInstance</span><span class=\"hljs-params\">(String serviceName, String ip, <span class=\"hljs-keyword\">int</span> port, String clusterName)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n</code></pre>\n<h4>Request Parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th style=\"text-align:left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">serviceName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">service name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ip</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">instance ip</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">port</td>\n<td style=\"text-align:left\">int</td>\n<td style=\"text-align:left\">instance port</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusterName</td>\n<td style=\"text-align:left\">String</td>\n<td style=\"text-align:left\">cluster name</td>\n</tr>\n</tbody>\n</table>\n<h4>Response</h4>\n<p>None</p>\n<h4>Request Example</h4>\n<pre><code class=\"language-java\">NamingService naming = NamingFactory.createNamingService(System.getProperty(<span class=\"hljs-string\">\"serveAddr\"</span>));\nnaming.deregisterInstance(<span class=\"hljs-string\">\"nacos.test.3\"</span>, <span class=\"hljs-string\">\"11.11.11.11\"</span>, <span class=\"hljs-number\">8888</span>, <span class=\"hljs-string\">\"DEFAULT\"</span>);\n</code></pre>\n<h3>Get all instances of service</h3>\n<h4>Description</h4>\n<p>Get all instances of service.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\">List&lt;Instance&gt; <span class=\"hljs-title\">getAllInstances</span><span class=\"hljs-params\">(String serviceName)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\">List&lt;Instance&gt; <span class=\"hljs-title\">getAllInstances</span><span class=\"hljs-params\">(String serviceName, List&lt;String&gt; clusters)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n</code></pre>\n<h4>Request Parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">serviceName</td>\n<td style=\"text-align:left\">String</td>\n<td>service name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusters</td>\n<td style=\"text-align:left\">List</td>\n<td>cluster list</td>\n</tr>\n</tbody>\n</table>\n<h4>Response</h4>\n<p>List<Instance> instance list。</p>\n<h4>Request Example</h4>\n<pre><code class=\"language-java\">NamingService naming = NamingFactory.createNamingService(System.getProperty(<span class=\"hljs-string\">\"serveAddr\"</span>));\nSystem.out.println(naming.getAllInstances(<span class=\"hljs-string\">\"nacos.test.3\"</span>));\n</code></pre>\n<h3>Get filtered list of instance</h3>\n<h4>Description</h4>\n<p>Get healthy or unhealthy instances of service.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\">List&lt;Instance&gt; <span class=\"hljs-title\">selectInstances</span><span class=\"hljs-params\">(String serviceName, <span class=\"hljs-keyword\">boolean</span> healthy)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\">List&lt;Instance&gt; <span class=\"hljs-title\">selectInstances</span><span class=\"hljs-params\">(String serviceName, List&lt;String&gt; clusters, <span class=\"hljs-keyword\">boolean</span> healthy)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n</code></pre>\n<h4>Request Parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">serviceName</td>\n<td style=\"text-align:left\">String</td>\n<td>service name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusters</td>\n<td style=\"text-align:left\">List</td>\n<td>cluster list</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">healthy</td>\n<td style=\"text-align:left\">boolean</td>\n<td>healthy or not</td>\n</tr>\n</tbody>\n</table>\n<h4>Response</h4>\n<p>List<Instance> instance list.</p>\n<h4>Request Example</h4>\n<pre><code class=\"language-java\">NamingService naming = NamingFactory.createNamingService(System.getProperty(<span class=\"hljs-string\">\"serveAddr\"</span>));\nSystem.out.println(naming.selectInstances(<span class=\"hljs-string\">\"nacos.test.3\"</span>, <span class=\"hljs-keyword\">true</span>));\n</code></pre>\n<h3>Get one healthy instance</h3>\n<h4>Description</h4>\n<p>Get one healthy instance selected by load-balance strategy.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\">Instance <span class=\"hljs-title\">selectOneHealthyInstance</span><span class=\"hljs-params\">(String serviceName)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\">Instance <span class=\"hljs-title\">selectOneHealthyInstance</span><span class=\"hljs-params\">(String serviceName, List&lt;String&gt; clusters)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n</code></pre>\n<h4>Request Parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">serviceName</td>\n<td style=\"text-align:left\">String</td>\n<td>service name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusters</td>\n<td style=\"text-align:left\">List</td>\n<td>cluster list</td>\n</tr>\n</tbody>\n</table>\n<h4>Response</h4>\n<p>Instance</p>\n<h4>Request Example</h4>\n<pre><code class=\"language-java\">NamingService naming = NamingFactory.createNamingService(System.getProperty(<span class=\"hljs-string\">\"serveAddr\"</span>));\nSystem.out.println(naming.selectOneHealthyInstance(<span class=\"hljs-string\">\"nacos.test.3\"</span>));\n</code></pre>\n<h3>Listen Service</h3>\n<h4>Description</h4>\n<p>Listen for changes of instances under a service.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">subscribe</span><span class=\"hljs-params\">(String serviceName, EventListener listener)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">subscribe</span><span class=\"hljs-params\">(String serviceName, List&lt;String&gt; clusters, EventListener listener)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n</code></pre>\n<h4>Request Parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">serviceName</td>\n<td style=\"text-align:left\">String</td>\n<td>service name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusters</td>\n<td style=\"text-align:left\">List</td>\n<td>cluster list</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">listener</td>\n<td style=\"text-align:left\">EventListener</td>\n<td>event listener</td>\n</tr>\n</tbody>\n</table>\n<h4>Response</h4>\n<p>void</p>\n<h4>Request Example</h4>\n<pre><code class=\"language-java\">NamingService naming = NamingFactory.createNamingService(System.getProperty(<span class=\"hljs-string\">\"serveAddr\"</span>));\nnaming.subscribe(<span class=\"hljs-string\">\"nacos.test.3\"</span>, event -&gt; {\n    <span class=\"hljs-keyword\">if</span> (event <span class=\"hljs-keyword\">instanceof</span> NamingEvent) {\n        System.out.println(((NamingEvent) event).getServceName());\n        System.out.println(((NamingEvent) event).getInstances());\n    }\n});\n</code></pre>\n<h3>Unlisten Service</h3>\n<h4>Description</h4>\n<p>Cancel listening service.</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">unsubscribe</span><span class=\"hljs-params\">(String serviceName, EventListener listener)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">unsubscribe</span><span class=\"hljs-params\">(String serviceName, List&lt;String&gt; clusters, EventListener listener)</span> <span class=\"hljs-keyword\">throws</span> NacosException</span>;\n</code></pre>\n<h4>Request Parameters</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Name</th>\n<th style=\"text-align:left\">Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">serviceName</td>\n<td style=\"text-align:left\">String</td>\n<td>service name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">clusters</td>\n<td style=\"text-align:left\">List</td>\n<td>cluster list</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">listener</td>\n<td style=\"text-align:left\">EventListener</td>\n<td>event listener</td>\n</tr>\n</tbody>\n</table>\n<h4>Response</h4>\n<p>void</p>\n<h4>Request Example</h4>\n<pre><code class=\"language-java\">NamingService naming = NamingFactory.createNamingService(System.getProperty(<span class=\"hljs-string\">\"serveAddr\"</span>));\nnaming.unsubscribe(<span class=\"hljs-string\">\"nacos.test.3\"</span>, event -&gt; {});\n</code></pre>\n",
  "link": "/en-us/docs/sdk.html",
  "meta": {
    "title": "Java SDK",
    "keywords": "Java,SDK",
    "description": "Java SDK"
  }
}