<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="Nacos,service,discovery,performance" />
	<meta name="description" content="Nacos service discovery performance test report" />
	<!-- 网页标签标题 -->
	<title>Nacos service discovery performance test report</title>
	<link rel="shortcut icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/en-us/index.html"><img class="logo" src="/img/nacos_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">中</span><div class="header-menu"><img class="header-menu-toggle" src="/img/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/en-us/index.html">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/en-us/docs/quick-start.html">DOCS</a></li><li class="menu-item menu-item-normal"><a href="/en-us/docs/nacos-dev.html">TEAM</a></li><li class="menu-item menu-item-normal"><a href="/en-us/blog">BLOG</a></li><li class="menu-item menu-item-normal"><a href="/en-us/community">COMMUNITY</a></li><li class="menu-item menu-item-normal"><a href="https://www.aliyun.com/product/mse?spm=nacos-website.topbar.0.0.0">NACOS IN CLOUD</a><img class="menu-img" src="https://img.alicdn.com/tfs/TB1esl_m.T1gK0jSZFrXXcNCXXa-200-200.png"/></li><li class="menu-item menu-item-normal"><a href="http://console.nacos.io/nacos/index.html">DEMO-CONSOLE</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/img/docs.png" class="front-img"/><div class="bar-title"><span>Documentation</span><div class="bone bone-light"></div></div><img src="/img/docs.png" class="back-img"/></div></div><section class="content-section"><div class="content-body"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>Nacos </span><ul><li style="height:180px;overflow:hidden" class="menu-item menu-item-level-2"><span>What is Nacos<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/what-is-nacos.html" target="_self">What is Nacos</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/concepts.html" target="_self">Concepts</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/architecture.html" target="_self">Architecure</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/faq.html" target="_self">FAQ</a></li></ul></li><li style="height:324px;overflow:hidden" class="menu-item menu-item-level-2"><span>Quick Start<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/quick-start.html" target="_self">Nacos</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/quick-start-spring.html" target="_self">Nacos Spring</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/quick-start-spring-boot.html" target="_self">Nacos Spring Boot</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/quick-start-spring-cloud.html" target="_self">Nacos Spring Cloud</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/quick-start-docker.html" target="_self">Nacos Docker</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/use-nacos-with-dubbo.html" target="_self">Nacos with Dubbo</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/use-nacos-with-kubernetes.html" target="_self">Nacos with K8s</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/nacos-sync.html" target="_self">Nacos Sync</a></li></ul></li><li style="height:252px;overflow:hidden" class="menu-item menu-item-level-2"><span>User Guide<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/sdk.html" target="_self">Java SDK</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/other-language.html" target="_self">Other Language</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/open-api.html" target="_self">Open-API</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/nacos-spring.html" target="_self">Nacos Spring</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/namespace-endpoint-best-practices.html" target="_self">Namespace, endpoint best practices</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/system-configurations.html" target="_self">Nacos System Configurations</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Admin Guide<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/deployment.html" target="_self">Deployment Guide</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/cluster-mode-quick-start.html" target="_self">Cluster Mode Deployment</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/management-api.html" target="_self">Management OpenAPI</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/console-guide.html" target="_self">Admin Console Guide</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/monitor-guide.html" target="_self">Nacos Monitor Guide</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/nacos-config-benchmark.html" target="_self">Nacos Config Benchmark</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/nacos-naming-benchmark.html" target="_self">Nacos Naming Benchmark</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/nacos-sync-use.html" target="_self">Data Migration to Nacos</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Contributor Guide<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/contributing.html" target="_self">Contribute to Nacos</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/activity.html" target="_self">Nacos Activity</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/pull-request.html" target="_self">Pull Request Template</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/how-to-reporting-bugs.html" target="_self">How to reporting bugs</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/roadmap.html" target="_self">Nacos RoadMap</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/use-nacos-with-istio.html" target="_self">Nacos with Istio</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Community<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/community.html" target="_self">Community</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>Nacos service discovery performance test report</h1>
<h2>Test purposes</h2>
<p>Main understanding Nacos service discovery performance load and capacity, to help us better manage Nacos performance quality, help users use of assessment Nacos system load faster.</p>
<h2>Testing tools</h2>
<p>We use the research of PAS performance evaluation service platform for pressure measurement, the principle is based on the use of JMeter engine, the use of PAS to automatically generate the JMeter scripts, intelligent pressure measurement.</p>
<p><img src="https://img.alicdn.com/tfs/TB1xCfDDpzqK1RjSZFvXXcB7VXa-692-297.png" alt="IMAGE"></p>
<h2>Test environment</h2>
<h3>1.environment</h3>
<table>
<thead>
<tr>
<th>indicators</th>
<th>parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>machine</td>
<td>CPU 16 nuclear, 32G memory</td>
</tr>
<tr>
<td>cluster size</td>
<td>3 nodes</td>
</tr>
<tr>
<td>Nacos version</td>
<td>1.0.0</td>
</tr>
</tbody>
</table>
<h3>2.Set the launch parameters</h3>
<pre><code>/opt/taobao/java/bin/java	 -server
-Xms20g
-Xmx20g
-Xmn10g	 -XX:MetaspaceSize=128m
-XX:MaxMetaspaceSize=320m
-XX:-OmitStackTraceInFastThrow
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/home/admin/nacos/logs/java_heapdump.hprof
-XX:-UseLargePages
-Djava.ext.dirs=/opt/taobao/java/jre/lib/ext:/opt/taobao/java/lib/ext:/home/admin/nacos/plugi
ns/cmdb:/home/admin/nacos/plugins/mysql	 -Xloggc:/home/admin/nacos/logs/nacos_gc.log
-verbose:gc	 -XX:+PrintGCDetails	 -XX:+PrintGCDateStamps	 -XX:+PrintGCTimeStamps
-XX:+UseGCLogFileRotation
-XX:NumberOfGCLogFiles=10	 -XX:GCLogFileSize=100M	 -Xdebug
-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000
-Dnacos.home=/home/admin/nacos	 -jar	 /home/admin/nacos/target/nacos-server.jar
--spring.config.location=classpath:/,classpath:/config/,file:./,file:./config/,file:/home/admin/naco
s/conf/	--logging.config=/home/admin/nacos/conf/nacos-logback.xml	nacos.nacos
</code></pre>
<h2>Test scenarios</h2>
<p>The following test scenarios are service discovery interface:</p>
<ul>
<li>Verify Nacos service discovery that the ability to register instance</li>
<li>Verify Nacos service discovery that the ability to query instance</li>
<li>Verify Nacos service discovery that the ability to delete instance</li>
</ul>
<h2>Test data</h2>
<h3>1. register instance</h3>
<p>Nacos service discovery registry instance the performance of the interface, call the HTTP interface test.
The measured 3 nodes cluster performance under different pressure:</p>
<table>
<thead>
<tr>
<th style="text-align:center">machine*concurrency num</th>
<th style="text-align:center">service num</th>
<th style="text-align:center">register instance num</th>
<th style="text-align:center">TPS</th>
<th style="text-align:center">RT(ms)</th>
<th style="text-align:center">MIN RT(ms)</th>
<th style="text-align:center">MAX RT(ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1*100</td>
<td style="text-align:center">80301</td>
<td style="text-align:center">84965</td>
<td style="text-align:center">1793.41</td>
<td style="text-align:center">54.63</td>
<td style="text-align:center">0.8</td>
<td style="text-align:center">1200.86</td>
</tr>
<tr>
<td style="text-align:center">3*50</td>
<td style="text-align:center">529321</td>
<td style="text-align:center">819226</td>
<td style="text-align:center">12574.8</td>
<td style="text-align:center">15.8</td>
<td style="text-align:center">0.45</td>
<td style="text-align:center">3499.59</td>
</tr>
<tr>
<td style="text-align:center">4*50</td>
<td style="text-align:center">609726</td>
<td style="text-align:center">836870</td>
<td style="text-align:center">13000</td>
<td style="text-align:center">18.54</td>
<td style="text-align:center">0.46</td>
<td style="text-align:center">3038.48</td>
</tr>
<tr>
<td style="text-align:center">4*100</td>
<td style="text-align:center">777262</td>
<td style="text-align:center">927169</td>
<td style="text-align:center">13257</td>
<td style="text-align:center">35.65</td>
<td style="text-align:center">0.48</td>
<td style="text-align:center">3231.2</td>
</tr>
</tbody>
</table>
<h3>2. query instance</h3>
<p>Nacos service discovery query instance of the performance of the interface, call the HTTP interface test.
The measured 3 nodes cluster performance under different pressure:</p>
<table>
<thead>
<tr>
<th style="text-align:center">machine*concurrency num</th>
<th style="text-align:center">service num</th>
<th style="text-align:center">register instance num</th>
<th style="text-align:center">TPS</th>
<th style="text-align:center">RT(ms)</th>
<th style="text-align:center">MIN RT(ms)</th>
<th style="text-align:center">MAX RT(ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1*100</td>
<td style="text-align:center">80301</td>
<td style="text-align:center">84965</td>
<td style="text-align:center">3092.16</td>
<td style="text-align:center">30.86</td>
<td style="text-align:center">0.81</td>
<td style="text-align:center">509.4</td>
</tr>
<tr>
<td style="text-align:center">3*50</td>
<td style="text-align:center">529321</td>
<td style="text-align:center">819226</td>
<td style="text-align:center">12574.8</td>
<td style="text-align:center">15.8</td>
<td style="text-align:center">0.45</td>
<td style="text-align:center">3499.59</td>
</tr>
<tr>
<td style="text-align:center">4*50</td>
<td style="text-align:center">609726</td>
<td style="text-align:center">836870</td>
<td style="text-align:center">15603</td>
<td style="text-align:center">16.41</td>
<td style="text-align:center">0.42</td>
<td style="text-align:center">3042.17</td>
</tr>
<tr>
<td style="text-align:center">4*100</td>
<td style="text-align:center">777262</td>
<td style="text-align:center">927169</td>
<td style="text-align:center">13604</td>
<td style="text-align:center">34.19</td>
<td style="text-align:center">0.43</td>
<td style="text-align:center">3434.1</td>
</tr>
</tbody>
</table>
<h3>3. delete instance</h3>
<p>Nacos service discovery delete instance is given to the performance of the interface, call the HTTP interface test.
The measured 3 nodes cluster performance under different pressure:</p>
<table>
<thead>
<tr>
<th style="text-align:center">machine*concurrency num</th>
<th style="text-align:center">service num</th>
<th style="text-align:center">register instance num</th>
<th style="text-align:center">TPS</th>
<th style="text-align:center">RT(ms)</th>
<th style="text-align:center">MIN RT(ms)</th>
<th style="text-align:center">MAX RT(ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1*100</td>
<td style="text-align:center">80301</td>
<td style="text-align:center">84965</td>
<td style="text-align:center">1118.95</td>
<td style="text-align:center">14.08</td>
<td style="text-align:center">0.7</td>
<td style="text-align:center">597.43</td>
</tr>
<tr>
<td style="text-align:center">3*50</td>
<td style="text-align:center">529321</td>
<td style="text-align:center">819226</td>
<td style="text-align:center">14508.53</td>
<td style="text-align:center">11.23</td>
<td style="text-align:center">0.4</td>
<td style="text-align:center">3274.49</td>
</tr>
<tr>
<td style="text-align:center">4*50</td>
<td style="text-align:center">609726</td>
<td style="text-align:center">836870</td>
<td style="text-align:center">15476.93</td>
<td style="text-align:center">16.02</td>
<td style="text-align:center">0.38</td>
<td style="text-align:center">3106.23</td>
</tr>
<tr>
<td style="text-align:center">4*100</td>
<td style="text-align:center">777262</td>
<td style="text-align:center">927169</td>
<td style="text-align:center">11940.9</td>
<td style="text-align:center">40.33</td>
<td style="text-align:center">0.42</td>
<td style="text-align:center">51052.46</td>
</tr>
</tbody>
</table>
<h2>Test results</h2>
<p>Nacos service discovery performance test is aimed at a key function, through the pressure test was carried out on the 3 nodes cluster, can see the interface performance load and capacity.</p>
<ol>
<li>Service for up to 60w pressure measuring capacity, instance registered number up to 110w, cluster running steadily, the desired;(note: due to the registered instance using the HTTP interface, did not report to the heart of the TPS is included, if you want to support millions of instances of heartbeat report, need expansion and cluster level, and tuning tomcat and kernel parameters)</li>
<li>Register the TPS/query instance above 13000, interface to achieve expected;</li>
</ol>
<p>The tests only temporary instance/query/cancellation of registration, no persistent instance (subsequent);</p>
<p>This test provides you as reference, if there are any deficiency or deviation, please correct me!
If you have any other requirements on the performance, can you give us the issue.</p>
</div></div></section><footer class="footer-container"><div class="footer-body"><img src="/img/nacos_gray.png"/><div class="cols-container"><div class="col col-12"><h3>Vision</h3><p>By providing an easy-to-use service infrastructure such as dynamic service discovery, service configuration, service sharing and management and etc., Nacos help users better construct, deliver and manage their own service platform, reuse and composite business service faster and deliver value of business innovation more quickly so as to win market for users in the era of cloud native and in all cloud environments, such as private, mixed, or public clouds.</p></div><div class="col col-6"><dl><dt>Documentation</dt><dd><a href="/en-us/docs/what-is-nacos.html" target="_self">Overview</a></dd><dd><a href="/en-us/docs/quick-start.html" target="_self">Quick start</a></dd><dd><a href="/en-us/docs/contributing.html" target="_self">Developer guide</a></dd></dl></div><div class="col col-6"><dl><dt>Resources</dt><dd><a href="/en-us/community/index.html" target="_self">Community</a></dd><dd><a href="https://www.aliyun.com/product/acm?source_type=nacos_pc_20181219" target="_self">Cloud Service ACM</a></dd><dd><a href="https://www.aliyun.com/product/edas?source_type=nacos_pc_20181219" target="_self">Cloud Service EDAS</a></dd><dd><a href="https://www.aliyun.com/product/ahas?source_type=nacos_pc_20190225" target="_self">Cloud Service AHAS</a></dd></dl></div></div><div class="copyright"><span>@ 2018 The Nacos Authors | An Alibaba Middleware (Aliware) Project</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/documentation.js"></script>
</body>
</html>