{
  "filename": "cluster-mode-quick-start.md",
  "__html": "<h1>Cluster deployment instructions</h1>\n<blockquote>\n<p>Document optimizing...</p>\n</blockquote>\n<h2>Cluster Mode Deployment</h2>\n<p>This Quick Start Manual is to help you quickly download, install and use Nacos on your computer to deploy the cluster mode for production use.</p>\n<h3>Cluster Deployment Architecture</h3>\n<p>Therefore, when it is open source, it is recommended that users put all server lists under a vip and then hang under a domain name.</p>\n<p><a href=\"Http://ip1\">Http://ip1</a>:port/openAPI Directly connected to ip mode, the machine needs to be modified to use ip.</p>\n<p><a href=\"Http://SLB\">Http://SLB</a>:port/openAPI Mount the SLB mode(Intranet, do not expose internet to avoid security risks), directly connect to SLB, the following server ip real ip, readability is not good.</p>\n<p><a href=\"Http://nacos.com\">Http://nacos.com</a>:port/openAPI Domain name + SLB mode(Intranet, do not expose internet to avoid security risks), good readability, and easy to change ip, recommended mode</p>\n<p><img src=\"/img/deployDnsVipMode.jpg\" alt=\"deployDnsVipMode.jpg\"></p>\n<h2>1. Preparing for the Environment</h2>\n<p>Make sure that it is installed and used in the environment:</p>\n<ol>\n<li>64 bit OS Linux/Unix/Mac, recommended Linux system.</li>\n<li>64 bit JDK 1.8+; <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">Download</a>. <a href=\"https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javome_t/\">Configuration</a>.</li>\n<li>Maven 3.2.x+; <a href=\"https://maven.apache.org/download.cgi\">Download</a>. <a href=\"https://maven.apache.org/settings.html\">Configuration</a>.</li>\n<li>3 or more Nacos Nodes;</li>\n</ol>\n<h2>2. Download source code or installation package</h2>\n<p>You can get Nacos in two ways.</p>\n<h3>Download source code from Github</h3>\n<pre><code class=\"language-bash\">unzip nacos-source.zip\n<span class=\"hljs-built_in\">cd</span> nacos/\nmvn -Prelease-nacos clean install -U  \n<span class=\"hljs-built_in\">cd</span> nacos/distribution/target/nacos-server-1.3.0/nacos/bin\n</code></pre>\n<h3>Download Compressed Packet after Compilation</h3>\n<p>Download address</p>\n<p>Select the latest stable version from <a href=\"https://github.com/alibaba/nacos/releases\">releases</a> and download <code>nacos-server-$version.zip</code> or <code>nacos-server-$version.tar.gz</code></p>\n<pre><code class=\"language-bash\">  unzip nacos-server-<span class=\"hljs-variable\">$version</span>.zip  OR tar -xvf nacos-server-<span class=\"hljs-variable\">$version</span>.tar.gz\n  <span class=\"hljs-built_in\">cd</span> nacos/bin\n</code></pre>\n<h2>3. Configuration Cluster Profile</h2>\n<p>In the Nacos decompression directory Nacos / conf directory, there is a configuration file cluster. conf, please configure each line as ip: port.</p>\n<pre><code class=\"language-plain\"># ip:port\n200.8.9.16:8848\n200.8.9.17:8848\n200.8.9.18:8848\n</code></pre>\n<h3>3.1 Open Default auth plugin (Optional)</h3>\n<p>Then Setting configuration file <code>application.properties</code> under <code>conf</code>.</p>\n<p>Setting</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-meta\">nacos.core.auth.enabled</span>=<span class=\"hljs-string\">true</span>\n<span class=\"hljs-meta\">nacos.core.auth.system.type</span>=<span class=\"hljs-string\">nacos</span>\n<span class=\"hljs-meta\">nacos.core.auth.plugin.nacos.token.secret.key</span>=<span class=\"hljs-string\">${custom, make sure same in all nodes}</span>\n<span class=\"hljs-meta\">nacos.core.auth.server.identity.key</span>=<span class=\"hljs-string\">${custom, make sure same in all nodes}</span>\n<span class=\"hljs-meta\">nacos.core.auth.server.identity.value</span>=<span class=\"hljs-string\">${custom, make sure same in all nodes}</span>\n</code></pre>\n<p>Detail see <a href=\"../plugin/auth-plugin.md\">Authentication</a>.</p>\n<blockquote>\n<p>Attentionï¼ŒDefault value in Document <code>SecretKey012345678901234567890123456789012345678901234567890123456789</code> and <code>VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=</code> is a public default, <strong>only</strong> should use in test temporary. Please <strong>make sure</strong> to replace it with another valid value when you actually deploy.</p>\n</blockquote>\n<h2>4. Determine The DataSource</h2>\n<h3>Using built-in data sources</h3>\n<p>No configuration is required</p>\n<h3>Use an external data source</h3>\n<p><span data-type=\"color\" style=\"color:rgb(25, 31, 37)\"><span data-type=\"background\" style=\"background-color:rgb(255, 255, 255)\">production and use recommendations at least backup mode, or high availability database. </span></span></p>\n<h4>Initializes the MySQL database</h4>\n<p><a href=\"https://github.com/alibaba/nacos/blob/master/distribution/conf/mysql-schema.sql\">sql statement source file</a></p>\n<h3>application. properties configuration</h3>\n<p><a href=\"https://github.com/alibaba/nacos/blob/master/distribution/conf/application.properties\">application.properties configuration file</a></p>\n<h2>5. start server</h2>\n<h3>Linux/Unix/Mac</h3>\n<h4>Standalone mode</h4>\n<pre><code class=\"language-bash\">sh startup.sh -m standalone\n</code></pre>\n<h4>Cluster mode</h4>\n<blockquote>\n<p>Using built-in data sources</p>\n</blockquote>\n<pre><code class=\"language-bash\">sh startup.sh -p embedded\n</code></pre>\n<blockquote>\n<p>Use an external data source</p>\n</blockquote>\n<pre><code class=\"language-bash\">sh startup.sh\n</code></pre>\n<h2>6. Service Registration &amp; Discovery and Configuration Management</h2>\n<h3>Service registration</h3>\n<p><code>curl -X POST 'http://127.0.0.1:8848/nacos/v1/ns/instance?serviceName=nacos.naming.serviceName&amp;ip=20.18.7.10&amp;port=8080'</code></p>\n<blockquote>\n<p>Attention: If open default auth plugin, please call with username and password in header.</p>\n</blockquote>\n<h3>Service discovery</h3>\n<p><code>curl -X GET 'http://127.0.0.1:8848/nacos/v1/ns/instance/list?serviceName=nacos.naming.serviceName'</code></p>\n<blockquote>\n<p>Attention: If open default auth plugin, please call with username and password in header.</p>\n</blockquote>\n<h3>Publish configuration</h3>\n<p><code>curl -X POST &quot;http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&amp;content=helloWorld&quot;</code></p>\n<blockquote>\n<p>Attention: If open default auth plugin, please call with username and password in header.</p>\n</blockquote>\n<h3>get configuration</h3>\n<p><code>curl -X GET &quot;http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&quot;</code></p>\n<blockquote>\n<p>Attention: If open default auth plugin, please call with username and password in header.</p>\n</blockquote>\n<h2>7. shut down server</h2>\n<h3>Linux/Unix/Mac</h3>\n<pre><code class=\"language-bash\">sh shutdown.sh\n</code></pre>\n",
  "link": "/en-us/docs/v2/guide/admin/cluster-mode-quick-start.html",
  "meta": {
    "title": "Cluster deployment instructions",
    "keywords": "Cluster,deployment",
    "description": "Cluster deployment instructions"
  }
}