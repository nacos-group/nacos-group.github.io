{
  "filename": "use-nacos-with-rainbond.md",
  "__html": "<h1>Rainbond Nacos</h1>\n<p>当前文档描述如何通过云原生应用管理平台 <a href=\"https://www.rainbond.com/?channel=nacos\">Rainbond</a> 一键安装高可用 <a href=\"https://nacos.io\">Nacos</a> 集群。这种方式适合不太了解 Kubernetes、容器化等复杂技术的用户使用，降低了在 Kubernetes 中部署 Nacos 的门槛。</p>\n<h1>背景信息</h1>\n<h2>Rainbond 与 Nacos 的结合</h2>\n<p><a href=\"https://www.rainbond.com/?channel=nacos\">Rainbond</a> 是一款易于使用的开源云原生应用管理平台。借助于它，用户可以在图形化界面中完成微服务的部署与运维。借助 Kubernetes 和容器化技术的能力，将故障自愈、弹性伸缩等自动化运维能力赋能给用户的业务。</p>\n<p>Rainbond 内置原生 Service Mesh 微服务框架，同时与 Spring Cloud、Dubbo 等其他微服务框架也有很好的整合体验。故而大量的 Rainbond 用户也可能是 Nacos 微服务注册中心的用户。这类用户不必再关心如何部署 Nacos 集群，Rainbond 团队将 Nacos 制作成为可以一键部署的应用模版，供开源用户免费下载安装。这种安装方式极大的降低了用户使用 Nacos 集群的部署负担，目前支持 1.4.2 与 2.0.4 版本。</p>\n<h2>关于应用模版</h2>\n<p>应用模版是面向 Rainbond 云原生应用管理平台的安装包，用户可以基于它一键安装业务系统到自己的 Rainbond 中去。无论这个业务系统多么复杂，应用模版都会将其抽象成为一个应用，裹挟着应用内所有组件的镜像、配置信息以及所有组件之间的关联关系一并安装起来。</p>\n<h1>前提条件</h1>\n<ul>\n<li>\n<p>部署好的 Rainbond 云原生应用管理平台，<a href=\"https://www.rainbond.com/docs/quick-start/quick-install/?channel=nacos\">快速体验版本</a> 可以在个人 PC 环境中以启动一个容器的代价运行。</p>\n</li>\n<li>\n<p>互联网连接。</p>\n</li>\n</ul>\n<h1>快速开始</h1>\n<ul>\n<li><strong>访问内置的开源应用商店</strong></li>\n</ul>\n<blockquote>\n<p>选择左侧的 <strong>应用市场</strong> 标签页，在页面中切换到 <strong>开源应用商店</strong> 标签页，搜索关键词 <strong>nacos</strong> 即可找到 Nacos-cluster 应用。</p>\n</blockquote>\n<p><img src=\"https://static.goodrain.com/wechat/nacos-cluster/nacos-cluster-1.png\" alt=\"nacos-1\"></p>\n<ul>\n<li><strong>一键安装</strong></li>\n</ul>\n<blockquote>\n<p>点击 Nacos-cluster 右侧的 <strong>安装</strong> 可以进入安装页面，填写简单的信息之后，点击 <strong>确定</strong> 即可开始安装，页面自动跳转到拓扑视图。</p>\n</blockquote>\n<p><img src=\"https://static.goodrain.com/wechat/nacos-cluster/nacos-cluster-2.png\" alt=\"nacos-2\"></p>\n<p>参数说明：</p>\n<table>\n<thead>\n<tr>\n<th>选择项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>团队名称</td>\n<td>用户自建的工作空间，以命名空间隔离</td>\n</tr>\n<tr>\n<td>集群名称</td>\n<td>选择 Nacos 被部署到哪一个 K8s 集群</td>\n</tr>\n<tr>\n<td>选择应用</td>\n<td>选择 Nacos 被部署到哪一个应用，应用中包含有若干有关联的组件</td>\n</tr>\n<tr>\n<td>应用版本</td>\n<td>选择 Nacos 的版本，目前可选版本为 1.4.2、2.0.4</td>\n</tr>\n</tbody>\n</table>\n<p>等待几分钟后，Nacos 集群就会安装完成，并运行起来。</p>\n<p><img src=\"https://static.goodrain.com/wechat/nacos-cluster/nacos-cluster-3.png\" alt=\"nacos-3\"></p>\n<ul>\n<li><strong>测试</strong></li>\n</ul>\n<p>需要执行服务注册的其他微服务组件，可以在建立面向 Nacos 的<a href=\"https://www.rainbond.com/docs/use-manual/user-manual/component-connection/regist_and_discover\">依赖关系</a>后，使用 <code>${NACOS_HOST}:${NACOS_PORT}</code> 来连接到 Nacos 集群。</p>\n<ul>\n<li>\n<p><strong>服务注册</strong></p>\n<pre><code class=\"language-bash\">curl -X PUT <span class=\"hljs-string\">\"http://<span class=\"hljs-variable\">${NACOS_HOST}</span>:<span class=\"hljs-variable\">${NACOS_PORT}</span>/nacos/v1/ns/instance?serviceName=nacos.naming.serviceName&amp;ip=20.18.7.10&amp;port=8080\"</span>\n</code></pre>\n</li>\n<li>\n<p><strong>服务发现</strong></p>\n<pre><code class=\"language-bash\">curl -X GET <span class=\"hljs-string\">\"http://<span class=\"hljs-variable\">${NACOS_HOST}</span>:<span class=\"hljs-variable\">${NACOS_PORT}</span>/nacos/v1/ns/instance/list?serviceName=nacos.naming.serviceName\"</span>\n</code></pre>\n</li>\n<li>\n<p><strong>发布配置</strong></p>\n<pre><code class=\"language-bash\">curl -X POST <span class=\"hljs-string\">\"http://<span class=\"hljs-variable\">${NACOS_HOST}</span>:<span class=\"hljs-variable\">${NACOS_PORT}</span>/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&amp;content=helloWorld\"</span>\n</code></pre>\n</li>\n<li>\n<p><strong>获取配置</strong></p>\n<pre><code class=\"language-bash\">curl -X GET <span class=\"hljs-string\">\"http://<span class=\"hljs-variable\">${NACOS_HOST}</span>:<span class=\"hljs-variable\">${NACOS_PORT}</span>/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test\"</span>\n</code></pre>\n</li>\n</ul>\n<h1>高级特性</h1>\n<ul>\n<li>一键安装而来的 Nacos 集群中包含 3 个实例，并且通过初始化插件自动完成自组集群并选举的操作。</li>\n</ul>\n<p><img src=\"https://static.goodrain.com/wechat/nacos-cluster/nacos-cluster-4.png\" alt=\"nacos-4\"></p>\n<ul>\n<li>默认集成了 Mysql 作为数据源。在 <strong>Nacos-server-2.0.4</strong> 组件的环境配置中配置如下环境变量，可以切换到其他外部数据源。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>必要</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>MYSQL_SERVICE_HOST</code></td>\n<td>Y</td>\n<td>数据库地址</td>\n</tr>\n<tr>\n<td><code>MYSQL_SERVICE_PORT</code></td>\n<td>Y</td>\n<td>数据库端口</td>\n</tr>\n<tr>\n<td><code>MYSQL_SERVICE_USER</code></td>\n<td>Y</td>\n<td>数据库用户名</td>\n</tr>\n<tr>\n<td><code>MYSQL_SERVICE_PASSWORD</code></td>\n<td>Y</td>\n<td>数据库密码</td>\n</tr>\n<tr>\n<td><code>MYSQL_SERVICE_DB_NAME</code></td>\n<td>Y</td>\n<td>数据库名</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>默认生成了 <strong>Nacos-server-2.0.4</strong> 的数据持久化目录。</li>\n</ul>\n<p><img src=\"https://static.goodrain.com/wechat/nacos-cluster/nacos-cluster-5.png\" alt=\"nacos-5\"></p>\n<ul>\n<li>默认配置了 <strong>Nacos-server-2.0.4</strong> 的健康检查机制，保障实例故障时自动下线，恢复后自动上线。</li>\n</ul>\n<p><img src=\"https://static.goodrain.com/wechat/nacos-cluster/nacos-cluster-6.png\" alt=\"nacos-6\"></p>\n",
  "title": "在 Rainbond 中一键安装高可用 Nacos 集群",
  "keywords": "nacos,kubernetes,rainbond,云原生",
  "description": "当前文档描述如何通过云原生应用管理平台 Rainbond 一键安装高可用 Nacos 集群。"
}