{
  "filename": "cluster-mode-quick-start.md",
  "__html": "<h1>集群部署说明</h1>\n<h2>集群模式部署</h2>\n<p>这个快速开始手册是帮忙您快速在你的电脑上，下载安装并使用Nacos，部署生产使用的集群模式。</p>\n<h3>集群部署架构图</h3>\n<p>因此开源的时候推荐用户把所有服务列表放到一个vip下面，然后挂到一个域名下面</p>\n<p><a href=\"http://ip1\">http://ip1</a>:port/openAPI  直连ip模式，机器挂则需要修改ip才可以使用。</p>\n<p><a href=\"http://SLB\">http://SLB</a>:port/openAPI  挂载SLB模式(内网SLB，不可暴露到公网，以免带来安全风险)，直连SLB即可，下面挂server真实ip，可读性不好。</p>\n<p><a href=\"http://nacos.com\">http://nacos.com</a>:port/openAPI  域名 + SLB模式(内网SLB，不可暴露到公网，以免带来安全风险)，可读性好，而且换ip方便，推荐模式</p>\n<p><img src=\"/img/deployDnsVipMode.jpg\" alt=\"deployDnsVipMode.jpg\"></p>\n<h2>1. 预备环境准备</h2>\n<p>请确保是在环境中安装使用:</p>\n<ol>\n<li>64 bit OS  Linux/Unix/Mac，推荐使用Linux系统。</li>\n<li>64 bit JDK 1.8+；<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">下载</a>.<a href=\"https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/\">配置</a>。</li>\n<li>Maven 3.2.x+；<a href=\"https://maven.apache.org/download.cgi\">下载</a>.<a href=\"https://maven.apache.org/settings.html\">配置</a>。</li>\n<li>3个或3个以上Nacos节点才能构成集群。</li>\n</ol>\n<h2>2. 下载源码或者安装包</h2>\n<p>你可以通过两种方式来获取 Nacos。</p>\n<h3>从 Github 上下载源码方式</h3>\n<pre><code class=\"language-bash\">unzip nacos-source.zip\n<span class=\"hljs-built_in\">cd</span> nacos/\nmvn -Prelease-nacos clean install -U  \n<span class=\"hljs-built_in\">cd</span> nacos/distribution/target/nacos-server-1.3.0/nacos/bin\n</code></pre>\n<h3>下载编译后压缩包方式</h3>\n<p>下载地址</p>\n<p><a href=\"https://github.com/alibaba/nacos/releases/download/1.3.0/nacos-server-1.3.0.zip\">zip包</a></p>\n<p><a href=\"https://github.com/alibaba/nacos/releases/download/1.3.0/nacos-server-1.3.0.tar.gz\">tar.gz包</a></p>\n<pre><code class=\"language-bash\">  unzip nacos-server-1.3.0.zip 或者 tar -xvf nacos-server-1.3.0.tar.gz\n  <span class=\"hljs-built_in\">cd</span> nacos/bin\n</code></pre>\n<h2>3. 配置集群配置文件</h2>\n<p>在nacos的解压目录nacos/的conf目录下，有配置文件cluster.conf，请每行配置成ip:port。（请配置3个或3个以上节点）</p>\n<pre><code class=\"language-plain\"># ip:port\n200.8.9.16:8848\n200.8.9.17:8848\n200.8.9.18:8848\n</code></pre>\n<h2>4. 确定数据源</h2>\n<h3>使用内置数据源</h3>\n<p>无需进行任何配置</p>\n<h3>使用外置数据源</h3>\n<p><span data-type=\"color\" style=\"color:rgb(25, 31, 37)\"><span data-type=\"background\" style=\"background-color:rgb(255, 255, 255)\">生产使用建议至少主备模式，或者采用高可用数据库。</span></span></p>\n<h4>初始化 MySQL 数据库</h4>\n<p><a href=\"https://github.com/alibaba/nacos/blob/master/distribution/conf/nacos-mysql.sql\">sql语句源文件</a></p>\n<h4>application.properties 配置</h4>\n<p><a href=\"https://github.com/alibaba/nacos/blob/master/distribution/conf/application.properties\">application.properties配置文件</a></p>\n<h2>5. 启动服务器</h2>\n<h3>Linux/Unix/Mac</h3>\n<h4>Stand-alone mode</h4>\n<pre><code class=\"language-bash\">sh startup.sh -m standalone\n</code></pre>\n<h4>集群模式</h4>\n<blockquote>\n<p>使用内置数据源</p>\n</blockquote>\n<pre><code class=\"language-bash\">sh startup.sh -p embedded\n</code></pre>\n<blockquote>\n<p>使用外置数据源</p>\n</blockquote>\n<pre><code class=\"language-bash\">sh startup.sh\n</code></pre>\n<h2>6. 服务注册&amp;发现和配置管理</h2>\n<h3>服务注册</h3>\n<p><code>curl -X PUT 'http://127.0.0.1:8848/nacos/v1/ns/instance?serviceName=nacos.naming.serviceName&amp;ip=20.18.7.10&amp;port=8080'</code></p>\n<h3>服务发现</h3>\n<p><code>curl -X GET 'http://127.0.0.1:8848/nacos/v1/ns/instance/list?serviceName=nacos.naming.serviceName'</code></p>\n<h3>发布配置</h3>\n<p><code>curl -X POST &quot;http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&amp;content=helloWorld&quot;</code></p>\n<h3>获取配置</h3>\n<p><code>curl -X GET &quot;http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=nacos.cfg.dataId&amp;group=test&quot;</code></p>\n<h2>7. 关闭服务器</h2>\n<h3>Linux/Unix/Mac</h3>\n<pre><code class=\"language-bash\">sh shutdown.sh\n</code></pre>\n",
  "link": "\\zh-cn\\docs\\cluster-mode-quick-start.html",
  "meta": {
    "title": "集群部署说明",
    "keywords": "集群,部署",
    "description": "集群部署说明"
  }
}