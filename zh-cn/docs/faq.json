{
  "filename": "faq.md",
  "__html": "<h1>FAQ</h1>\n<ul>\n<li>\n<p>Nacos常规问题</p>\n<ul>\n<li><a href=\"#1.1\">Nacos是什么</a></li>\n<li><a href=\"#1.2\">Nacos如何支持多环境</a></li>\n<li><a href=\"#1.3\">Nacos是否生产可用</a></li>\n<li><a href=\"#1.4\">Nacos版本计划</a></li>\n<li><a href=\"#1.5\">Nacos有什么依赖</a></li>\n<li><a href=\"#1.6\">Nacos使用什么开源协议</a></li>\n</ul>\n</li>\n<li>\n<p>Nacos运维问题</p>\n<ul>\n<li><a href=\"#2.1\">Nacos如何单机部署</a></li>\n<li><a href=\"#2.2\">Nacos单机部署如何使用Mysql</a></li>\n<li><a href=\"#2.3\">生产环境如何部署Nacos</a></li>\n<li><a href=\"#2.4\">Nacos如何Docker部署</a></li>\n<li><a href=\"#2.5\">如何在k8s中部署Nacos</a></li>\n<li><a href=\"#2.6\">如何监控Nacos</a></li>\n</ul>\n</li>\n<li>\n<p>Nacos使用问题</p>\n<ul>\n<li><a href=\"#3.1\">Zookeeper服务可以迁移到Nacos上吗</a></li>\n<li><a href=\"#3.2\">Nacos支持多配置文件</a></li>\n<li><a href=\"#3.3\">Nacos支持Dubbo</a></li>\n<li><a href=\"#3.4\">Nacos支持Spring体系</a></li>\n<li><a href=\"#3.5\">不使用Nacos SDK如何访问Nacos</a></li>\n<li><a href=\"#3.6\">Nacos对多语言的支持</a></li>\n<li><a href=\"#3.7\">Nacos0.8版本登陆失败</a></li>\n<li><a href=\"#3.8\">服务端报错<code>java.lang.IllegalStateException: unable to find local peer: 127.0.0.1:8848</code></a></li>\n<li><a href=\"#3.9\">Nacos如何对配置进行加密</a></li>\n<li><a href=\"#3.10\">Nacos报401错误</a></li>\n<li><a href=\"#3.11\">Nacos权重不生效</a></li>\n<li><a href=\"#3.12\">Nacos如何扩缩容</a></li>\n<li><a href=\"#3.13\">Nacos客户端修改日志级别</a></li>\n<li><a href=\"#3.14\">Nacos与Zipkin 整合出现<code>Service not found</code>问题</a></li>\n<li><a href=\"#3.15\">如何依赖最新的Nacos客户端？</a></li>\n<li><a href=\"#3.16\">客户端CPU高，或者内存耗尽的问题</a></li>\n<li><a href=\"#3.17\">日志打印频繁的问题</a></li>\n<li><a href=\"#3.18\">集群管理页面，raft term显示不一致问题</a></li>\n<li><a href=\"#3.19\">找不到符号<code>com.alibaba.nacos.consistency.entity</code></a></li>\n</ul>\n</li>\n<li>\n<p>Nacos原理问题</p>\n</li>\n</ul>\n<h2>Nacos常规问题</h2>\n<h4 id=\"1.1\">Nacos是什么</h4>\n<p>Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。详情可以参考<a href=\"https://nacos.io/zh-cn/docs/what-is-nacos.html\">Nacos官网介绍</a>。</p>\n<h4 id=\"1.2\">Nacos如何支持多环境</h4>\n<p>在日常使用中常常需要不同的环境，比如日常，预发，线上环境，如果是逻辑隔离可以使用命名空间，Nacos支持命名空间来支持多环境隔离，可以在Nacos控制台创建多个命名空间。如果需要物理隔离，就要部署多套Nacos环境。</p>\n<h4 id=\"1.3\">Nacos是否生产可用</h4>\n<p>Nacos在2019.1发布了Pre-GA版本，支持了安全隔离、监控和服务迁移等上生产的最后一公里，以更稳定的支撑用户的生产环境。详情可以参考<a href=\"https://www.oschina.net/news/104019/nacos-0-8-0-pre-ga\">Nacos 发布 v0.8.0 Pre-GA 版本，安全稳定上生产</a>。</p>\n<h4 id=\"1.4\">Nacos版本计划</h4>\n<p>Nacos 0.8.0 开始支持生产可用，1.0版本达到大规模生产可用，2.0版本计划与K8s、Spring Cloud、Service Mesh、Serverless进一步融合，具体的详情参考<a href=\"https://nacos.io/zh-cn/docs/roadmap.html\">Nacos规划</a>。</p>\n<h4 id=\"1.5\">Nacos有什么依赖</h4>\n<p>在单机模式下，Nacos没有任何依赖，在集群模式下，Nacos依赖Mysql做存储，详情可以参考<a href=\"https://nacos.io/zh-cn/docs/deployment.html\">Nacos部署</a>。</p>\n<h4 id=\"1.6\">Nacos使用什么开源协议</h4>\n<p>Nacos使用<a href=\"https://github.com/alibaba/nacos/blob/master/LICENSE\">Apache 2.0</a>。</p>\n<h2>Nacos运维问题</h2>\n<h4 id=\"2.1\">Nacos如何单机部署</h4>\n<p>可以参考Nacos官网部署手册<a href=\"https://nacos.io/zh-cn/docs/quick-start.html\">quick start</a>。</p>\n<h4 id=\"2.2\">Nacos单机部署如何使用mysql</h4>\n<p>Nacos单机模式默认使用内嵌的数据库作为存储引擎，如果想换成自己安装的mysql，可以按照<a href=\"https://nacos.io/zh-cn/docs/deployment.html\">官网文档</a>。</p>\n<h4 id=\"2.3\">生产环境如何部署Nacos</h4>\n<p>生产环境使用Nacos为了达到高可用不能使用单机模式，需要搭建nacos集群，具体详情可以参考<a href=\"https://nacos.io/zh-cn/docs/cluster-mode-quick-start.html\">集群部署手册</a>。</p>\n<h4 id=\"2.4\">Nacos如何Docker部署</h4>\n<p>除了使用压缩包部署Nacos，Nacos也提供了相应的Docker镜像，当Nacos发布新的版本的时候，Nacos会发布对应的镜像版本支持Docker部署。具体详情可以参考<a href=\"https://nacos.io/zh-cn/docs/quick-start-docker.html\">Nacos Docker</a>。</p>\n<h4 id=\"2.5\">如何在k8s中部署Nacos</h4>\n<p>在生产环境部署Nacos集群，如果要对Nacos进行扩容操作，需要手动更改集群ip文件，启动新的Nacos服务。为了能进行自动化运维，Nacos和k8s结合利用StatefulSets提供了自动运维方案，能对Nacos进行动态扩缩容，具体详情参考<a href=\"https://github.com/nacos-group/nacos-k8s/blob/master/README-CN.md\">Kubernetes Nacos</a>。</p>\n<h4 id=\"2.6\">如何监控Nacos</h4>\n<p>Nacos0.8版本提供了Metrics数据暴露能力，能通过Metrics数据的内容对Nacos的运行状态进行监控，详情参考<a href=\"https://nacos.io/zh-cn/docs/monitor-guide.html\">Nacos监控</a>。</p>\n<h2>Nacos使用问题</h2>\n<h4 id=\"3.1\">Zookeeper上的服务可以迁移到Nacos上吗</h4>\n<p>可以通过Nacos-Sync把Zookeeper服务迁移到Nacos，也可以从Nacos迁移到Zookeeper，具体可以参考<a href=\"https://github.com/paderlol/nacos-sync-example\">Nacos Sync 使用</a>。</p>\n<h4 id=\"3.2\">Nacos支持多配置文件</h4>\n<p>Nacos通过Spring Cloud Alibaba Nacos Config支持了多配置文件，可以将配置存储在多个独立的配置文件中。关联的<a href=\"https://github.com/alibaba/nacos/issues/320\">issue</a>，详情参考文档<a href=\"https://github.com/spring-cloud-incubator/spring-cloud-alibaba/wiki/Nacos-config\">Spring Cloud Alibaba Nacos Config</a>。</p>\n<h4 id=\"3.3\">Nacos支持Dubbo</h4>\n<p>Nacos 0.6版本和Dubbo集成，支持使用Nacos作为注册中心，关联<a href=\"https://github.com/alibaba/nacos/issues/390\">issue</a>,具体文档参考<a href=\"https://nacos.io/zh-cn/docs/use-nacos-with-dubbo.html\">Dubbo 融合 Nacos 成为注册中心</a>。</p>\n<h4 id=\"3.4\">Nacos支持Spring体系</h4>\n<p>Nacos完善支持了Sping技术栈，具体可以参考<a href=\"https://nacos.io/zh-cn/docs/quick-start-spring.html\">Nacos Spring</a>、<a href=\"https://nacos.io/zh-cn/docs/quick-start-spring-boot.html\">Nacos Spring Boot</a>、<a href=\"https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html\">Spring Cloud</a>。</p>\n<h4 id=\"3.5\">不使用Nacos SDK如何访问Nacos</h4>\n<p>Nacos的网络交互都是基于Http协议实现的，提供了<a href=\"https://nacos.io/zh-cn/docs/open-api.html\">Open-API</a>可以很容易实现Nacos的访问。</p>\n<h4 id=\"3.6\">Nacos对多语言的支持</h4>\n<p>Nacos目前只支持Java，对于其他语言的支持还正在开发中，需要大家大力支持一起共建。</p>\n<h4 id=\"3.7\">Nacos0.8版本登陆失败</h4>\n<p>Nacos 0.8版本当使用openjdk并且没有<code>JAVA_HOME</code>的环境变量时，nacos可以启动成功，是因为<code>yum install</code>安装的openjdk 会把java命令注册一份到<code>/bin</code>目录下面,所以会引发<code>SignatureException</code>异常。这个问题已经修复，0.9版本会发版，具体详情可以参考<a href=\"https://github.com/alibaba/nacos/issues/711\">issue</a>。</p>\n<h4 id=\"3.8\">服务端报错 java.lang.IllegalStateException: unable to find local peer: 127.0.0.1:8848</h4>\n<p>这个问题是因为Nacos获取本机IP时,没有获取到正确的外部IP.需要保证<code>InetAddress.getLocalHost().getHostAddress()</code>或者<code>hostname -i</code>的结果是与cluster.conf里配置的IP是一致的。</p>\n<h4 id=\"3.9\">Nacos如何对配置进行加密</h4>\n<p>Nacos计划在1.X版本提供加密的能力，目前还不支持加密，只能靠sdk做好了加密再存到nacos中。</p>\n<h4 id=\"3.10\">Nacos报401错误</h4>\n<p>Nacos服务端报错了，可以检查服务端日志，参考<a href=\"https://github.com/alibaba/nacos/issues/816\">issue</a>。</p>\n<h4 id=\"3.11\">Nacos权重不生效</h4>\n<p>Nacos控制台上编辑权重, 目前从SpringCloud客户端和Dubbo客户端都没有打通, 所以不能生效. 对于SpringCloud客户端, 应用可以实现Ribbon的负载均衡器来进行权重过滤。</p>\n<h4 id=\"3.12\">Nacos如何扩缩容</h4>\n<p>目前支持修改cluster.conf文件的方式进行扩缩容, 改完后无需重启, Server会自动刷新到文件新内容。</p>\n<h4 id=\"3.13\">Nacos客户端修改日志级别</h4>\n<p>配置-D参数com.alibaba.nacos.naming.log.level设置naming客户端的日志级别，例如设置为error：\n<code>-Dcom.alibaba.nacos.naming.log.level=error</code>\n同样的，-D参数com.alibaba.nacos.config.log.level用来设置config客户端的日志级别。</p>\n<h4 id=\"3.14\">Nacos与Zipkin 整合出现 Service not found 问题</h4>\n<p>配置<code>spring-cloud-seluth</code>参数：<code>spring.zipkin.discovery-client-enabled=false</code>。</p>\n<p>如果仍然存在<code>Service not found</code>错误，则建议先使用open-api将Zipkin-server注册为永久实例服务：</p>\n<p><code>curl -X POST 'http://127.0.0.1:8848/nacos/v1/ns/instance?port=9411&amp;healthy=true&amp;ip=127.0.0.1&amp;weight=1.0&amp;serviceName=zipkin-server&amp;ephemeral=false&amp;namespaceId=public'</code></p>\n<p>然后，前往nacos控制台，找到服务名为<code>zipkin-server</code>的服务，找到集群配置，设置健康检查模式为<code>TCP</code>，端口号为<code>9411</code>(即zipkin-server的端口)。</p>\n<h4 id=\"3.15\">如何依赖最新的Nacos客户端？</h4>\n很多用户都是通过Spring Cloud Alibaba或者Dubbo依赖的Nacos客户端，那么Spring Cloud Alibaba和Dubbo中依赖的Nacos客户端版本，往往会落后于Nacos最新发布的版本。在一些情况下，用户需要强制将Nacos客户端升级到最新，此时却往往不知道该升级哪个依赖，这里将Spring Cloud Alibaba和Dubbo的依赖升级说明如下：\n<h5>Spring Cloud Alibaba</h5>\n<p>用户通常是配置以下Maven依赖来使用的Nacos：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-comment\">&lt;!--Nacos Discovery--&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.cloud<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[latest version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n<span class=\"hljs-comment\">&lt;!--Nacos Config--&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.cloud<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[latest version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<p>这两个jar包实际上又依赖了以下的jar包：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.nacos<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>nacos-client<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[a particular version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<p>如果nacos-client升级了，对应的spring-cloud客户端版本不一定也同步升级，这个时候可以采用如下的方式强制升级nacos-client（以nacos-discovery为例）：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.cloud<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[latest version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">excludes</span>&gt;</span>\n          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">exclude</span>&gt;</span>\n                 <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.nacos<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n                 <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>nacos-client<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n          <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">exclude</span>&gt;</span>\n     <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">excludes</span>&gt;</span>\n <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.nacos<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>nacos-client<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[latest version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<h5>Dubbo</h5>\n<p>Dubbo也是类似的道理，用户通常引入的是以下的依赖：</p>\n<pre><code class=\"language-xml\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>dubbo-registry-nacos<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[latest version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>   \n    \n    <span class=\"hljs-comment\">&lt;!-- Dubbo dependency --&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>dubbo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[latest version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<p>需要升级Nacos客户端时，只需要如下修改依赖：</p>\n<pre><code class=\"language-xml\"> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba.nacos<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>nacos-client<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>[latest version]<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<h4 id=\"3.16\">客户端CPU高，或者内存耗尽的问题</h4>\n问题的现象是依赖Nacos客户端的应用，在运行一段时间后出现CPU占用率高，内存占用高甚至内存溢出的现象，可以参考issue：[https://github.com/alibaba/nacos/issues/1605](https://github.com/alibaba/nacos/issues/1605)。这种情况首先要做的是分析CPU高或者内存占用高的原因，常用的命令有top、jstack、jmap、jhat等。其中一种情况是Nacos客户端实例在Spring Cloud Alibaba服务框架中被反复构造了多次，可以参考issue：[https://github.com/alibaba/spring-cloud-alibaba/issues/859](https://github.com/alibaba/spring-cloud-alibaba/issues/859)。这个问题已经得到了修复，预期会在下个Spring Cloud Alibaba版本中发布。\n<h4 id=\"3.17\">日志打印频繁的问题</h4>\n在老的Nacos版本中，往往会有大量的无效日志打印，这些日志的打印会迅速占用完用户的磁盘空间，同时也让有效日志难以查找。目前社区反馈的日志频繁打印主要有以下几种情况：\n<ol>\n<li>access日志大量打印，相关issue有：<a href=\"https://github.com/alibaba/nacos/issues/1510\">https://github.com/alibaba/nacos/issues/1510</a>。主要表现是{nacos.home}/logs/access_log.2019-xx-xx.log类似格式文件名的日志大量打印，而且还不能自动清理和滚动。这个日志是Spring Boot提供的tomcat访问日志打印，Spring Boot在关于该日志的选项中，没有最大保留天数或者日志大小控制的选项。因此这个日志的清理必须由应用新建crontab任务来完成，或者通过以下命令关闭日志的输出（在生产环境我们还是建议开启该日志，以便能够有第一现场的访问记录）：</li>\n</ol>\n<pre><code>server.tomcat.accesslog.enabled=false\n</code></pre>\n<ol start=\"2\">\n<li>服务端业务日志大量打印且无法动态调整日志级别。这个问题在1.1.3已经得到优化，可以通过API的方式来进行日志级别的调整，调整日志级别的方式如下：</li>\n</ol>\n<pre><code># 调整naming模块的naming-raft.log的级别为error:\ncurl -X PUT '$nacos_server:8848/nacos/v1/ns/operator/log?logName=naming-raft&amp;logLevel=error'\n# 调整config模块的config-dump.log的级别为warn:\ncurl -X PUT '$nacos_server:8848/nacos/v1/cs/ops/log?logName=config-dump&amp;logLevel=warn'\n</code></pre>\n<ol start=\"3\">\n<li>客户端日志大量打印，主要有心跳日志、轮询日志等。这个问题已经在1.1.3解决，请升级到1.1.3版本。</li>\n</ol>\n<h4 id=\"3.18\">集群管理页面，raft term显示不一致问题</h4>\n在Nacos 1.0.1版本中，Nacos控制台支持了显示当前的集群各个机器的状态信息。这个功能受到比较多用户的关注，其中一个被反馈的问题是列表中每个节点的集群任期不一样。如下图所示（图片信息来自issue：https://github.com/alibaba/nacos/issues/1786）：\n<p><img src=\"https://cdn.nlark.com/yuque/0/2019/png/333810/1567737322959-eed80457-e74c-4adb-bc29-6655860f8ca9.png#align=left&amp;display=inline&amp;height=279&amp;name=image.png&amp;originHeight=558&amp;originWidth=1685&amp;size=45557&amp;status=done&amp;width=842.5\" alt=\"image.png\"></p>\n<p>对于这个任期不一致的问题，原因主要是因为获取这个信息的逻辑有一些问题，没有从对应的节点上获取集群任期。这个问题会在下一个Nacos版本中修复。目前一个手动检查集群任期的办法是在每个节点上执行以下命令：</p>\n<pre><code>curl '127.0.0.1:8848/nacos/v1/ns/raft/state'\n</code></pre>\n<p>然后在返回信息中查找本节点的集群任期。因为每个节点返回的集群任期中，只有当前节点的信息是准确的，返回的其他节点的信息都是不准确的。</p>\n<h4 id=\"3.19\">找不到符号`com.alibaba.nacos.consistency.entity`</h4>\n<p>这个包目录是由<code>protobuf</code>在编译时自动生成，您可以通过<code>mvn compile</code>来自动生成他们。如果您使用的是IDEA，也可以使用IDEA的protobuf插件。</p>\n<h2>Nacos原理问题</h2>\n",
  "link": "\\zh-cn\\docs\\faq.html",
  "meta": {
    "title": "FAQ",
    "keywords": "Nacos,FAQ",
    "description": "Nacos FAQ"
  }
}