<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.X plugin-docs plugin-id-default docs-doc-id-v2/ecology/use-nacos-sync" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">NacosSync user guide | Nacos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" name="twitter:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" property="og:url" content="https://nacos.io/en/docs/1.X/v2/ecology/use-nacos-sync"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.X"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.X"><meta data-rh="true" name="docsearch:version" content="1.X"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.X"><meta data-rh="true" property="og:title" content="NacosSync user guide | Nacos"><meta data-rh="true" name="description" content="NacosSync migration user manual"><meta data-rh="true" property="og:description" content="NacosSync migration user manual"><meta data-rh="true" name="keywords" content="NacosSync,migration,user guide"><link data-rh="true" rel="icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"><link data-rh="true" rel="canonical" href="https://nacos.io/en/docs/1.X/v2/ecology/use-nacos-sync"><link data-rh="true" rel="alternate" href="https://nacos.io/en/docs/1.X/v2/ecology/use-nacos-sync" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://nacos.io/zh-cn/docs/1.X/v2/ecology/use-nacos-sync" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/1.X/v2/ecology/use-nacos-sync" hreflang="default"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/1.X/v2/ecology/use-nacos-sync" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1QV814950M-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Nacos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Nacos Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Nacos" href="/en/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=nacos">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" href="//g.alicdn.com/mamba/mse-arc-ui/0.0.21/umd/mse-arc-ui.min.css">
<script src="//g.alicdn.com/mamba/mse-arc-ui/0.0.21/umd/mse-arc-ui.min.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-0YDFJ7LX7F" async></script><link rel="stylesheet" href="/en/assets/css/styles.9c63a379.css">
<link rel="preload" href="/en/assets/js/runtime~main.e1e562fc.js" as="script">
<link rel="preload" href="/en/assets/js/main.00485327.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script>
<script src="//hm.baidu.com/hm.js?e3a5cec56ef8619cf9d7c2abebd509e3"></script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a href="https://nacos.io/zh-cn/docs/v2/quickstart/quick-start.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"> </a><a class="navbar__item navbar__link" href="/en/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="what-is-nacos" href="/en/docs/1.X/what-is-nacos">1.X</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next/v2/ecology/use-nacos-sync">User Docs</a></li><li><a class="dropdown__link" href="/en/docs/v2/ecology/use-nacos-sync">2.X</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/1.X/v2/ecology/use-nacos-sync">1.X</a></li></ul></div><a class="navbar__item navbar__link" href="/en/cloud">NACOS CLOUD</a><a href="https://developer.aliyun.com/ebook/36?spm=a2c6h.20345107.ebook-index.18.152c2984fsi5ST" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">E-BOOK-NACOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/en/blog">BLOG</a><a class="navbar__item navbar__link" href="/en/community">COMMUNITY</a><a href="http://console.nacos.io/nacos/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DEMO-CONSOLE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>En</a><ul class="dropdown__menu"><li><a href="/en/docs/1.X/v2/ecology/use-nacos-sync" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">En</a></li><li><a href="/zh-cn/docs/1.X/v2/ecology/use-nacos-sync" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Nacos<!-- --> <b>1.X</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/en/docs/v2/ecology/use-nacos-sync">latest version</a></b> (<!-- -->2.X<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 1.X</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>NacosSync migration user guide</h1><h1>Guide purposes</h1><ul><li>Understand NacosSync service</li><li>Start NacosSync service</li><li>By a simple example, demonstrates how to register to the Zookeeper Dubbo client migrated to Nacos.</li></ul><h1>Introduce</h1><ul><li>NacosSync is a support for a variety of registry of synchronous components,based on the Spring boot development framework,Data layer uses the Spring Data JPA,follow the standard JPA access codes,support for multiple data storage,Default to Hibernate implementation, support table created automatically update more conveniently.</li><li>Using efficient event driven asynchronous model, support a variety of custom events, make the synchronization task processing time delay control in 3s, 8C16G stand-alone can support 6 k synchronization tasks.</li><li>NacosSync in addition to the standalone deployment, but also provides high availability cluster deployment patterns, NacosSync is stateless design, such as task status data migration to the database, the cluster expansion is very convenient.</li><li>Abstraction is out of Sync core component interface, through annotations to distinguish synchronous type, allowing developers to easily according to their own needs, different registry to expand, has now supports synchronous type:<ul><li>Nacos to Nacos data synchronization</li><li>Zookeeper to Nacos data synchronization</li><li>Nacos to the Zookeeper data synchronization </li><li>Eureka to Nacos data synchronization</li><li>Consul to Nacos data synchronization<a name="d384971e"></a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-module-architecture">System module architecture:<a href="#system-module-architecture" class="hash-link" aria-label="Direct link to System module architecture:" title="Direct link to System module architecture:">​</a></h2><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB12VPaJVzqK1RjSZSgXXcpAVXa-886-752.png" alt="image.png" class="img_ev3q"><br>The console<br>Provides concise Web console operation, support for internationalization.<br></p><a name="b3408d06"></a>### Synchronization task management page ![](https://img.alicdn.com/tfs/TB1eSYyJ5LaK1RjSZFxXXamPFXa-2866-1064.png)<a name="091bc34b"></a>### Registry management page<a name="53fdb015"></a>## ![image.png](https://img.alicdn.com/tfs/TB1e_rdJ7voK1RjSZFNXXcxMVXa-2876-1124.png)<a name="f6a633db"></a>## Usage scenarios: * Multiple network communication between the Region of Shared services, break the service call restriction of the Region.<p><img loading="lazy" src="https://img.alicdn.com/tfs/TB1Mo6yJ4jaK1RjSZKzXXXVwXXa-1136-798.png" alt="image.png" class="img_ev3q"></p><ul><li>Two-way synchronization function, support Dubbo + Zookeeper service smooth migration to Dubbo + Naocs, enjoy Nacos more high quality service.</li></ul><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB1Dza8J9zqK1RjSZPxXXc4tVXa-1728-838.png" alt="image.png" class="img_ev3q"></p><h1>Usage</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparatory-work">Preparatory work<a href="#preparatory-work" class="hash-link" aria-label="Direct link to Preparatory work" title="Direct link to Preparatory work">​</a></h2><p>Before you start the service, you need to install the following services:</p><ul><li>64bit OS: Linux/Unix/Mac/Windows supported, Linux/Unix/Mac recommended.</li><li>64bit JDK 1.8+: <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener noreferrer">downloads</a>, <a href="https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/" target="_blank" rel="noopener noreferrer">JAVA_HOME settings</a>.</li><li>Maven 3.2.x+: <a href="https://maven.apache.org/download.cgi" target="_blank" rel="noopener noreferrer">downloads</a>, <a href="https://maven.apache.org/settings.html" target="_blank" rel="noopener noreferrer">settings</a>.</li><li>MySql 5.6.+</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-installation-package">Get the installation package<a href="#get-the-installation-package" class="hash-link" aria-label="Direct link to Get the installation package" title="Direct link to Get the installation package">​</a></h2><p>There are two ways to obtain NacosSync installation package:</p><ul><li>Direct download NacosSync binary installation package:<a href="https://github.com/nacos-group/nacos-sync/releases" target="_blank" rel="noopener noreferrer">nacosSync.${version}.zip</a></li><li>Download NacosSync source to build from the Github</li></ul><p>Package:</p><div class="language-basic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-basic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd nacosSync/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean package -U</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The path of the target file:</p><div class="language-basic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-basic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nacos-sync/nacossync-distribution/target/nacosSync.${version}.zip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Unpack the installation package, project file directory structure:</p><div class="language-basic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-basic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nacosSync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── LICENSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── NOTICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── nacosSync.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── shutdown.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── startup.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── application.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── logback-spring.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── nacosSync-server.${version}.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="initialize-the-database">Initialize the database<a href="#initialize-the-database" class="hash-link" aria-label="Direct link to Initialize the database" title="Direct link to Initialize the database">​</a></h2><p>The system default configuration database is Mysql, can also support other relational database.
1.The database construction, the default database name for &quot;nacos_Sync&quot;.
2.The database table don&#x27;t need to create separately, using the hibernate automatically by default build table function.
3.If you do not support automatic table, you can use the system&#x27;s own build table SQL script, the script in the bin directory.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="database-configuration">Database configuration<a href="#database-configuration" class="hash-link" aria-label="Direct link to Database configuration" title="Direct link to Database configuration">​</a></h2><p>Database configuration file on <code>conf/application.properties</code>:</p><div class="language-basic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-basic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=jdbc:mysql://127.0.0.1:3306/nacos_sync?characterEncoding=utf8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.username=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.password=root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="start-server">Start server<a href="#start-server" class="hash-link" aria-label="Direct link to Start server" title="Direct link to Start server">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ nacosSync/bin:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> startup.sh  restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="check-system-status">Check system status<a href="#check-system-status" class="hash-link" aria-label="Direct link to Check system status" title="Direct link to Check system status">​</a></h2><p>1.Check system log</p><p>The path of the log in <code>nacosSync/logs/nacosSync.log</code>, check whether there are abnormal information.</p><p>2.Check system port</p><p>Port is the default system <code>8081</code>, you can define your own <code>application.properties</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$netstat</span><span class="token plain"> -ano</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8081</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8081                </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:*                   LISTEN      off </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain">/0/0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="console">Console<a href="#console" class="hash-link" aria-label="Direct link to Console" title="Direct link to Console">​</a></h2><p>Access path:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://127.0.0.1:8081/#/serviceSync</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB1EKbkJ3HqK1RjSZFEXXcGMXXa-2866-606.png" alt="image.png" class="img_ev3q"></p><p>If there is no problem, check NacosSync has begun, normal NacosSync deployment structure:<img loading="lazy" src="https://img.alicdn.com/tfs/TB107nfJ9zqK1RjSZFjXXblCFXa-1412-342.png" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="starting-migration">Starting migration<a href="#starting-migration" class="hash-link" aria-label="Direct link to Starting migration" title="Direct link to Starting migration">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-information">Migration information<a href="#migration-information" class="hash-link" aria-label="Direct link to Migration information" title="Direct link to Migration information">​</a></h3><p>Dubbo service deployment information:<img loading="lazy" src="https://img.alicdn.com/tfs/TB1Ci_eJ4TpK1RjSZR0XXbEwXXa-938-700.png" alt="image.png" class="img_ev3q"></p><p>The migration of services:</p><table><thead><tr><th>Service Name</th><th>Version</th><th>Group Name</th></tr></thead><tbody><tr><td>com.alibaba.nacos.api.DemoService</td><td>1.0.0</td><td>zk</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-registry-cluster-information">Add the registry cluster information<a href="#add-the-registry-cluster-information" class="hash-link" aria-label="Direct link to Add the registry cluster information" title="Direct link to Add the registry cluster information">​</a></h3><p>1.Click on the &quot;cluster configuration&quot; button in the left navigation bar, a new cluster, first add a Zookeeper cluster, select the cluster type for ZK.
<img loading="lazy" src="https://img.alicdn.com/tfs/TB1oJDnJ7voK1RjSZFwXXciCFXa-2870-1130.png" alt="image.png" class="img_ev3q"></p><blockquote><p>Note: the cluster name can customize, but once confirmed, cannot be modified, otherwise increase task based on the cluster, after NacosSync restart, success will not resume.</p></blockquote><p>2.The same steps, increase Nacos cluster.
<img loading="lazy" src="https://img.alicdn.com/tfs/TB1HQPhJVzqK1RjSZFCXXbbxVXa-2846-1042.png" alt="image.png" class="img_ev3q"></p><p>3.After the completion of the add, can inquire on the list:
<img loading="lazy" src="https://img.alicdn.com/tfs/TB1AX6fJVYqK1RjSZLeXXbXppXa-2864-824.png" alt="image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-synchronization-task">Add the synchronization task<a href="#add-the-synchronization-task" class="hash-link" aria-label="Direct link to Add the synchronization task" title="Direct link to Add the synchronization task">​</a></h3><ol><li>Add a sync task, from Zookeeper cluster synchronization to Nacos cluster, synchronous granularity is service, it is called a Zookeeper cluster source cluster, Nacos cluster called target cluster.
<img loading="lazy" src="https://img.alicdn.com/tfs/TB1tF_fJVYqK1RjSZLeXXbXppXa-2838-1138.png" alt="imagesd.png" class="img_ev3q"></li></ol><p>Add finished, can be in service sync list, view has add synchronization task:
<img loading="lazy" src="https://img.alicdn.com/tfs/TB1l6uJJ9zqK1RjSZPcXXbTepXa-2824-570.png" alt="image.png" class="img_ev3q"></p><ol start="2"><li><p>The synchronization is completed, check whether the data synchronization to success Nacos cluster, can query through the Nacos console.
<img loading="lazy" src="https://img.alicdn.com/tfs/TB1tPneJ4TpK1RjSZR0XXbEwXXa-2872-828.png" alt="image.png" class="img_ev3q"></p></li><li><p>At the moment, the data has been successfully from Zookeeper cluster synchronization to Nacos cluster, the deployment structure is as follows:
<img loading="lazy" src="https://img.alicdn.com/tfs/TB14kriJ6TpK1RjSZKPXXa3UpXa-1724-772.png" alt="image.png" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo-clients-to-connect-to-nacos-registry">Dubbo clients to connect to Nacos registry<a href="#dubbo-clients-to-connect-to-nacos-registry" class="hash-link" aria-label="Direct link to Dubbo clients to connect to Nacos registry" title="Direct link to Dubbo clients to connect to Nacos registry">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo-consumer-client-migration">Dubbo Consumer client migration<a href="#dubbo-consumer-client-migration" class="hash-link" aria-label="Direct link to Dubbo Consumer client migration" title="Direct link to Dubbo Consumer client migration">​</a></h4><p>Dubbo has supported Nacos registry, support version 2.5 +, need to add a Nacos registry of Dubbo extensions depends on:</p><div class="language-basic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-basic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;artifactId&gt;dubbo-registry-nacos&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;version&gt;0.0.2&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Increase Nacos client depends on:</p><div class="language-basic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-basic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;version&gt;0.6.2&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Configuration Dubbo Consumer Dubbo profile <code>Consumer. The yaml</code>, let the client can find Nacos cluster.</p><div class="language-basic codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-basic codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  application:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: dubbo-consumer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">demo:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  service:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version: 1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    group: zk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dubbo:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  registry:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address: nacos://127.0.0.1:8848</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Don&#x27;t need to modify the code, configuration after the update, you can restart your application into law.</p><p>Consumer release is completed, the deployment of the structure is as follows:
<img loading="lazy" src="https://img.alicdn.com/tfs/TB181fkJ3HqK1RjSZFEXXcGMXXa-1734-878.png" alt="image.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo-provider-migration">Dubbo Provider migration<a href="#dubbo-provider-migration" class="hash-link" aria-label="Direct link to Dubbo Provider migration" title="Direct link to Dubbo Provider migration">​</a></h4><p>Before you upgrade the Provider, you need to ensure that the Provider of services, are already configured in NacosSync, synchronous way from Nacos synchronization to Zookeeper, because the Provider connected to Nacos upgrade, you need to make sure that the old Dubbo Consumer client can subscribe to the Provider&#x27;s address in the Zookeeper, now, we add a sync task:
<img loading="lazy" src="https://img.alicdn.com/tfs/TB1pdDnJ7voK1RjSZFwXXciCFXa-2872-1060.png" alt="image.png" class="img_ev3q"></p><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB19Ey_J6DpK1RjSZFrXXa78VXa-2842-660.png" alt="image.png" class="img_ev3q"></p><blockquote><p>Note: Nacos synchronization to the Zookeeper service, do not need to fill in the version number, you in choosing the source cluster, the version number of the input box automatically hidden.</p></blockquote><p>Sync task is completed, you can upgrade the Provider, upgrade the Provider method, reference to upgrade the Consumer steps.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-deployment-structure">New deployment structure<a href="#new-deployment-structure" class="hash-link" aria-label="Direct link to New deployment structure" title="Direct link to New deployment structure">​</a></h3><ul><li>In the process of upgrading, there will be new and old versions of the client at the same time, the deployment structure is as follows:</li></ul><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB14Y_iJ3HqK1RjSZFPXXcwapXa-1728-838.png" alt="image.png" class="img_ev3q"></p><ul><li>All client migration is completed, the deployment structure is as follows:</li></ul><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB1Cg2dJYvpK1RjSZPiXXbmwXXa-1466-864.png" alt="image.png" class="img_ev3q"></p><p>Now, the Zookeeper cluster, NacosSync cluster can get offline.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="attention">Attention<a href="#attention" class="hash-link" aria-label="Direct link to Attention" title="Direct link to Attention">​</a></h3><ul><li>Synchronization task after adding, you need to ensure that the service is successful sync to the target cluster, can through the console the target cluster.</li><li>NacosSync support high availability cluster pattern deployment, you only need to put the database can be configured to the same.</li><li>Comb if not clear subscription and published service, suggested can do services are two-way synchronous.</li><li>Dubbo client currently does not support Nacos weighting function, if you are using the weight function, need to reconsider the plan.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#system-module-architecture" class="table-of-contents__link toc-highlight">System module architecture:</a></li><li><a href="#preparatory-work" class="table-of-contents__link toc-highlight">Preparatory work</a></li><li><a href="#get-the-installation-package" class="table-of-contents__link toc-highlight">Get the installation package</a></li><li><a href="#initialize-the-database" class="table-of-contents__link toc-highlight">Initialize the database</a></li><li><a href="#database-configuration" class="table-of-contents__link toc-highlight">Database configuration</a></li><li><a href="#start-server" class="table-of-contents__link toc-highlight">Start server</a></li><li><a href="#check-system-status" class="table-of-contents__link toc-highlight">Check system status</a></li><li><a href="#console" class="table-of-contents__link toc-highlight">Console</a></li><li><a href="#starting-migration" class="table-of-contents__link toc-highlight">Starting migration</a><ul><li><a href="#migration-information" class="table-of-contents__link toc-highlight">Migration information</a></li><li><a href="#add-the-registry-cluster-information" class="table-of-contents__link toc-highlight">Add the registry cluster information</a></li><li><a href="#add-the-synchronization-task" class="table-of-contents__link toc-highlight">Add the synchronization task</a></li><li><a href="#dubbo-clients-to-connect-to-nacos-registry" class="table-of-contents__link toc-highlight">Dubbo clients to connect to Nacos registry</a></li><li><a href="#new-deployment-structure" class="table-of-contents__link toc-highlight">New deployment structure</a></li><li><a href="#attention" class="table-of-contents__link toc-highlight">Attention</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/en/assets/js/runtime~main.e1e562fc.js"></script>
<script src="/en/assets/js/main.00485327.js"></script>
</body>
</html>