<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.X plugin-docs plugin-id-default docs-doc-id-v2/plugin/config-change-plugin" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Config Change Plugin | Nacos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" name="twitter:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" property="og:url" content="https://nacos.io/en/docs/v2/plugin/config-change-plugin"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.X"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.X"><meta data-rh="true" name="docsearch:version" content="2.X"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.X"><meta data-rh="true" property="og:title" content="Config Change Plugin | Nacos"><meta data-rh="true" name="description" content="Nacos support Config Change Plugin."><meta data-rh="true" property="og:description" content="Nacos support Config Change Plugin."><meta data-rh="true" name="keywords" content="Config Change,Config audit,Config format check,webhook"><link data-rh="true" rel="icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"><link data-rh="true" rel="canonical" href="https://nacos.io/en/docs/v2/plugin/config-change-plugin"><link data-rh="true" rel="alternate" href="https://nacos.io/en/docs/v2/plugin/config-change-plugin" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://nacos.io/zh-cn/docs/v2/plugin/config-change-plugin" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/v2/plugin/config-change-plugin" hreflang="default"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/v2/plugin/config-change-plugin" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1QV814950M-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Nacos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Nacos Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Nacos" href="/en/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=nacos">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" href="//dev.g.alicdn.com/mamba/mse-arc-ui/0.0.20/umd/mse-arc-ui.min.css">
<script src="//dev.g.alicdn.com/mamba/mse-arc-ui/0.0.20/umd/mse-arc-ui.min.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-0YDFJ7LX7F" async></script><link rel="stylesheet" href="/en/assets/css/styles.ada177ca.css">
<link rel="preload" href="/en/assets/js/runtime~main.36a3cedb.js" as="script">
<link rel="preload" href="/en/assets/js/main.ed1d33c2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script>
<script src="//hm.baidu.com/hm.js?e3a5cec56ef8619cf9d7c2abebd509e3"></script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/en/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/what-is-nacos" href="/en/docs/v2/what-is-nacos">2.X</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next/v2/plugin/config-change-plugin">User Docs</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/v2/plugin/config-change-plugin">2.X</a></li><li><a class="dropdown__link" href="/en/docs/1.X/v2/what-is-nacos">1.X</a></li></ul></div><a class="navbar__item navbar__link" href="/en/cloud">NACOS CLOUD</a><a href="https://developer.aliyun.com/ebook/36?spm=a2c6h.20345107.ebook-index.18.152c2984fsi5ST" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">E-BOOK-NACOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/en/blog">BLOG</a><a class="navbar__item navbar__link" href="/en/community">COMMUNITY</a><a href="http://console.nacos.io/nacos/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DEMO-CONSOLE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>En</a><ul class="dropdown__menu"><li><a href="/en/docs/v2/plugin/config-change-plugin" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">En</a></li><li><a href="/zh-cn/docs/v2/plugin/config-change-plugin" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 2.X</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Config Change Plugin</h1></header><blockquote><p>Translated by AI.</p><h1>Config Change Plugin</h1></blockquote><p>Community has long been hoping for Nacos Configuration Center to provide notifications to specific systems when configurations change. These notifications are used for recording, warning, and auditing purposes. Before version 2.3.0, the only way to achieve this was by simulating Nacos client subscription to the configurations. This approach involved subscribing to changes in core configurations and executing functionalities such as sending records and warnings upon receiving change notifications.</p><p>However, this implementation had a few significant issues. Firstly, individual configurations needed to be added one by one, making it difficult to capture all configuration changes. Secondly, functionalities could only be executed after configuration changes, and there was no capability for performing pre-change operations such as format validation or whitelist validation.</p><p>To address these limitations, starting from Nacos version 2.3.0, Nacos introduced support for injecting configuration change plugins through the <a href="https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html" target="_blank" rel="noopener noreferrer">SPI</a>. This allows users to define custom plugins to execute specific logic before and after configuration changes. Examples of such logic include format validation, whitelist validation, and webhook integrations.</p><p>These enhancements provide more flexibility and control for users to implement their own custom logic before and after configuration changes in Nacos Configuration Center.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts-in-config-change-plugin">Concepts in Config Change Plugin<a href="#concepts-in-config-change-plugin" class="hash-link" aria-label="Direct link to Concepts in Config Change Plugin" title="Direct link to Concepts in Config Change Plugin">​</a></h2><p>Nacos&#x27;s configuration change plugin design takes inspiration from the aspect-oriented programming (AOP) paradigm. It treats configuration change operations, such as adding, updating, and deleting, as the <code>pointcuts</code> and weaves the plugins <code>before</code> and <code>after</code> these pointcuts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configchangepointcuttypes">ConfigChangePointCutTypes<a href="#configchangepointcuttypes" class="hash-link" aria-label="Direct link to ConfigChangePointCutTypes" title="Direct link to ConfigChangePointCutTypes">​</a></h3><p>Nacos has categorized the configuration change operations based on their behaviors and sources. These configuration change operations are defined as several <code>ConfigChangePointCutTypes</code> in <code>com.alibaba.nacos.plugin.config.constants.ConfigChangePointCutTypes</code>. The specific details are as follows:</p><table><thead><tr><th>PointCut Name</th><th>Description</th><th>Start version</th></tr></thead><tbody><tr><td>PUBLISH_BY_HTTP</td><td>Configuration is published through the HTTP interface, including creating and modifying configurations.</td><td>2.3.0</td></tr><tr><td>PUBLISH_BY_RPC</td><td>Configuration is published through the gRPC interface, including creating and modifying configurations.</td><td>2.3.0</td></tr><tr><td>REMOVE_BY_HTTP</td><td>Configuration is removed through the HTTP interface.</td><td>2.3.0</td></tr><tr><td>REMOVE_BY_RPC</td><td>Configuration is removed through the gRPC interface.</td><td>2.3.0</td></tr><tr><td>IMPORT_BY_HTTP</td><td>Configuration is imported through the HTTP interface.</td><td>2.3.0</td></tr><tr><td>REMOVE_BATCH_HTTP</td><td>Configurations are batch removed through the HTTP interface.</td><td>2.3.0</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configchangeexecutetypes">ConfigChangeExecuteTypes<a href="#configchangeexecutetypes" class="hash-link" aria-label="Direct link to ConfigChangeExecuteTypes" title="Direct link to ConfigChangeExecuteTypes">​</a></h3><p>In Nacos, the configuration change plugins need to be executed before or after the <code>ConfigChangePointCutTypes</code> by selecting the <code>ConfigChangeExecuteTypes</code>. These execution types are defined in <code>com.alibaba.nacos.plugin.config.constants.ConfigChangeExecuteTypes</code>. The specific details are as follows:</p><table><thead><tr><th>Execute Type</th><th>Description</th><th>Start version</th></tr></thead><tbody><tr><td>EXECUTE_BEFORE_TYPE</td><td>Plugin execute <strong>Before</strong> <code>ConfigChangePointCutTypes</code></td><td>2.3.0</td></tr><tr><td>EXECUTE_AFTER_TYPE</td><td>Plugin execute <strong>After</strong> <code>ConfigChangePointCutTypes</code></td><td>2.3.0</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-development">Plugin Development<a href="#plugin-development" class="hash-link" aria-label="Direct link to Plugin Development" title="Direct link to Plugin Development">​</a></h2><p>To develop a config change plugin for the Nacos server, you first need to depend on the relevant API of the config change plugin.</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.alibaba.nacos</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nacos-config-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${project.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>${project.version}</code> is the Nacos version, at least <code>2.3.0</code>.</p><p>Then implement <code>com.alibaba.nacos.plugin.config.spi.ConfigChangePluginService</code> interface, which include following method:</p><table><thead><tr><th>Method name</th><th>Parameters</th><th>Return</th><th>Description</th></tr></thead><tbody><tr><td>getServiceType</td><td>void</td><td>String</td><td>Returns the name of the plugin, which is used to differentiate between different types of plugin implementations.</td></tr><tr><td>getOrder</td><td>void</td><td>int</td><td>Returns the execution order of the plugin. The configuration change plugin is designed with a chain plugin pattern, where multiple plugins are executed in order. The smaller the return value of getOrder, the earlier the plugin is executed.</td></tr><tr><td>executeType</td><td>void</td><td>ConfigChangeExecuteTypes</td><td>Returns <code>ConfigChangeExecuteTypes</code> implemented by the plugin.</td></tr><tr><td>pointcutMethodNames</td><td>void</td><td>ConfigChangePointCutTypes[]</td><td>Returns <code>ConfigChangePointCutTypes</code> where the plugin is implemented.</td></tr><tr><td>execute</td><td>ConfigChangeRequest,ConfigChangeResponse</td><td>void</td><td>Executes the actual logic of the plugin.</td></tr></tbody></table><p><code>ConfigChangeRequest</code> and <code>ConfigChangeResponse</code> refer to the contents passed in during the execution of logic and the resulting execution outcome, respectively.</p><p><code>ConfigChangeRequest</code> mainly include follow contents:</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>requestType</td><td>ConfigChangePointCutTypes</td><td>The pointcut types of this configuration change</td></tr><tr><td>requestArgs</td><td>HashMap&lt;String, Object&gt;</td><td>The actual parameters of this configuration change, mainly including <code>namespace</code>, <code>group</code>, <code>dataId</code>, <code>content</code>, etc., with different parameters for different pointcut types</td></tr></tbody></table><p><code>ConfigChangeResponse</code> mainly include follow contents:</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>responseType</td><td>ConfigChangePointCutTypes</td><td>The pointcut types of this configuration change</td></tr><tr><td>isSuccess</td><td>boolean</td><td>Indicates whether the execution is successful. When the return value is <code>false</code>, the configuration change will be intercepted and the failure result will be returned directly</td></tr><tr><td>retVal</td><td>Object</td><td>Return content, a reserved field that is currently not used</td></tr><tr><td>msg</td><td>String</td><td>Execution result information, obtained when <code>isSuccess</code> is <code>false</code>, used to return information to the client</td></tr><tr><td>args</td><td>Object[]</td><td>The execution parameters of the configuration change, effective for the <code>EXECUTE_BEFORE_TYPE</code> plugin type. It can be used to modify the content of the actual executed configuration change, such as changing certain values in content to other values</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="load-plugin">Load Plugin<a href="#load-plugin" class="hash-link" aria-label="Direct link to Load Plugin" title="Direct link to Load Plugin">​</a></h3><p>After the plugin finished, it needs to be packaged into jar/zip and places in the classpath of the nacos server. If you don&#x27;t know how to add plugins into the classpath, please place plugins under <code>${nacos-server.path}/plugins</code> directly.</p><p>After Adding plugins into classpath, also need to modify some configuration in <code>${nacos-server.path}/conf/application.properties</code>.</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### The name of the config change plugin enabled in Nacos, corresponding to the return value of com.alibaba.nacos.plugin.config.spi.ConfigChangePluginService&#x27;s getServiceType method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nacos.core.config.plugin.${configChangePluginName}.enabled=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After restarting the Nacos cluster and completing the startup, you can see the following logs in <code>${nacos-server.path}/logs/plugin-control.log</code>:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[ConfigChangePluginManager] Load ${className}(${classFullName}) ConfigChangeServiceName(${configChangePluginName}) successfully.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-plugin-properties">Custom Plugin properties<a href="#custom-plugin-properties" class="hash-link" aria-label="Direct link to Custom Plugin properties" title="Direct link to Custom Plugin properties">​</a></h3><p>Some plugins may want to set certain parameters through a configuration file. Custom plugins can modify the following configurations in <code>${nacos-server.path}/conf/application.properties</code> to achieve this:</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### The name of the config change plugin enabled in Nacos, corresponding to the return value of com.alibaba.nacos.plugin.config.spi.ConfigChangePluginService&#x27;s getServiceType method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nacos.core.config.plugin.${configChangePluginName}.${propertyKey}=${propertyValue}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In <code>ConfigChangeRequest</code>, getting properties by following way:</p><div class="language-Java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">final Properties properties = (Properties) configChangeRequest.getArg(ConfigChangeConstants.PLUGIN_PROPERTIES);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">final String ${propertyKey} = properties.getProperty(&quot;${propertyKey}&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-demo">Plugin Demo<a href="#plugin-demo" class="hash-link" aria-label="Direct link to Plugin Demo" title="Direct link to Plugin Demo">​</a></h2><p>In the <a href="https://github.com/nacos-group/nacos-plugin" target="_blank" rel="noopener noreferrer">nacos-group/nacos-plugin</a> repository, there is a demo implementation of a configuration change plugin. This demo plugin implements validation of the configuration content format, validation of the whitelist for importing configuration names, and a webhook callback after the change. To use this plugin, you need to package it as a JAR/ZIP file and place it in the classpath of the Nacos server. Additionally, add the following configuration in <code>${nacos-server.path}/conf/application.properties</code>:</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># webhook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#nacos.core.config.plugin.webhook.enabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># It is recommended to use EB https://help.aliyun.com/document_detail/413974.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#nacos.core.config.plugin.webhook.url=http://${webhookIp}:${webhookPort}/${webhookUri}?token=***</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The content push max capacity ,byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#nacos.core.config.plugin.webhook.contentMaxCapacity=102400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># whitelist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#nacos.core.config.plugin.whitelist.enabled=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The import file suffixs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#nacos.core.config.plugin.whitelist.suffixs=xml,text,properties,yaml,html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># fileformatcheck,which validate the import file of type and content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#nacos.core.config.plugin.fileformatcheck.enabled=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concepts-in-config-change-plugin" class="table-of-contents__link toc-highlight">Concepts in Config Change Plugin</a><ul><li><a href="#configchangepointcuttypes" class="table-of-contents__link toc-highlight">ConfigChangePointCutTypes</a></li><li><a href="#configchangeexecutetypes" class="table-of-contents__link toc-highlight">ConfigChangeExecuteTypes</a></li></ul></li><li><a href="#plugin-development" class="table-of-contents__link toc-highlight">Plugin Development</a><ul><li><a href="#load-plugin" class="table-of-contents__link toc-highlight">Load Plugin</a></li><li><a href="#custom-plugin-properties" class="table-of-contents__link toc-highlight">Custom Plugin properties</a></li></ul></li><li><a href="#plugin-demo" class="table-of-contents__link toc-highlight">Plugin Demo</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/en/assets/js/runtime~main.36a3cedb.js"></script>
<script src="/en/assets/js/main.ed1d33c2.js"></script>
</body>
</html>