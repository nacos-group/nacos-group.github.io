<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.X plugin-docs plugin-id-default docs-doc-id-v2/ecology/use-nacos-with-spring" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Nacos with Spring Projects | Nacos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" name="twitter:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" property="og:url" content="https://nacos.io/en/docs/v2/ecology/use-nacos-with-spring"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.X"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.X"><meta data-rh="true" name="docsearch:version" content="2.X"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.X"><meta data-rh="true" property="og:title" content="Nacos with Spring Projects | Nacos"><meta data-rh="true" name="description" content="This quick start introduces how to enable Nacos configuration management and service discovery features for your Spring project."><meta data-rh="true" property="og:description" content="This quick start introduces how to enable Nacos configuration management and service discovery features for your Spring project."><meta data-rh="true" name="keywords" content="Nacos,Spring,quick start"><link data-rh="true" rel="icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"><link data-rh="true" rel="canonical" href="https://nacos.io/en/docs/v2/ecology/use-nacos-with-spring"><link data-rh="true" rel="alternate" href="https://nacos.io/en/docs/v2/ecology/use-nacos-with-spring" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://nacos.io/zh-cn/docs/v2/ecology/use-nacos-with-spring" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/v2/ecology/use-nacos-with-spring" hreflang="default"><link data-rh="true" rel="alternate" href="https://nacos.io/docs/v2/ecology/use-nacos-with-spring" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1QV814950M-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Nacos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Nacos Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Nacos" href="/en/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=nacos">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" href="//dev.g.alicdn.com/mamba/mse-arc-ui/0.0.20/umd/mse-arc-ui.min.css">
<script src="//dev.g.alicdn.com/mamba/mse-arc-ui/0.0.20/umd/mse-arc-ui.min.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-0YDFJ7LX7F" async></script><link rel="stylesheet" href="/en/assets/css/styles.ada177ca.css">
<link rel="preload" href="/en/assets/js/runtime~main.a1551189.js" as="script">
<link rel="preload" href="/en/assets/js/main.a43f0e65.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script>
<script src="//hm.baidu.com/hm.js?e3a5cec56ef8619cf9d7c2abebd509e3"></script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/en/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/what-is-nacos" href="/en/docs/v2/what-is-nacos">2.X</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next/v2/ecology/use-nacos-with-spring">User Docs</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/v2/ecology/use-nacos-with-spring">2.X</a></li><li><a class="dropdown__link" href="/en/docs/1.X/v2/ecology/use-nacos-with-spring">1.X</a></li></ul></div><a class="navbar__item navbar__link" href="/en/cloud">NACOS CLOUD</a><a href="https://developer.aliyun.com/ebook/36?spm=a2c6h.20345107.ebook-index.18.152c2984fsi5ST" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">E-BOOK-NACOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/en/blog">BLOG</a><a class="navbar__item navbar__link" href="/en/community">COMMUNITY</a><a href="http://console.nacos.io/nacos/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DEMO-CONSOLE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>En</a><ul class="dropdown__menu"><li><a href="/en/docs/v2/ecology/use-nacos-with-spring" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">En</a></li><li><a href="/zh-cn/docs/v2/ecology/use-nacos-with-spring" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Nacos</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/what-is-nacos">What is Nacos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/concepts">Nacos Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/architecture">Nacos architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Quick Start</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/quickstart/quick-start">Quick Start for Nacos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/quickstart/quick-start-docker">Quick Start for Nacos Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/quickstart/quick-start-kubernetes">Kubernetes Nacos</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Upgrading</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/upgrading/2.0.0-compatibility">Nacos 2.0.0 compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/upgrading/2.0.0-upgrading">Nacos 2.0 升级文档</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Plugin</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/auth-plugin">Authorization Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/config-encryption-plugin">CONFIGURE ENCRYPTION</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/datasource-plugin">多数据源</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/trace-plugin">Tracing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/plugin/custom-environment-plugin">CustomEnvironment</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">User Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/sdk">Java SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/other-language">Other languages SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/open-api">Open API Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/auth">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/user/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Admin Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/deployment">Nacos supports three types of deployment modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/cluster-mode-quick-start">Cluster deployment instructions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/system-configurations">Nacos system parameters introduce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/management-api">Management API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/console-guide">Console Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/monitor-guide">Nacos monitor guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/nacos2-config-benchmark">Nacos2.0服务配置性能测试报告</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/guide/admin/nacos2-naming-benchmark">Nacos2.0服务发现性能测试报告</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-sync">NacosSync user guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Ecology</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-dubbo">Nacos with Dubbo fusion become registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-spring">Nacos with Spring Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-spring-boot">Nacos with Spring Boot Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-spring-cloud">Nacos with Spring Cloud Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-sync">NacosSync user guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/ecology/use-nacos-with-coredns">Nacos push domain with CoreDNS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Contributor Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/contributing">How to Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/contributing-flow">Contributing Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/pull-request">Pull request template</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/contribution/how-to-reporting-bugs">How to report bugs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Community</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/community/">Community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/v2/community/nacos-dev">Developers</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Ecology</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Nacos with Spring Projects</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.X</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Nacos with Spring Projects</h1><p>This quick start introduces how to enable Nacos configuration management and service discovery features for your Spring project.</p><p>For more details about Nacos Spring Boot: <a href="https://github.com/nacos-group/nacos-spring-project/wiki/Nacos-Spring-Project-0.3.1-%E6%96%B0%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C" target="_blank" rel="noopener noreferrer">nacos-spring-project</a>.</p><p>The quick start includes two samples:</p><ul><li>How to enable Nacos server and Nacos Spring configuration modules to implement dynamic configuration management;</li><li>How to enable Nacos server and Nacos Spring service discovery modules to implement service registration and discovery.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisite">Prerequisite<a href="#prerequisite" class="hash-link" aria-label="Direct link to Prerequisite" title="Direct link to Prerequisite">​</a></h2><p>Follow instructions in <a href="/en/docs/v2/quickstart/quick-start">Nacos Quick Start</a> to download Nacos and start the Nacos server.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-configuration-service">Enable Configuration Service<a href="#enable-configuration-service" class="hash-link" aria-label="Direct link to Enable Configuration Service" title="Direct link to Enable Configuration Service">​</a></h2><p>Once you start the Nacos server, you can follow the steps below to enable the Nacos configuration management service for your Spring project. </p><p>Sample project: <a href="https://github.com/nacos-group/nacos-examples/tree/master/nacos-spring-example/nacos-spring-config-example" target="_blank" rel="noopener noreferrer">nacos-spring-config-example</a></p><ol><li>Add the Nacos Spring dependency.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;nacos-spring-context&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${latest.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The the latest version can be available in maven repositories such as &quot;<a href="https://mvnrepository.com/artifact/com.alibaba.nacos/nacos-spring-context" target="_blank" rel="noopener noreferrer">mvnrepository.com</a>&quot;.</p><ol start="2"><li>Add the <code>@EnableNacosConfig</code> annotation to enable the configuration service. In the code below, <code>@NacosPropertySource</code> is used to load the configuration source whose  <code>dataId</code> is <code>example</code> , and autorefresh is also enabled:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableNacosConfig(globalProperties = @NacosProperties(serverAddr = &quot;127.0.0.1:8848&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosPropertySource(dataId = &quot;example&quot;, autoRefreshed = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class NacosConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Specify the property value for the <code>@NacosValue</code> annotation of Nacos. </li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;config&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ConfigController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @NacosValue(value = &quot;${useLocalCache:false}&quot;, autoRefreshed = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean useLocalCache;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(value = &quot;/get&quot;, method = GET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean get() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return useLocalCache;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li><p>Start Tomcat and call  <code>curl http://localhost:8080/config/get</code> to get configuration information. Because no configuration has been published, a <code>false</code>message is returned.</p></li><li><p>Now you can call <a href="/en/docs/v2/guide/user/open-api">Nacos Open API</a> to publish a configruation to the Nacos server. Assume the dataId is <code>example</code>, and content is <code>useLocalCache=true</code>.</p></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &quot;http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=example&amp;group=DEFAULT_GROUP&amp;content=useLocalCache=true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>Access <code>http://localhost:8080/config/get</code>again, and you get a return message of <code>true</code>, indicating that the value of <code>useLocalCache</code>in your application has been updated.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-service-discovery">Enable Service Discovery<a href="#enable-service-discovery" class="hash-link" aria-label="Direct link to Enable Service Discovery" title="Direct link to Enable Service Discovery">​</a></h2><p>Now you would like to enable the service discovery function of Nacos in your Spring project. </p><p>Sampe project: <a href="https://github.com/nacos-group/nacos-examples/tree/master/nacos-spring-example/nacos-spring-discovery-example" target="_blank" rel="noopener noreferrer">nacos-spring-discovery-example</a></p><ol><li>Add the Nacos Spring dependency.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;nacos-spring-context&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${latest.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The the latest version can be available in maven repositories such as &quot;<a href="https://mvnrepository.com/artifact/com.alibaba.nacos/nacos-spring-context" target="_blank" rel="noopener noreferrer">mvnrepository.com</a>&quot;.</p><ol start="2"><li>Add the <code>@EnableNacosDiscovery</code> annotation to enable the service discovery function of Nacos:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableNacosDiscovery(globalProperties = @NacosProperties(serverAddr = &quot;127.0.0.1:8848&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class NacosConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Use <code>@NacosInjected</code> to inject a Nacos <code>NamingService</code> instance:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;discovery&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DiscoveryController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @NacosInjected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private NamingService namingService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RequestMapping(value = &quot;/get&quot;, method = GET)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;Instance&gt; get(@RequestParam String serviceName) throws NacosException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return namingService.getAllInstances(serviceName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li><p>Start Tomcat and call <code>curl http://localhost:8080/discovery/get?serviceName=example</code>, and the return value is an empty JSON array <code>[]</code>.</p></li><li><p>Call <a href="/en/docs/v2/guide/user/open-api">Nacos Open API</a> to register a service called <code>example</code>to the Nacos Server.</p></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST &#x27;http://127.0.0.1:8848/nacos/v1/ns/instance?serviceName=example&amp;ip=127.0.0.1&amp;port=8080&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>Access <code>curl http://localhost:8080/discovery/get?serviceName=example</code>again, and you will get the following return:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;instanceId&quot;: &quot;127.0.0.1#8080#DEFAULT#example&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ip&quot;: &quot;127.0.0.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;port&quot;: 8080,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;weight&quot;: 1.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;healthy&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cluster&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;serviceName&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;healthChecker&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: &quot;TCP&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;defaultPort&quot;: 80,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;defaultCheckPort&quot;: 80,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;useIPPort4Check&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;metadata&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;service&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;metadata&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Nacos Spring Key Features</h1><p>This section provides a detailed description of the key features of <a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer"><code>nacos-spring-context</code></a>:</p><ul><li>Annotation-Driven</li><li>Dependency Injection</li><li>Externalized Configuration</li><li>Event-Driven</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-annotation-driven">1. Annotation-Driven<a href="#1-annotation-driven" class="hash-link" aria-label="Direct link to 1. Annotation-Driven" title="Direct link to 1. Annotation-Driven">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-enable-nacos">1.1. Enable Nacos<a href="#11-enable-nacos" class="hash-link" aria-label="Direct link to 1.1. Enable Nacos" title="Direct link to 1.1. Enable Nacos">​</a></h3><p><code>@EnableNacos</code> is a modular-driven annotation that enables all features of Nacos Spring, including <strong>Service Discovery</strong> and <strong>Distributed Configuration</strong>. It equals to  <code>@EnableNacosDiscovery</code> and
<code>@EnableNacosConfig</code>, which can be configured separately and used in different scenarios.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-configure-change-listener-method">1.2. Configure Change Listener method<a href="#12-configure-change-listener-method" class="hash-link" aria-label="Direct link to 1.2. Configure Change Listener method" title="Direct link to 1.2. Configure Change Listener method">​</a></h3><p>Suppose there was a config in Nacos Server whose <code>dataId</code> is &quot;testDataId&quot; and <code>groupId</code> is default group(&quot;DEFAULT_GROUP&quot;). Now you would like to change its content by using the <code>ConfigService#publishConfig</code> method:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ConfigService configService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testPublishConfig() throws NacosException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configService.publishConfig(DATA_ID, DEFAULT_GROUP, &quot;9527&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then you would like to add a listener, which will be listening for the config changes. You can do this by adding a config change listener method into your Spring Beans:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@NacosConfigListener(dataId = DATA_ID)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void onMessage(String config) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(&quot;mercyblitz&quot;, config); // asserts true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code below has the same effect:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">configService.addListener(DATA_ID, DEFAULT_GROUP, new AbstractListener() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void receiveConfigInfo(String config) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertEquals(&quot;9527&quot;, config); // asserts true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Note:</strong> <code>@NacosConfigListener</code> supports richer type conversions.</p><ul><li>See <a href="https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/listener/SimpleNacosConfigListener.java" target="_blank" rel="noopener noreferrer">Simple Sample of <code>@NacosConfigListener</code></a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="121-type-conversion">1.2.1. Type Conversion<a href="#121-type-conversion" class="hash-link" aria-label="Direct link to 1.2.1. Type Conversion" title="Direct link to 1.2.1. Type Conversion">​</a></h4><p>The type conversion of <code>@NacosConfigListener</code> includes both build-in and customized implementations. By default, build-in type conversion is based on Spring <code>DefaultFormattingConversionService</code>, which means it covers most of the general cases as well as the rich features of the higher Spring framework. </p><p>For example, the content &quot;9527&quot; in the preceding example can also be listened by a method with integer or the <code>Integer</code> argument:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@NacosConfigListener(dataId = DATA_ID)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void onInteger(Integer value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(Integer.valueOf(9527), value); // asserts true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosConfigListener(dataId = DATA_ID)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void onInt(int value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(9527, value); // asserts true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Of course, <a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer"><code>nacos-spring-context</code></a> provides elastic extension for developers. If you define a named <code>nacosConfigConversionService</code> Spring Bean whose type is <code>ConversionService</code> , the <code>DefaultFormattingConversionService</code> will be ignored. In addition, you can customize the implementation of  the <code>NacosConfigConverter</code> interface to specify a listener method for type conversion:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class UserNacosConfigConverter implements NacosConfigConverter&lt;User&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean canConvert(Class&lt;User&gt; targetType) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public User convert(String source) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return JSON.parseObject(source, User.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>UserNacosConfigConverter</code> class binds the <code>@NacosConfigListener.converter()</code> attribute:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ConfigService configService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testPublishUser() throws NacosException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configService.publishConfig(&quot;user&quot;, DEFAULT_GROUP, &quot;{\&quot;id\&quot;:1,\&quot;name\&quot;:\&quot;mercyblitz\&quot;}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosConfigListener(dataId = &quot;user&quot;, converter = UserNacosConfigConverter.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void onUser(User user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(Long.valueOf(1L), user.getId()); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(&quot;mercyblitz&quot;, user.getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>See <a href="https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/listener/PojoNacosConfigListener.java" target="_blank" rel="noopener noreferrer">Type Conversion Sample of <code>@NacosConfigListener</code></a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="122-timeout-of-execution">1.2.2. Timeout of Execution<a href="#122-timeout-of-execution" class="hash-link" aria-label="Direct link to 1.2.2. Timeout of Execution" title="Direct link to 1.2.2. Timeout of Execution">​</a></h4><p>As it might cost some time to run customized <code>NacosConfigConverter</code>, you can set  max execution time in the <code>@NacosConfigListener.timeout()</code> attribute to prevent it from blocking other listeners:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Listeners {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer integerValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Double doubleValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @NacosConfigListener(dataId = DATA_ID, timeout = 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void onInteger(Integer value) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(100); // timeout of execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.integerValue = value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @NacosConfigListener(dataId = DATA_ID, timeout = 200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void onDouble(Double value) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.sleep(100); // normal execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.doubleValue = value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Integer getIntegerValue() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return integerValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Double getDoubleValue() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return doubleValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>integerValue</code> of <code>Listeners</code> Bean is always <code>null</code> and will not be changed. Therefore, those asserts will be <code>true</code>:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private Listeners listeners;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testPublishConfig() throws NacosException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configService.publishConfig(DATA_ID, DEFAULT_GROUP, &quot;9527&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertNull(listeners.getIntegerValue()); // asserts true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(Double.valueOf(9527), listeners.getDoubleValue());   // asserts true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>See <a href="https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/listener/TimeoutNacosConfigListener.java" target="_blank" rel="noopener noreferrer">Timeout Sample of <code>@NacosConfigListener</code></a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-global-and-special-nacos-properties">1.3. Global and Special Nacos Properties<a href="#13-global-and-special-nacos-properties" class="hash-link" aria-label="Direct link to 1.3. Global and Special Nacos Properties" title="Direct link to 1.3. Global and Special Nacos Properties">​</a></h3><p>The <code>globalProperties</code> is a required attribute in any <code>@EnableNacos</code>, <code>@EnableNacosDiscovery</code> or <code>@EnableNacosConfig</code>, and its type is <code>@NacosProperties</code>. <code>globalProperties</code> initializes &quot;<strong>Global Nacos Properties</strong>&quot; that will be used by other annotations
and components, e,g <code>@NacosInjected</code>. In other words, <strong>Global Nacos Properties</strong>&quot; defines the global and default properties. It is set with the lowest priority and can be overridden if needed. The precedence of overiding rules is shown in the following table:</p><table><thead><tr><th>Precedence Order</th><th>Nacos Annotation</th><th>Required</th></tr></thead><tbody><tr><td>1</td><td><code>*.properties()</code></td><td>N</td></tr><tr><td>2</td><td><code>@EnableNacosConfig.globalProperties()</code> or <code>@EnableNacosDiscovery.globalProperties()</code></td><td>Y</td></tr><tr><td>3</td><td><code>@EnableNacos.globalProperties()</code></td><td>Y</td></tr></tbody></table><p><code>*.properties()</code> defines special Nacos properties which come from one of the following:  </p><ul><li><code>@NacosInjected.properties()</code> </li><li><code>@NacosConfigListener.properties()</code></li><li><code>@NacosPropertySource.properties()</code> </li><li><code>@NacosConfigurationProperties.properties()</code></li></ul><p>Special Nacos properties are also configured by <code>@NacosProperties</code>. However, they are optional and are used to override Global Nacos Properties in special scenarios. If not defined, the Nacos Properties will
try to retrieve properities from <code>@EnableNacosConfig.globalProperties()</code> or <code>@EnableNacosDiscovery.globalProperties()</code>, or
<code>@EnableNacos.globalProperties()</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-nacosproperties">1.4. <code>@NacosProperties</code><a href="#14-nacosproperties" class="hash-link" aria-label="Direct link to 14-nacosproperties" title="Direct link to 14-nacosproperties">​</a></h3><p><code>@NacosProperties</code> is a uniform annotation for global and special Nacos properties. It serves as a mediator between Java <code>Properties</code> and <code>NacosFactory</code> class.   <code>NacosFactory</code> is responsible for creating <code>ConfigService</code> or <code>NamingService</code> instances. </p><p>The attributes of <code>@NacosProperties</code> completely support placeholders whose source is all kinds of <code>PropertySource</code> in Spring <code>Environment</code> abstraction, typically Java System <code>Properties</code> and OS environment variables. The prefix of all placeholders are <code>nacos.</code>.  The mapping between the attributes of <code>@NacosProperties</code> and Nacos properties are shown below: </p><table><thead><tr><th>Attribute</th><th>Property</th><th>Placeholder</th><th>Description</th><th>Required</th></tr></thead><tbody><tr><td><code>endpoint()</code></td><td><code>endpoint</code></td><td><code>${nacos.endpoint:}</code></td><td></td><td>N</td></tr><tr><td><code>namespace()</code></td><td><code>namespace</code></td><td><code>${nacos.namespace:}</code></td><td></td><td>N</td></tr><tr><td><code>accessKey()</code></td><td><code>access-key</code></td><td><code>${nacos.access-key:}</code></td><td></td><td>N</td></tr><tr><td><code>secretKey()</code></td><td><code>secret-key</code></td><td><code>${nacos.secret-key:}</code></td><td></td><td>N</td></tr><tr><td><code>serverAddr()</code></td><td><code>server-addr</code></td><td><code>${nacos.server-addr:}</code></td><td></td><td>Y</td></tr><tr><td><code>contextPath()</code></td><td><code>context-path</code></td><td><code>${nacos.context-path:}</code></td><td></td><td>N</td></tr><tr><td><code>clusterName()</code></td><td><code>cluster-name</code></td><td><code>${nacos.cluster-name:}</code></td><td></td><td>N</td></tr><tr><td><code>encode()</code></td><td><code>encode</code></td><td><code>${nacos.encode:UTF-8}</code></td><td></td><td>N</td></tr></tbody></table><p>Note that there are some differences in the placeholders of <code>globalProperties()</code> between <code>@EnableNacosDiscovery</code> and <code>@EnableNacosConfig</code>:</p><table><thead><tr><th>Attribute</th><th><code>@EnableNacosDiscovery</code>&#x27;s Placeholder</th><th><code>@EnableNacosConfig</code>&#x27;s Placeholder</th></tr></thead><tbody><tr><td><code>endpoint()</code></td><td><code>${nacos.discovery.endpoint:${nacos.endpoint:}}</code></td><td><code>${nacos.config.endpoint:${nacos.endpoint:}}</code></td></tr><tr><td><code>namespace()</code></td><td><code>${nacos.discovery.namespace:${nacos.namespace:}}</code></td><td><code>${nacos.config.namespace:${nacos.namespace:}}</code></td></tr><tr><td><code>accessKey()</code></td><td><code>${nacos.discovery.access-key:${nacos.access-key:}}</code></td><td><code>${nacos.config.access-key:${nacos.access-key:}}</code></td></tr><tr><td><code>secretKey()</code></td><td><code>${nacos.discovery.secret-key:${nacos.secret-key:}}</code></td><td><code>${nacos.config.secret-key:${nacos.secret-key:}}</code></td></tr><tr><td><code>serverAddr()</code></td><td><code>${nacos.discovery.server-addr:${nacos.server-addr:}}</code></td><td><code>${nacos.config.server-addr:${nacos.server-addr:}}</code></td></tr><tr><td><code>contextPath()</code></td><td><code>${nacos.discovery.context-path:${nacos.context-path:}}</code></td><td><code>${nacos.config.context-path:${nacos.context-path:}}</code></td></tr><tr><td><code>clusterName()</code></td><td><code>${nacos.discovery.cluster-name:${nacos.cluster-name:}}</code></td><td><code>${nacos.config.cluster-name:${nacos.cluster-name:}}</code></td></tr><tr><td><code>encode()</code></td><td><code>${nacos.discovery.encode:${nacos.encode:UTF-8}}</code></td><td><code>${nacos.config.encode:${nacos.encode:UTF-8}}</code></td></tr></tbody></table><p>These placeholders of <code>@EnableNacosDiscovery</code> and <code>@EnableNacosConfig</code> are designed to isolate different Nacos servers, and are unnecessary in most scenarios.  By default, general placeholders will be reused.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-dependency-injection">2. Dependency Injection<a href="#2-dependency-injection" class="hash-link" aria-label="Direct link to 2. Dependency Injection" title="Direct link to 2. Dependency Injection">​</a></h2><p><code>@NacosInjected</code> is a core annotation which is used to inject <code>ConfigService</code> or <code>NamingService</code> instance in your Spring Beans and make these instances <strong>cacheable</strong>. This means the instances will be the same if their <code>@NacosProperties</code> are equal, regargless of whether the properties come from global or special Nacos properties:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ConfigService configService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected(properties = @NacosProperties(encode = &quot;UTF-8&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ConfigService configService2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected(properties = @NacosProperties(encode = &quot;GBK&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ConfigService configService3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private NamingService namingService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected(properties = @NacosProperties(encode = &quot;UTF-8&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private NamingService namingService2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosInjected(properties = @NacosProperties(encode = &quot;GBK&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private NamingService namingService3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testInjection() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.assertEquals(configService, configService2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.assertNotEquals(configService2, configService3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.assertEquals(namingService, namingService2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Assert.assertNotEquals(namingService2, namingService3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The property <code>configService</code> uses <code>@EnableNacos#globalProperties()</code> or <code>@EnableNacosConfig#globalProperties()</code>, and because the default value of the <code>encode</code> attribute is &quot;UTF-8&quot;, therefore the <code>configService</code> instance and the <code>configService2</code> instance which is annotated by <code>@NacosProperties(encode = &quot;UTF-8&quot;)</code> are the same. The same is true for <code>namingService</code> and <code>namingService2</code>.</p><p>More importantly, unlike the <code>ConfigService</code> instances created by the <code>NacosFactory.createConfigService()</code> method, the <code>ConfigService</code> instances created by the <code>@NacosInjected</code> annotation support Nacos Spring events. For instance, there will be an <code>NacosConfigPublishedEvent</code>  after an enhanced <code>ConfigService</code> invokes the <code>publishConfig()</code> method. Refer to the <a href="#eventlistener-driven">Event/Listener Driven</a> section for more details.</p><ul><li>See <a href="https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/NacosConfiguration.java" target="_blank" rel="noopener noreferrer">Dependency Injection Sample</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-externalized-configuration">3. Externalized Configuration<a href="#3-externalized-configuration" class="hash-link" aria-label="Direct link to 3. Externalized Configuration" title="Direct link to 3. Externalized Configuration">​</a></h2><p>Externalized configuration is a concept introduced by Spring Boot, which allows applications to receive external property sources to control runtime behavior. Nacos Server runs an isolation process outside the application to maintain the application configurations. <a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer"><code>nacos-spring-context</code></a> provides properties features including object binding, dynamic configuration(auto-refreshed) and so on, and dependence on Spring Boot or Spring Cloud framework is required.</p><p>Here is a simple comparison between  <a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer"><code>nacos-spring-context</code></a> and Spring stack:</p><table><thead><tr><th>Spring Stack</th><th>Nacos Spring</th><th>Highlight</th></tr></thead><tbody><tr><td><code>@Value</code></td><td><code>@NacosValue</code></td><td>auto-refreshed</td></tr><tr><td><code>@ConfigurationProperties</code></td><td><code>@NacosConfigurationProperties</code></td><td>auto-refreshed,<code>@NacosProperty</code>,<code>@NacosIgnore</code></td></tr><tr><td><code>@PropertySource</code></td><td><code>@NacosPropertySource</code></td><td>auto-refreshed, precedence order control</td></tr><tr><td><code>@PropertySources</code></td><td><code>@NacosPropertySources</code></td><td></td></tr></tbody></table><ul><li><p>See <a href="https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/properties/NacosConfigurationPropertiesConfiguration.java" target="_blank" rel="noopener noreferrer">Auto-Refreshed Sample of <code>@NacosConfigurationProperties</code></a></p></li><li><p>See <a href="https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/env/NacosPropertySourceConfiguration.java" target="_blank" rel="noopener noreferrer">Sample of <code>@NacosPropertySources</code> and <code>@NacosPropertySource</code></a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-eventlistener-driven">4. Event/Listener Driven<a href="#4-eventlistener-driven" class="hash-link" aria-label="Direct link to 4. Event/Listener Driven" title="Direct link to 4. Event/Listener Driven">​</a></h2><p>Nacos Event/Listener Driven is based on the standard Spring Event/Listener mechanism. The <code>ApplicationEvent</code> of Spring is an abstract super class for all Nacos Spring events:</p><table><thead><tr><th>Nacos Spring Event</th><th>Trigger</th></tr></thead><tbody><tr><td><code>NacosConfigPublishedEvent</code></td><td>After <code>ConfigService.publishConfig()</code></td></tr><tr><td><code>NacosConfigReceivedEvent</code></td><td>After<code>Listener.receiveConfigInfo()</code></td></tr><tr><td><code>NacosConfigRemovedEvent</code></td><td>After <code>configService.removeConfig()</code></td></tr><tr><td><code>NacosConfigTimeoutEvent</code></td><td><code>ConfigService.getConfig()</code> on timeout</td></tr><tr><td><code>NacosConfigListenerRegisteredEvent</code></td><td>After <code>ConfigService.addListner()</code> or <code>ConfigService.removeListener()</code></td></tr><tr><td><code>NacosConfigurationPropertiesBeanBoundEvent</code></td><td>After <code>@NacosConfigurationProperties</code> binding</td></tr><tr><td><code>NacosConfigMetadataEvent</code></td><td>After Nacos Config operations</td></tr></tbody></table><ul><li>See <a href="https://github.com/nacos-group/nacos-spring-project/blob/master/nacos-spring-samples/nacos-spring-webmvc-sample/src/main/java/com/alibaba/nacos/samples/spring/event/NacosEventListenerConfiguration.java" target="_blank" rel="noopener noreferrer">Event/Listener Sample</a></li></ul><h1>Related Projects</h1><ul><li><a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Nacos</a></li><li><a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer">Nacos Spring</a></li><li><a href="https://github.com/nacos-group/nacos-spring-boot-project" target="_blank" rel="noopener noreferrer">Nacos Spring Boot</a></li><li><a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba" target="_blank" rel="noopener noreferrer">Spring Cloud Alibaba</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/v2/ecology/use-nacos-with-dubbo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Nacos with Dubbo fusion become registry</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/v2/ecology/use-nacos-with-spring-boot"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nacos with Spring Boot Projects</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisite" class="table-of-contents__link toc-highlight">Prerequisite</a></li><li><a href="#enable-configuration-service" class="table-of-contents__link toc-highlight">Enable Configuration Service</a></li><li><a href="#enable-service-discovery" class="table-of-contents__link toc-highlight">Enable Service Discovery</a></li><li><a href="#1-annotation-driven" class="table-of-contents__link toc-highlight">1. Annotation-Driven</a><ul><li><a href="#11-enable-nacos" class="table-of-contents__link toc-highlight">1.1. Enable Nacos</a></li><li><a href="#12-configure-change-listener-method" class="table-of-contents__link toc-highlight">1.2. Configure Change Listener method</a></li><li><a href="#13-global-and-special-nacos-properties" class="table-of-contents__link toc-highlight">1.3. Global and Special Nacos Properties</a></li><li><a href="#14-nacosproperties" class="table-of-contents__link toc-highlight">1.4. <code>@NacosProperties</code></a></li></ul></li><li><a href="#2-dependency-injection" class="table-of-contents__link toc-highlight">2. Dependency Injection</a></li><li><a href="#3-externalized-configuration" class="table-of-contents__link toc-highlight">3. Externalized Configuration</a></li><li><a href="#4-eventlistener-driven" class="table-of-contents__link toc-highlight">4. Event/Listener Driven</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/en/assets/js/runtime~main.a1551189.js"></script>
<script src="/en/assets/js/main.a43f0e65.js"></script>
</body>
</html>