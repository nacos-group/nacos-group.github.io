<!doctype html>
<html lang="en-US" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Blog | Nacos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" name="twitter:image" content="https://nacos.io/en/img/nacos_colorful.png"><meta data-rh="true" property="og:url" content="https://nacos.io/en/blog/page/5"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="Nacos"><meta data-rh="true" property="og:title" content="Blog | Nacos"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="https://img.alicdn.com/tfs/TB1hgJpHAPoK1RjSZKbXXX1IXXa-64-64.png"><link data-rh="true" rel="canonical" href="https://nacos.io/en/blog/page/5"><link data-rh="true" rel="alternate" href="https://nacos.io/en/blog/page/5" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://nacos.io/zh-cn/blog/page/5" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://nacos.io/blog/page/5" hreflang="default"><link data-rh="true" rel="alternate" href="https://nacos.io/blog/page/5" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1QV814950M-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Nacos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Nacos Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Nacos" href="/en/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=nacos">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" href="//g.alicdn.com/mamba/mse-arc-ui/0.0.21/umd/mse-arc-ui.min.css">
<script src="//g.alicdn.com/mamba/mse-arc-ui/0.0.21/umd/mse-arc-ui.min.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-0YDFJ7LX7F" async></script><link rel="stylesheet" href="/en/assets/css/styles.9c63a379.css">
<link rel="preload" href="/en/assets/js/runtime~main.8c5d4764.js" as="script">
<link rel="preload" href="/en/assets/js/main.0d2c9db0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>



<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script>
<script src="//hm.baidu.com/hm.js?e3a5cec56ef8619cf9d7c2abebd509e3"></script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/nacos_colorful.png" alt="Nacos Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a href="https://nacos.io/zh-cn/docs/v2/quickstart/quick-start.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"> </a><a class="navbar__item navbar__link" href="/en/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/what-is-nacos" href="/en/docs/v2/what-is-nacos">2.X</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next/v2/what-is-nacos">User Docs</a></li><li><a class="dropdown__link" href="/en/docs/v2/what-is-nacos">2.X</a></li><li><a class="dropdown__link" href="/en/docs/1.X/v2/what-is-nacos">1.X</a></li></ul></div><a class="navbar__item navbar__link" href="/en/cloud">NACOS CLOUD</a><a href="https://developer.aliyun.com/ebook/36?spm=a2c6h.20345107.ebook-index.18.152c2984fsi5ST" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">E-BOOK-NACOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/blog">BLOG</a><a class="navbar__item navbar__link" href="/en/community">COMMUNITY</a><a href="http://console.nacos.io/nacos/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DEMO-CONSOLE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>En</a><ul class="dropdown__menu"><li><a href="/en/blog/page/5" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">En</a></li><li><a href="/zh-cn/blog/page/5" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.1.1-release">2.1.1-release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.2.0-release">2.2.0-release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.2.1-release">2.2.1-release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.2.2-release">2.2.2-release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.3.0-beta-release">2.3.0-beta-release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/212-and-220beta-release">212-and-220beta-release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/announcement-token-secret-key">announcement-token-secret-key</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/higress">higress</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/iscas2023">iscas2023</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos-distro-mechanism">nacos-distro-mechanism</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos-reigster-mechanism">nacos-reigster-mechanism</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/springboot-0.2.10">springboot-0.2.10</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/up-to-2w-star">up-to-2w-star</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/xiaomi-scale">xiaomi-scale</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos3.0-is-coming">我们总结了3大使用建议，并首次公开 Nacos3.0 规划图 | Nacos 开源4周年</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/iscas2022">Nacos开源之夏，贡献社区赢取12000奖金</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.1.0-release">Nacos 2.1.0版本发布，支持鉴权及加解密插件</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/use-nacos-with-rainbond">Install the HA Nacos cluster in Rainbond with one-click</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/apisix">Apache APISIX Realizes Service Discovery Based on Nacos</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.0.3-release">Nacos 2.0.3 Release, continue to improve stability.</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/performance-compare">Performance comparison between Nacos 2.0 upgrading or not.</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/iscas2021">Nacos ISCAS 2021 start to apply</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/2.0.1-release">Nacos 2.0.1 + 1.4.2 Release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/1.4.0-release">Nacos 1.4.0 + Go SDK 1.0.1 Release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/csharp-0.5.0">v0.5.0 of Nacos-sdk-csharp was released! Capabilities aligned with Java SDK！</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos-2nd-anniversary">Nacos 两周年献礼，Nacos 1.3.2 + Go SDK 1.0.0发布</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/feeling-of-ASoC-2019">参与开源，Offer拿到手软 -- 来自一名2019阿里巴巴编程之夏同学的亲述</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos 1.2.0 guide">Nacos 1.2.0权限控制介绍和使用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos-1.3.0-design">Nacos 1.3.0 new kernel construction process</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/namespace-endpoint-best-practices">Namespace,endpoint 最佳实践</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/pilot mcp">Pilot MCP协议介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos 1.1.4">Nacos 1.1.4发布，业界率先支持Istio MCP协议</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos-confd">Nacos整合Confd，支持nginx配置管理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/eureka2">Eureka 2.0 开源工作宣告停止？别担心，ANS 即将 C位强势出道！</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos 1.1.0">Nacos 1.1.0发布，支持灰度配置和地址服务器模块</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos-roadmap">Nacos GA后的整体规划</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/cmdb">Nacos打通CMDB实现就近访问</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/address-server">阿里巴巴基于 Nacos 实现环境隔离的实践</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos1.0.0">Nacos 1.0.0 发布，正式大规模生产可用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos0.9.0">Nacos 0.9.0版本进行发布</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos0.9-intro">Nacos 0.9.0版本进行发布</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/huya-practice">虎牙直播在微服务改造方面的实践和总结</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos0.8">Nacos 0.8.0版本进行发布</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/huya-nacos">虎牙直播共建Nacos生态</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/5w1h-where">Nacos 有哪些典型的应用场景？—— 配置管理篇</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/dynamic-route-zuul-nacos">使用Nacos实现Spring Cloud Zuul的动态路由</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos0.6">Nacos 0.6版本发布，支持Dubbo生态并且支持Docker部署</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos0.5">Nacos0.5发布，支持DNS-based Service Discovery，JAVA 11</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos">Nacos 0.1.0 版本Review 活动设计</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/cncf">Nacos 进入CNCF landscape</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/5w1h-what">What problems does Nacos help us solve? —— Configuration Management</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/discovery-console">Nacos服务发现控制台预览</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/chengdu-dubbo">Nacos 计划发布v0.2版本，进一步融合Dubbo和SpringCloud生态</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/consul-k8s">Consul与kubernetes整合公告[翻译]</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/dns-sd">微服务架构中基于DNS的服务注册与发现</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/nacos-is-coming">支持Dubbo生态发展，阿里巴巴启动新的开源项目 Nacos</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/en/blog/alibaba-configserver">阿里巴巴服务注册中心产品ConfigServer 10年技术发展回顾</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Nacos 0.9.0版本进行发布"><meta itemprop="keywords" content="nacos0.9,nacos0.9.0,nacos 发布"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/nacos0.9-intro">Nacos 0.9.0版本进行发布</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-02-28T00:00:00.000Z" itemprop="datePublished">February 28, 2019</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><p>Nacos 发布 0.9.0 版本，该版本加强了 Nacos-Sync 稳定性，增加了监控体系，完善了测试用例，并且支持 Naming 和 Config 的分模块启动，此外还修复了社区提出的一些 issues：</p><ul><li>[#412]<!-- --> Nacos can support Dubbo service registration discovery and configuration management</li><li>[#388]<!-- --> Cluster name should be provided in the Instance</li><li>[#377]<!-- --> Clean up messy code in Naming module</li><li>[#369]<!-- --> Support instance list persisted on disk</li><li>[#366]<!-- --> Findbugs-maven-plugin version</li><li>[#362]<!-- --> The metadata will lost when online or offline instance through web ui</li><li>[#352]<!-- --> Refactoring internationalization Nacos console</li><li>[#278]<!-- --> Nacos docker img</li><li>[#243]<!-- --> Optimize the efficiency of integration testing, it’s taking too long now</li></ul><p>感谢以下 Contributors 对 Nacos 0.9.0版本的贡献，他们是：</p><p>@paderlol、@jifengnan、@loadchange、@nkorange、@hxy1991、@huangyunbin、@darkness463、@luoxn28、@TsingLiang、@xuechaos、@nanamikon、@systp、@jameslcj、@pader.zhang</p><p>详情参考：<a href="https://github.com/alibaba/nacos/releases/tag/0.9.0" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/nacos/releases/tag/0.9.0</a></p><p>Nacos team 介绍 ：<a href="https://nacos.io/en-us/docs/nacos-dev.html" target="_blank" rel="noopener noreferrer">https://nacos.io/en-us/docs/nacos-dev.html</a> （持续扩展中，欢迎加入）</p><p>如何加入 Nacos team：<a href="https://nacos.io/en-us/docs/contributing-dev.html" target="_blank" rel="noopener noreferrer">https://nacos.io/en-us/docs/contributing-dev.html</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="虎牙直播在微服务改造方面的实践和总结"><meta itemprop="keywords" content="nacos,虎牙直播"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/huya-practice">虎牙直播在微服务改造方面的实践和总结</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-02-10T00:00:00.000Z" itemprop="datePublished">February 10, 2019</time> · <!-- -->19 min read</div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB1i4ugBjDpK1RjSZFrXXa78VXa-1522-584.png" alt="_2019_02_14_5_33_45" class="img_ev3q"></p><p>相比文字和图片，直播提供了人与人之间更丰富的沟通形式，其对平台稳定性的考验很大，那么倡导“<strong><em>以技术驱动娱乐</em></strong>”的虎牙直播（以下简称“虎牙”）是如何在技术上赋能娱乐，本文将为您介绍虎牙在DNS、服务注册、CMDB和服务配置中心等方面的实践。</p><p>文章整理自虎牙基础保障部中间件团队负责人张波（社区ID：zhangjimmy）在Dubbo Meetup 广州站沙龙上的分享，阿里巴巴中间件授权发布，分享议题如下： </p><ul><li>为什么选用Nacos</li><li>DNS-F的技术价值和应用场景</li><li>服务注册的实践</li><li>CMDB的应用和实践</li><li>服务配置的实践</li></ul><p>##为什么选用 Nacos</p><p>虎牙关注 Nacos 是从v0.2 开始的（<a href="https://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;mid=2247485479&amp;idx=1&amp;sn=bea1d2fc47f7002594bc0762938d4539&amp;chksm=fdeb3a47ca9cb351483b865b1e1e435166efead2c5cc7993bb7bed9549afb8aa4d6d81f7c9cd&amp;token=1795393417&amp;lang=zh_CN#rd" target="_blank" rel="noopener noreferrer">最新版本：Pre-GA v0.8</a>），我们也参与了社区的建设，可以说是比较早期的企业用户。</p><p>Nacos 是一个更易于帮助构建云原生应用的动态服务发现、配置和服务管理平台，提供「注册中心」、「配置中心」和「动态DNS服务」三大功能。</p><p>首先，在虎牙的微服务场景中，起初有多个注册中心，每一个注册中心服务于某一部分微服务，缺少一个能融合多个注册中心，并把他们逐一打通，然后实现一个能管理整个微服务体系的大的注册中心。</p><p>以下内容摘自我们考虑引入Nacos时，在服务注册中心方案上的选型对比：</p><p><img loading="lazy" src="https://yqfile.alicdn.com/3ef377be6df69b7c528536095a74297be909de09.jpeg" alt="0001" class="img_ev3q"></p><p>Nacos提供 DNS-F功能， 可以与K8S、Spring Cloud和Dubbo等多个开源产品进行集成，实现服务的注册功能。</p><p>其次，在服务配置中心方案的选型过程中，我们希望配置中心和注册中心能够打通，这样可以省去我们在微服务治理方面的一些投入。因此，我们也同步比较了一些服务配置中心的开源方案：</p><p><img loading="lazy" src="https://yqfile.alicdn.com/61d46c7b6ae7acb1bcc6eb94be0066537b45a9b7.jpeg" alt="0002" class="img_ev3q"></p><p>例如Spring Cloud Config Server、Zookeeper和ETCD，总体评估下来，基于我们微服务体系现状以及业务场景，我们决定使用Nacos作为我们的服务注册和服务发现的方案。使用过程中，我们发现，随着社区版本的不断更新和虎牙的深入实践，Nacos的优势远比我们调研过程中发现的更多，接下来，我将围绕DNS-F、Nacos-Sync、 CMDB和负载均衡4方面来分享虎牙的实践。</p><p>##DNS - F 的技术价值</p><p><img loading="lazy" src="https://yqfile.alicdn.com/25198113a9e8bebfd3763def3dccf089bfa943c4.jpeg" alt="0003" class="img_ev3q"></p><p><strong>Nacos 提供的DNS-F功能的第一个技术价值在于，弥补了我们内部微服务没有一个全局动态调度能力的空白。</strong>刚才提到，虎牙有多个微服务体系，但并没有一个微服务具备全局动态调度的能力，因为它们各自都是独立的。目前，我们通过Nacos已经融合了四个微服务体系的注册中心，最终目标是把所有的微服务都融合在一起，实现全局动态调动的能力。</p><p><strong>第二，DNS-F解决了服务端端到端面临的挑战，即延时大、解析不准、故障牵引慢的问题。</strong></p><p>如何去理解呢？</p><p>当内部有多个微服务体系的时候，每一个体系的成熟度是不同的。例如，有一些微服务框架对同机房或CMDB路由是不支持的，当一个服务注册到了多个IDC中心，去调用它的服务的时候，即便是同机房，也可能调用到一个不是同机房的节点。这样就会无端的造成服务的延时和解析不准。</p><p>即使我们基于DNS做一些解析的优化，但仍然无法完全解决服务的延时和解析不准。这是因为DNS都是IP策略的就近解析，无法根据服务的物理状态、物理信息进行路由。此外，当一个核心服务出现问题，如果缺少一个融合了多个调用方和被调用方的信息的统一的注册中心，就很难去准确判断如何去牵引，从而导致故障牵引慢。有了Nacos后，就可以接入一个统一的注册中心以及配置中心，去解决这些问题。（目前，虎牙还在微服务体系的改造过程中，未完全实现统一的注册中心）</p><p><strong>第三，提供专线流量牵引能力。</strong>虎牙的核心机房的流量互通，是使用专线来实现的。专线的特性就是物理建设的，而且我们的专线建设可能不像BAT那么大，例如我们专线容量的冗余只有50%，假设某个直播异常火爆，突发流量高于平常的两百倍，超过了专线的建设能力，这时候一个服务就有可能会导致全网故障。但是，通过全局的注册中心和调动能力，我们就可以把流量牵引到其他地方，例如迁移到公网，甚至牵引到一个不存在的地址，来平衡一下。即便某个服务出现问题，也不会影响我们的全局服务。</p><p><strong>第四，支持服务端的多种调度需求</strong>，包括同机房路由、同机器路由，以及同机架路由，Nacos都可以去做适配。此外，基于Nacos 的DNS-F功能，我们还实现了加速外部域名解析和服务故障牵引秒级生效。</p><p>##DNS - F 的应用场景</p><p><img loading="lazy" src="https://yqfile.alicdn.com/7cecef1baea37febe4ec6906267d07b030552f3b.jpeg" alt="0004" class="img_ev3q"></p><p>这张图是Nacos DNS-F的一个具体实现，实际上是拦截了OS层的DNS请求。如果经过DNS的域名是内部服务，它就会从Nacos Server 获取结果，如果不是，就会转发到其它的LocalDNS进行解析。</p><p><img loading="lazy" src="https://yqfile.alicdn.com/8cb3cf8a96a1bc5a2a56a8230117b40294c7da9c.jpeg" alt="0005" class="img_ev3q"></p><p>以数据库高可用的应用场景为例，我们的数据库切换效率比较低，依赖业务方修改配置，时效不确定，通常需要10分钟以上（备注：我们的数据库实际上已经实现了主备的功能，但当一个主服务出现问题的时候，总是要去切换IP。）切换IP的过程中，依赖运维和开发的协作，这是一个比较长的过程。</p><p>引入DNS后，当主出现问题的时候，就可以很快的用另外一个主的IP来进行替换，屏蔽故障，而且节点的故障检测和故障切换都可以自动完成，并不依赖运维和开发的协作，节省了时间。当然，这个场景的解法有很多，比如说使用MySQL - Proxy也可以去解这个问题，但我们的MySQL - Proxy还在建设中，想尽快的把这个问题解决，所以采用了DNS的方式。</p><p>下面我们再着重分享下基于DNS-F对LocalDNS的优化。虎牙还没有去建设自己的LocalDNS，大部分使用的是一些公共的DNS，大致有以下这些组成。</p><p><img loading="lazy" src="https://yqfile.alicdn.com/232023934e87766f6e336858783ab85c24b324a0.jpeg" alt="0006" class="img_ev3q"></p><p>这种组成方式会存在一个问题。假设服务突然一下崩溃后，之后服务又马上正常了，这种情况我们无法重现去找到崩溃原因。因为很多场景下，是一个公共DNS的请求超时导致的，甚至一个解析失败导致的，在那一刻，因为无法保留现场的，所以就发现不了问题。</p><p>以我们的监测数据来看，DNS解析错误的比例达到1‰左右，超时比例将更高。意思是在使用公共DNS的情况下，服务有1‰的几率是会超时或失败，如果服务没有做好容错，就会出现异常。同时，一些公共DNS解析的延时都是不定的，比如在亚马逊上一些比较不好的节点，它的延时会比较高，平均超过三四十毫秒。</p><p><img loading="lazy" src="https://yqfile.alicdn.com/817a1aacf83e650a108d0cfdf50c93cae19e8adc.jpeg" alt="0007" class="img_ev3q"></p><p>然后我们基于DNS-F对LocalDNS做了一些优化。优化结果如下：</p><ul><li>平均解析时间从之前的超过两百毫秒降低到两毫秒以下；</li><li>缓存命中率从92%提升到了99%以上；</li><li>解析失败率之前是1‰，现在基本上没有了。</li></ul><p>优化的效果也体现在我们的风控服务上，平均延迟下降10ms，服务超时比例下降25%，降低了因延迟或服务超时导致的用户上传的图片或文字违规但未被审核到的风险。</p><p>##服务注册的实践</p><p>虎牙的核心业务是跑在Tars上的。</p><blockquote><p>Tars：腾讯开源的一款微服务框架。  </p></blockquote><p>Tars主要是支持C++，但对Java、PHP等开发语言的支持力度比较差，这就使得我们非C++的业务方去调用它就会很别扭。引入Nacos以后，我们通过Nacos支持的DNS协议来实现服务发现过程中对全语言的支持。</p><p>当然，Nacos不只是一个注册中心，它具备了融合多个数据中心的能力，支持多数据源的同步，例如，我们目前已经支持了Taf（虎牙内部的一个重要微服务体系）、Nacos自身、ZooKeeper、以及K8S上一些服务注册的同步。</p><p><img loading="lazy" src="https://yqfile.alicdn.com/c1625c404950f858283a40e98bb82ab142e39de5.jpeg" alt="0008" class="img_ev3q"></p><p>同时，基于Nacos集群的双向同步功能(Nacos-Sync)，我们实现了国内的两个可用区，以及国外的多个可用区之间的数据值同步，最终实现了一处注册、多地可读。</p><p>Nacos-Sync是事件机制，即同步任务通过事件触发，可以灵活地开启和关闭你要同步的任务，然后根据服务变化事件触发监听，保证实时性，最后通过定时的全量突发同步事件，保证服务数据的最终一致。同时，Nacos-Sync也支持服务心跳维持，即多个数据中心的心跳，可以使用Nacos-Sync代理要来实现远端同步。此外，也支持心跳与同步任务绑定，便于灵活控制。</p><p>由于Taf上有数万个注册服务，同步的量特别大，所以我们在Nacos-Sync做了一些改造，通过任务分片来实现数万服务同步的可用性保障。改造步骤是先以服务为粒度定义任务，然后在多个分片上分散任务负载，最后以单分片多副本来保证任务可用性。</p><p>##对接 CMDB，实现就近访问</p><p>在服务进行多机房或者多地域部署时，跨地域的服务访问往往延迟较高，一个城市内的机房间的典型网络延迟在1ms左右，而跨城市的网络延迟，例如上海到北京大概为30ms。此时自然而然的一个想法就是能不能让服务消费者和服务提供者进行同地域访问。</p><p>Nacos定义了一个SPI接口，里面包含了与第三方CMDB约定的一些方法。用户依照约定实现了相应的SPI接口后，将实现打成Jar包放置到Nacos安装目录下，重启Nacos即可让Nacos与CMDB的数据打通。</p><p><img loading="lazy" src="https://yqfile.alicdn.com/d8020624cc008a9452224b18768946d5a5e1b9b7.jpeg" alt="0009" class="img_ev3q"></p><p>在实际的落地过程中，我们是在DNS-F接入Taf，在DNS-F上实现Taf的中控接口，无缝对接Taf的sdk。DNS-F提供缓存负载均衡和实例信息，Nacos则提供负载均衡信息的查询接口。</p><p>##服务配置的实践</p><p>虎牙的域名（<a href="http://www.huya.com%EF%BC%89%E4%BC%9A%E6%8E%A5%E5%85%A5%E5%8D%8E%E5%8D%97%E3%80%81%E5%8D%8E%E4%B8%AD%E3%80%81%E5%8D%8E%E5%8C%97%E5%A4%9A%E4%B8%AAIDC%E6%9C%BA%E6%88%BF%EF%BC%8C%E6%AF%8F%E4%B8%AA%E6%9C%BA%E6%88%BF%E9%83%BD%E4%BC%9A%E5%BB%BA%E8%AE%BE%E4%B8%80%E4%B8%AANginx%E5%8E%BB%E5%81%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%8C%E7%BB%8F%E8%BF%87%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E6%B5%81%E9%87%8F%E4%BC%9A%E9%80%9A%E8%BF%87%E4%B8%93%E7%BA%BF%E8%BF%94%E5%9B%9E%E5%88%B0%E6%88%91%E4%BB%AC%E7%9A%84%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E3%80%82%E5%9C%A8%E8%BF%99%E4%B8%AA%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E5%8E%BB%E4%BF%AE%E6%94%B9%E4%B8%80%E4%B8%AA%E5%9C%A8%E4%B8%AD%E9%97%B4%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%8C%E9%9C%80%E8%A6%81%E4%B8%8B%E5%8F%91%E5%88%B0%E5%A4%9A%E4%B8%AA%E6%9C%BA%E6%88%BF%E7%9A%84%E4%B8%8A%E7%99%BE%E4%B8%AA%E8%B4%9F%E8%B4%A3%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E6%9C%BA%E5%99%A8%E4%B8%8A%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%87%BA%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%B8%8B%E5%8F%91%E4%B8%8D%E5%8F%8A%E6%97%B6%EF%BC%8C%E6%88%96%E4%B8%8B%E5%8F%91%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5%EF%BC%8C%E6%9E%81%E5%A4%A7%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%95%85%E9%9A%9C%EF%BC%8C%E5%90%8C%E6%97%B6%EF%BC%8C%E8%B4%9F%E8%B4%A3%E5%9D%87%E8%A1%A1%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AF%B9%E5%BC%B9%E6%80%A7%E8%83%BD%E5%8A%9B%E7%9A%84%E8%A6%81%E6%B1%82%E8%BE%83%E9%AB%98%EF%BC%8C%E5%9C%A8%E4%B8%9A%E5%8A%A1%E9%AB%98%E5%B3%B0%E5%A6%82%E6%9E%9C%E4%B8%8D%E8%83%BD%E5%BF%AB%E9%80%9F%E6%89%A9%E5%AE%B9%EF%BC%8C%E5%AE%B9%E6%98%93%E5%87%BA%E7%8E%B0%E5%85%A8%E7%BD%91%E6%95%85%E9%9A%9C%E3%80%82" target="_blank" rel="noopener noreferrer">www.huya.com）会接入华南、华中、华北多个IDC机房，每个机房都会建设一个Nginx去做负载均衡，经过负载均衡的流量会通过专线返回到我们的后端服务器上。在这个过程中，如果我们去修改一个在中间的配置，需要下发到多个机房的上百个负责负载均衡的机器上，如果出现配置下发不及时，或下发配置失败，极大可能会出现故障，同时，负责均衡服务的机器对弹性能力的要求较高，在业务高峰如果不能快速扩容，容易出现全网故障。</a></p><p><img loading="lazy" src="https://yqfile.alicdn.com/72ecb3dd72d5347932f97b5efd3433ac2bb52a03.jpeg" alt="0010" class="img_ev3q"></p><p>传统的配置下发方式是通过服务端下发文件更新配置，更新配置生效时间长，由于需要预先知道负责均衡集群的机器信息，扩缩容需要等元信息同步以后才能接入流量，扩容流量的接入时间较长。</p><p>引入Nacos后，我们采用了配置中心监听方式，通过客户端主动监听配置更新，配置便可秒级生效，新扩容服务主动拉取全量配置，流量接入时长缩短3分钟+。</p><p>##虎牙对 Nacos 改造和升级的总结</p><p>引入Nacos的过程中，我们所做的改造和升级总结如下。</p><p>一是在<strong>DNS-F</strong>上，我们增加了对外部域名的预缓存的支持，Agent的监控数据对接到公司的内部监控，日志输出也对接到内部的日志服务，然后和公司的CMDB对接，并实现了DNS-F Cluster集群。我们之所以去构建一个DNS-FCluster集群，是为了避免内存、硬盘或版本问题导致的DNS服务无效，有了DNS-F Cluster集群，当本地Agent出现问题的时候，就可以通过集群去代理和解析DNS请求。</p><p>二是在<strong>Nacos-Sync</strong>上，我们对接了TAF注册服务和K8S注册服务，以及解决了多数据中心环形同步的问题。</p><p>三是在<strong>Nacos CMDB</strong>上，我们对Nacos CMDB进行了扩展，对接了虎牙自己的CMDB，并对接了内部的负载均衡策略。</p><p>###本文作者
张波，社区ID zhangjimmy，Nacos Committer，虎牙基础保障部中间件团队负责人，阿里云MVP。</p><p>###其他服务化改造实践：</p><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;mid=2247485166&amp;idx=1&amp;sn=3c7d87b4d97d0b9e96c178c70769d493&amp;chksm=fdeb348eca9cbd98ef37dc628b3f8e22d1b86f2969e5fa2527a631d5e04cc59f326bf2494a6a&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">网易考拉在服务化改造方面的实践</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;mid=2247485166&amp;idx=2&amp;sn=2b18fb22d69ecb50e5daf550ad076b3b&amp;chksm=fdeb348eca9cbd9814f82b3cdd8d6b4dff682d1b7a29d0515f08a70997e1f9e6bfaf37413ca5&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">微众银行的金融级消息服务平台建设实践和思考</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;mid=2247485392&amp;idx=4&amp;sn=e03c4c7b6d8bb9bbced7fc79615bb5a7&amp;chksm=fdeb35b0ca9cbca6a4bd49ded82c2c4186fbc957a17fb86c80aa4a39180fcf4fc0bed69f84e7&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">消息规模超千亿，同程艺龙的消息系统建设实践</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzU0MDIzOQ==&amp;mid=2247484792&amp;idx=3&amp;sn=6e05c4ccb48dd1ba69893ec39b753e1d&amp;chksm=fdeb3718ca9cbe0eb891f820d6cb041b127fe2511f601db46031c46c4881a1ab657d17e406f7&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">滴滴出行基于RocketMQ构建企业级消息队列服务的实践</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Nacos 0.8.0版本进行发布"><meta itemprop="keywords" content="nacos0.8,nacos0.8.0,nacos 发布"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/nacos0.8">Nacos 0.8.0版本进行发布</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-01-20T00:00:00.000Z" itemprop="datePublished">January 20, 2019</time> · <!-- -->8 min read</div></header><div class="markdown" itemprop="articleBody"><p>阿里巴巴微服务开源项目?<a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Dubbo Nacos</a>? 于本周发布?<strong>v0.8.0</strong>?<strong>PRE-GA</strong>版本，终于初步完成了Road Map一个重要的里程碑版本（第一个可安全上生产的版本，特别感谢在前期勇于在生产上尝试Nacos的客户，社区会尽快寄出小礼品，表达对大家的感激之情），V0.8.0 版本主要在支持了登录、命名空间、Metrics监控（对接Prometheus）、通过Nacos-Sync 组件支持从传统的注册中心平滑的往Nacos服务数据迁移等特性，以更稳定和更高可用的姿态让用户在生产环境中支撑大家的微服务平台。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nacos-登录">Nacos 登录<a href="#nacos-登录" class="hash-link" aria-label="Direct link to Nacos 登录" title="Direct link to Nacos 登录">​</a></h3><p>Nacos控制台支持登录、登出特性，以便更安全的上生产使用。<br><img loading="lazy" src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/9687/1548047848570-c92c232f-13eb-41e3-a8af-0660e3a58912.png#align=left&amp;display=inline&amp;height=894&amp;linkTarget=_blank&amp;name=image.png&amp;originHeight=1430&amp;originWidth=2876&amp;size=195009&amp;width=1797" alt="image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="命名空间">命名空间<a href="#命名空间" class="hash-link" aria-label="Direct link to 命名空间" title="Direct link to 命名空间">​</a></h3><p>Nacos自0.5.0版本支持命名空间以来，配置服务先支持了命名空间，服务发现模块则在这个0.8.0版本支持了多命名空间，使用服务发现的命名空间可以实现服务数据的逻辑隔离。使用服务发现模块的多命名空间与配置模块基本相同，在Nacos控制台上查看想要使用的命名空间ID，在客户构造时传入该命名空间ID：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">properties.put(PropertyKeyConst.NAMESPACE, &quot;74a3dbb9-36cb-43f5-8d31-006acfd61caa&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">properties.put(PropertyKeyConst.SERVER_ADDR, &quot;127.0.0.1:8848&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NamingService naming = NamingFactory.createNamingService(properties);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这样通过这个NamingService实例读写的就都是命名空间74a3dbb9-36cb-43f5-8d31-006acfd61caa下的数据了。当然您也可以不指定命名空间ID，这样将会默认分配到public命名空间。发布完服务可以到Nacos控制台上查询服务信息：<br><img loading="lazy" src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/9687/1548312345294-d4bd95df-7e6d-4a36-8827-6a7ac0a00985.png#align=left&amp;display=inline&amp;height=553&amp;linkTarget=_blank&amp;name=image.png&amp;originHeight=830&amp;originWidth=1904&amp;size=131287&amp;width=1269" alt="image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metrics监控">Metrics监控<a href="#metrics监控" class="hash-link" aria-label="Direct link to Metrics监控" title="Direct link to Metrics监控">​</a></h3><p>通过Metrics信息暴露，对接Prometheus加强Nacos实时监控，以便让用户对产品更有控制力。</p><p>Nacos 通过micrometer统计了运行时的核心指标：</p><ul><li>系统指标包括cpu load jvm等</li><li>业务指标包括配置数，域名数，长连接，QPS，RT等</li><li>异常指标记录了Nacos运行的内部异常micrometer提供了转化器能转化成多种metrics格式，Nacos目前支持常用的prometheus、elastic search和influxdb，后续可以根据具体情况进行调整。</li></ul><br><br>grafana具备强大的的数据可视化能力，能将采集的数据展示出来，支持多种数据源。同时可对重要指标配置告警规则，数据达到阈值时可以通知相关负责人。<br>Nacos官网提供了结合prometheus和grafana实现metrics监控<br><br><br>![](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/53357/1548122164953-6011a9ee-a521-447c-a871-7ebcf10c2ce4.png#align=left&amp;display=inline&amp;height=417&amp;linkTarget=_blank&amp;originHeight=1584&amp;originWidth=2832&amp;size=0&amp;width=746)<p>具体的详情可以参考官网<a href="https://nacos.io/zh-cn/docs/monitor-guide.html" target="_blank" rel="noopener noreferrer">监控文档</a>。</p><h3></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nacos-sync-支持服务平滑迁移">Nacos-Sync 支持服务平滑迁移<a href="#nacos-sync-支持服务平滑迁移" class="hash-link" aria-label="Direct link to Nacos-Sync 支持服务平滑迁移" title="Direct link to Nacos-Sync 支持服务平滑迁移">​</a></h3><p>提供Nacos-Sync同步工具支持用户做服务数据的平滑迁移迁移，支持用户从其他注册中心平滑迁移到Nacos上来，同时支持多个Region独立Nacos服务同步，目前Nacos-Sync支持的源注册中心主要包括ZooKeeper,Eureka等。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用场景">使用场景<a href="#使用场景" class="hash-link" aria-label="Direct link to 使用场景" title="Direct link to 使用场景">​</a></h4><ul><li>双向同步功能,支持Dubbo+Zookeeper服务平滑迁移到Dubbo+Nacos,享受Nacos更加优质的服务</li></ul><p><img loading="lazy" src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/4232/1548136490076-13655b30-b0e4-4363-95dc-72b79a080fc0.png#align=left&amp;display=inline&amp;height=246&amp;linkTarget=_blank&amp;name=image.png&amp;originHeight=838&amp;originWidth=1728&amp;size=171454&amp;width=508" alt="image.png" class="img_ev3q"></p><ul><li>多个网络互通的Region之间服务共享,打破Region之间的服务调用限制</li></ul><p><img loading="lazy" src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/4232/1548136895122-ba2be529-d959-4c9d-9fa4-74059bce1d18.png#align=left&amp;display=inline&amp;height=399&amp;linkTarget=_blank&amp;name=image.png&amp;originHeight=798&amp;originWidth=1136&amp;size=64731&amp;width=568" alt="image.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="支持的范围">支持的范围<a href="#支持的范围" class="hash-link" aria-label="Direct link to 支持的范围" title="Direct link to 支持的范围">​</a></h4><p>Nacos-Sync支持用户扩展不同注册中心服务同步，目前已支持的同步类型如下:</p><ul><li>Nacos数据同步到Nacos</li><li>Zookeeper数据同步到Nacos</li><li>Nacos数据同步到Zookeeper</li><li>Eureka数据同步到Nacos</li><li>Consul数据同步到Nacos</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置同步服务">配置同步服务<a href="#配置同步服务" class="hash-link" aria-label="Direct link to 配置同步服务" title="Direct link to 配置同步服务">​</a></h4><p>Nacos-Sync提供了控制台方便你配置同步的服务数据:</p><ul><li>同步任务管理页面</li></ul><p><img loading="lazy" src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/4232/1548129423366-e1a37af4-3eb6-48f0-af76-84ec1f310ee2.png#align=left&amp;display=inline&amp;height=277&amp;linkTarget=_blank&amp;originHeight=1064&amp;originWidth=2866&amp;width=746" class="img_ev3q"></p><ul><li>注册中心管理页面</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="imagepng"><img loading="lazy" src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/4232/1548129453620-f480a696-931b-4db4-b4c7-298ae7da029e.png#align=left&amp;display=inline&amp;height=562&amp;linkTarget=_blank&amp;name=image.png&amp;originHeight=1124&amp;originWidth=2876&amp;size=190668&amp;width=1438" alt="image.png" class="img_ev3q"><a href="#imagepng" class="hash-link" aria-label="Direct link to imagepng" title="Direct link to imagepng">​</a></h2><p>具体项目信息请参考<a href="https://github.com/nacos-group/nacos-sync" target="_blank" rel="noopener noreferrer">Nacos-Sync产品页</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="蓬勃发展的-nacos-社区">蓬勃发展的 Nacos 社区<a href="#蓬勃发展的-nacos-社区" class="hash-link" aria-label="Direct link to 蓬勃发展的 Nacos 社区" title="Direct link to 蓬勃发展的 Nacos 社区">​</a></h2><blockquote><p>DISS is cheap, show me your hand
比吐槽更重要的是搭把手，参与社区一起发展Nacos</p></blockquote><ul><li>作为用户关注和加入 Nacos 社区</li></ul><p>Nacos 社区正在蓬勃发展，截止到发文为止，Nacos 短短几个月已经有 9 个微信群，其中 7 个已满员，1个QQ群，1个钉钉群，关注 Nacos 的社区人数已经近5000人，在 Nacos 群里跟 “道（基）友” 切磋技术，交流经验，招聘交友，抢抢红包...不亦乐乎。</p><p>要加入 Nacos 微信社区，你可以通过扫下面的<strong>“超哥”</strong>“超哥”** 帮你拉入 “Nacos社区微信交流群”</p><p><img loading="lazy" src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/9687/1548047927520-89c34af8-899a-41b6-887c-9319461db519.png#align=left&amp;display=inline&amp;height=424&amp;linkTarget=_blank&amp;originHeight=1124&amp;originWidth=1984&amp;size=0&amp;width=748" class="img_ev3q"></p><ul><li>作为代码贡献者加入 Nacos 社区</li></ul><p>从Nacos用户发展而成贡献者顺理成章，而Nacos开发团队也确实在日趋壮大，从开始的只有4个代码contributor发展到目前的34个，在0.8.0 版本的开发中，社区同学贡献了很大的力量，在此特别感谢戚月同学设计登录UI，黄清昊同学贡献登录代码，王彦民同学贡献命名空间代码，张龙同学贡献nacos-sync代码，李晨同学贡献配置管理代码，明亦同学保证这个关键版本的测试质量，相信后续有跟多同学参与到Nacos社区的共建中。</p><p>而社区也正在计划在合适的时机上，将在Nacos官网 <a href="http://nacos.io/" target="_blank" rel="noopener noreferrer">nacos.io</a> 中添加团队介绍页，将大家正式公布于众，欢迎大家加入Nacos社区，贡献社区。用Apache的话说，<strong>“社区高于代码”!</strong></p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1542704700864-a9d54856-9bf6-4176-b449-c13fa02c5800.png#align=left&amp;display=inline&amp;height=387&amp;linkTarget=_blank&amp;originHeight=888&amp;originWidth=1716&amp;width=748" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="新人时刻---什么是nacos"><a href="https://yuque.alibaba-inc.com/nacos/opensource/dawygn#6gw6hq" target="_blank" rel="noopener noreferrer"></a>新人时刻 - &quot;什么是Nacos？&quot;<a href="#新人时刻---什么是nacos" class="hash-link" aria-label="Direct link to 新人时刻---什么是nacos" title="Direct link to 新人时刻---什么是nacos">​</a></h2><blockquote><p>还不知道什么是Nacos? 没关系，在github上star一下跟程序猿兄弟打个招呼吧!!</p></blockquote><p><a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Nacos</a> 是阿里巴巴于7月份新开源的项目，Nacos的主要愿景是期望通过提供易用的 <code>动态服务发现</code>、<code>服务配置管理</code>、<code>服务共享与管理</code> 的基础设施，帮助用户在云原生时代更好的构建、交付、管理自己的微服务平台。</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1532436633419-08a42307-7fb7-4d51-9062-fecc3868613b.png#align=left&amp;display=inline&amp;height=355&amp;linkTarget=_blank&amp;originHeight=1014&amp;originWidth=2138&amp;width=748" class="img_ev3q"></p><p>github项目地址在 <a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">这里</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="更多与-nacos-相关的开源项目信息"><a href="https://yuque.alibaba-inc.com/nacos/opensource/dawygn#kn9iog" target="_blank" rel="noopener noreferrer"></a>更多与 Nacos 相关的开源项目信息<a href="#更多与-nacos-相关的开源项目信息" class="hash-link" aria-label="Direct link to 更多与-nacos-相关的开源项目信息" title="Direct link to 更多与-nacos-相关的开源项目信息">​</a></h2><ul><li><a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Nacos</a></li><li><a href="https://github.com/dubbo/dubbo-registry-nacos" target="_blank" rel="noopener noreferrer">Dubbo Registry Nacos</a></li><li><a href="https://github.com/nacos-group/nacos-coredns-plugin" target="_blank" rel="noopener noreferrer">Nacos DNS-F</a></li><li><a href="https://github.com/nacos-group/nacos-docker" target="_blank" rel="noopener noreferrer">Nacos Docker</a></li><li><a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer">Nacos Spring Project</a></li><li><a href="https://github.com/nacos-group/nacos-spring-boot-project" target="_blank" rel="noopener noreferrer">Nacos Spring Boot</a></li><li><a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba" target="_blank" rel="noopener noreferrer">Spring Cloud Alibaba</a></li><li><a href="http://dubbo.io/" target="_blank" rel="noopener noreferrer">Dubbo</a></li><li><a href="https://github.com/alibaba/Sentinel" target="_blank" rel="noopener noreferrer">Sentinel</a></li><li><a href="https://projects.spring.io/spring-cloud/" target="_blank" rel="noopener noreferrer">Spring Cloud</a></li><li><a href="https://github.com/Nepxion/Discovery" target="_blank" rel="noopener noreferrer">Nepxion Discovery</a></li><li><a href="https://github.com/SpringCloud/spring-cloud-gateway-nacos" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway Nacos</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="虎牙直播共建Nacos生态"><meta itemprop="keywords" content="虎牙直播,nacos"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/huya-nacos">虎牙直播共建Nacos生态</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-01-10T00:00:00.000Z" itemprop="datePublished">January 10, 2019</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="https://img.alicdn.com/tfs/TB1i4ugBjDpK1RjSZFrXXa78VXa-1522-584.png" alt="huya" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="虎牙直播平台httpswwwhuyacom">虎牙直播平台(<a href="https://www.huya.com/" target="_blank" rel="noopener noreferrer">https://www.huya.com/</a>)<a href="#虎牙直播平台httpswwwhuyacom" class="hash-link" aria-label="Direct link to 虎牙直播平台httpswwwhuyacom" title="Direct link to 虎牙直播平台httpswwwhuyacom">​</a></h2><p>虎牙直播是中国一家以游戏直播为主的视频直播网站。网站以YY直播为名创建于2011年，隶属于欢聚时代，2014年11月24日更名为虎牙直播，开始独立运营。其海外版本为以东南亚为市场的Nimo TV。虎牙直播是国内最为资深的以游戏内容为核心的直播平台，其在游戏方面有丰富的独家资源，汇聚目前最为火爆的游戏，如英雄联盟、王者荣耀、球球大作战、守望先锋、炉石传说、绝地求生、绝地求生手游——刺激战场、全民突击等主题的直播内容。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="虎牙中间件团队介绍">虎牙中间件团队介绍<a href="#虎牙中间件团队介绍" class="hash-link" aria-label="Direct link to 虎牙中间件团队介绍" title="Direct link to 虎牙中间件团队介绍">​</a></h2><p>虎牙中间件团队主要负责虎牙服务注册发现与配置中心 ，负责均衡，中间件等平台相关的建设，致力于保障改进虎牙用户接入的请求成功率及请求耗时，为虎牙提供稳定可靠全球基础接入服务设施，服务间通信的基础设施。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="虎牙团队成功引入nacos到生产环境">虎牙团队成功引入Nacos到生产环境<a href="#虎牙团队成功引入nacos到生产环境" class="hash-link" aria-label="Direct link to 虎牙团队成功引入Nacos到生产环境" title="Direct link to 虎牙团队成功引入Nacos到生产环境">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nacos-dns数据库高可用场景上落地">nacos dns数据库高可用场景上落地<a href="#nacos-dns数据库高可用场景上落地" class="hash-link" aria-label="Direct link to nacos dns数据库高可用场景上落地" title="Direct link to nacos dns数据库高可用场景上落地">​</a></h3><p>通过DNS-F和nacos实现基于域名的服务发现，数据库接入由ip方式改成域名接入，数据库切换在秒级完成，已在内部数十个业务系统上完成接入。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nacos-cmdb方案落地">nacos cmdb方案落地<a href="#nacos-cmdb方案落地" class="hash-link" aria-label="Direct link to nacos cmdb方案落地" title="Direct link to nacos cmdb方案落地">​</a></h3><p>nacos通过支持spi扩展的方式， 支持虎牙将cmdb的数据导入到nacos中，  可以实现对注册实例打入来自cmdb标签，  实现基于cmdb标签的负载均衡功能，  赋予业务同机房调度， 同set调度，  基于自己定义的标签进行流量分发的能力。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tars服务框架融合nacos为注册中心">tars服务框架融合nacos为注册中心<a href="#tars服务框架融合nacos为注册中心" class="hash-link" aria-label="Direct link to tars服务框架融合nacos为注册中心" title="Direct link to tars服务框架融合nacos为注册中心">​</a></h3><p>通过nacos-sync这个中间件，将tars中的注册数据实时同步到nacos中，实现秒级同步tars中实例的变化， 同时提供高可用的集群方案；部署在国内外的nacos注册中心，满足业务就近注册服务，同时本地的服务会通过nacos-sync同步到其他集群，满足业务跨区域服务调用的需求。  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="负载均衡层解到nacos-config做配置管理">负载均衡层解到nacos config做配置管理<a href="#负载均衡层解到nacos-config做配置管理" class="hash-link" aria-label="Direct link to 负载均衡层解到nacos config做配置管理" title="Direct link to 负载均衡层解到nacos config做配置管理">​</a></h3><p>国内外流量接入层位于全球各地， 配置的推送服务遇到比较大的挑战。 nacos config通过部署3地的配置服务集群，国内外流量接入层可以就近拉取配置，解决使用国内单节点svn服务的的速度问题。同时通过使用集群方案和本地文件缓存机制保证配置服务的高可用， 解决之前svn的单点问题。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="未来计划">未来计划<a href="#未来计划" class="hash-link" aria-label="Direct link to 未来计划" title="Direct link to 未来计划">​</a></h3><p>虎牙后续会继续在nacos上持续投入，今后的内部service mesh，容器服务注册场景发力。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="虎牙中间件团队深入共建nacos">虎牙中间件团队深入共建Nacos<a href="#虎牙中间件团队深入共建nacos" class="hash-link" aria-label="Direct link to 虎牙中间件团队深入共建Nacos" title="Direct link to 虎牙中间件团队深入共建Nacos">​</a></h2><p>虎牙中间件团队也深入参与了Nacos生态的构建，核心成员张波、周建、李志鹏参与构建了包括Nacos的核心同步组件Nacos-sync、Nacos的DNS-F模块，把虎牙的业务模型和生产部署经验也共建到Nacos生态中,在过程当中，张波、周建、李志鹏成为了Nacos的核心Committer，是Nacos重要的社区成员。</p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Nacos 配置管理有哪些典型的应用场景？"><meta itemprop="keywords" content="nacos"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/5w1h-where">Nacos 有哪些典型的应用场景？—— 配置管理篇</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-12-06T00:00:00.000Z" itemprop="datePublished">December 6, 2018</time> · <!-- -->16 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>Authors: 何煦</p></blockquote><p><a href="/en/blog/5w1h-what">上篇</a>作为 Nacos 5W1H 系列文章的开篇，从“What” 讲述了 Nacos 配置管理能帮我们解决的问题：以简单、优雅、高效的方式管理配置，实现配置的动态变更，大大降低运维成本。</p><p>本文将围绕“Where”，讲述 Nacos 配置管理的三个典型的应用场景：</p><ul><li>数据库连接信息</li><li>限流阈值和降级开关</li><li>流量的动态调度</li></ul><h1>数据库连接信息</h1><p>曾经有朋友跟我聊过一个问题，“业务飞速发展，团队越来越大，人员流动也相对频繁起来，怎么才能更好的保证数据的安全性，不被泄露呢？”。他提到这样一个场景，公司创立初期，服务后端的代码都是他一行一行码出来的，当时只有他一个人，后端与数据库的连接配置信息也就直接放置在项目的配置文件中。他使用的是 Spring Boot 框架，配置信息就是存放在 <code>application.properties</code> 中，使用 Spring 的 profile 属性保证不同环境连接不同的数据库。如下所示：</p><p>生产环境：application-prod.properties</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=生产环境的数据库连接地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.username=生产环境的数据库用户账号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.password=生产环境的数据库用户密码</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>开发环境：application-dev.properties</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=开发环境的数据库连接地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.username=开发环境的数据库用户账号</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.password=开发环境的数据库用户密码</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试、预发环境也是类似。这种将数据库连接信息直接放置在配置文件中，跟着项目代码一起通过 Git 管理，的确是有蛮大的数据泄露的风险。试想，一个新来不久的小伙伴，他一当要投入研发工作，有 Git Pull 代码的权限之后，代表他可能就拥有了直接操作线上数据库的权限了。当时的我给他建议可以通过以下几个方面去降低数据风险：</p><ul><li>将数据库连接信息等敏感配置从项目中剥离；</li><li>数据库增加 IP 白名单连接限制；</li><li>最小权限原则：每个账号只配置所必需的权限，避免删表删库等高危操作；</li><li>定期修改数据库账号、密码。</li></ul><p>回想起来，我当时给的建议并没有完全解决他的问题，甚至还带来了其他一些问题。例如，上述的第一点，“将敏感配置从项目剥离”，剥离出来的敏感配置存放到哪里？怎么管理这些配置呢？也许，你会想到，存放到应用部署机器的环境变量或某个文件中。不，一样有风险，说不定哪天开发同学必须得登录上机器排查问题，就有泄露的风险，总之，得尽可能地做到在整个开发流程都不会有任何泄露的风险。应用中可能不只是连接一个数据源，分库分表的情况，不同数据存储（如 MySQL / Redis / Elasticsearch 等）的情况，还有，其他更多敏感配置项，配置数据的增多会给管理带来不便。</p><p>另外，“定期修改数据库账号、密码”，修改后我能怎么方便快捷的下发到所有应用程序中呢？既然是敏感配置，其变更也会带来不少的风险，我需要能先到小量的几台机器验证，保证对业务无影响，我再全部下发到其他所有的机器上去，是否还得有“灰度发布”的功能呢？账号密码修改下发后，应用出现异常，影响到业务了，我要怎么快速地回滚呢？是否还得有“版本控制”、“快速回滚”的功能呢？不是所有的开发同学都有权限能修改敏感配置信息，是否还需要有“权限管控”的功能？对敏感配置的任何操作都应该被记录，是否还需要有“变更审计”的功能呢？</p><p>现在，我有了更好的建议：使用 Nacos 配置管理模块，将敏感配置信息都存放到 Nacos 中。Nacos 配置管理，其中一个立身之本就是为敏感配置保驾护航。它提供上述场景所需的功能，通过命名空间区分不同环境（开发、测试、预发、生产），通过“版本控制”保证变更可追溯，通过“快速回滚”保证错误变更时影响最小，通过的“灰度发布”功能保障配置安全平稳地变更，还有更多更全面功能（权限管控、变更审计等）即将支持。</p><p>那么，怎么将敏感配置项目的配置文件中迁移到 Nacos 中呢？下面以 Spring Boot 连接 MySQL 为例：</p><ol><li>添加依赖</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;nacos-config-spring-boot-starter&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${latest.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意 Spring Boot 1.x 使用 <code>nacos-config-spring-boot-starter</code> 0.1.x 版本，Spring Boot 2.x 使用 <code>nacos-config-spring-boot-starter</code> 0.2.x 版本。</p><ol start="2"><li>在 <code>application.properties</code> 中添加 Nacos 连接配置</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nacos.config.server-addr=127.0.0.1:8848</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里是简单的示例，在实际生产中，还需配置 Nacos 命名空间信息（区分环境）、鉴权信息（如 AccessKey、SecretKey 等，即将支持的权限访问控制）。而 Nacos 配置模块对应的阿里云产品 ACM，借助于 <a href="https://help.aliyun.com/document_detail/72013.html" target="_blank" rel="noopener noreferrer">ECS 实例 RAM 角色</a>，最终能到达连 AccessKey、SecretKey 都不需要填写的目的。</p><ol start="3"><li>添加 <code>@NacosPropertySource</code> 注解</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@NacosPropertySource(dataId = &quot;mysql.properties&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SpringBootMySQLApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(Application.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>在本地启动的 Nacos 控制台上新增 dataId 为 <code>mysql.properties</code> 的配置，配置内容为 MySQL 连接配置信息：</li></ol><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/96000/1543757963981-1a8a4a20-bb01-4b06-a17d-4bd27bb278b5.png" alt="image.png | left | 747x447" class="img_ev3q"></p><p>通过这四个简单的步骤，就将 MySQL 连接信息从原来的 <code>application.properties</code> 迁移到 Nacos 的，让 Nacos 将敏感配置管控起来，大大降低数据泄露的风险。同时，Nacos 配置管理提供的“统一管控”、“版本控制”、“快速回滚”等强大的功能也为其运维管理带来极大的便利。</p><p>完整示例代码请参看：<a href="https://github.com/nacos-group/nacos-examples/tree/master/nacos-spring-boot-example/nacos-spring-boot-config-mysql-example" target="_blank" rel="noopener noreferrer">https://github.com/nacos-group/nacos-examples/tree/master/nacos-spring-boot-example/nacos-spring-boot-config-mysql-example</a></p><h1>限流阈值和降级开关</h1><p>限流、降级，众所周知，是在开发高并发系统过程中需要考虑的两大关键点，是运行时保护系统的两大利器。限流阈值和降级开关，最终是抽象为一个个的配置项，要想实现运行时的动态调整阈值和开关的启停，将这些配置项存放到 Nacos 的配置模块中最适合不过了。</p><p>在今年 8 月的时候，阿里巴巴开源了 Sentinel，以流量为切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性。在阿里巴巴内部，Nacos 跟 Sentinel 就是多年携手相伴，砥砺前行的好机油，为双 11 等各种大促立下了功劳，也为剁手党提供了良好的购物体验。</p><p>下面就以 Sentinel 流控为例，演示如果通过 Nacos 来做到运行时的动态控制流量：</p><ol><li>添加依赖</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;sentinel-core&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${latest.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;sentinel-datasource-extension&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${latest.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;sentinel-datasource-nacos&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${latest.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;version&gt;${latest.version}&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>模拟并发请求</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">final class RunTask implements Runnable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (!stop) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Entry entry = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                entry = SphU.entry(resourceName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // token acquired, means pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                pass.addAndGet(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (BlockException e1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                block.incrementAndGet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (Exception e2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // biz exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                total.incrementAndGet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (entry != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.exit();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Random random2 = new Random();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                TimeUnit.MILLISECONDS.sleep(random2.nextInt(50));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // ignore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>配置 Nacos 连接信息与 dataId 等，并将其设置为 Sentinel 的数据源</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class NacosDynamicFlowDemo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final String KEY = &quot;TestResource&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final String remoteAddress = &quot;localhost&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final String groupId = &quot;DEFAULT_GROUP&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final String dataId = &quot;com.alibaba.nacos.demo.flow.rule&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ReadableDataSource&lt;String, List&lt;FlowRule&gt;&gt; flowRuleDataSource = new NacosDataSource&lt;&gt;(remoteAddress, groupId, dataId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            source -&gt; JSON.parseObject(source, new TypeReference&lt;List&lt;FlowRule&gt;&gt;() {}));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FlowRuleManager.register2Property(flowRuleDataSource.getProperty());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Assume we config: resource is `TestResource`, initial QPS threshold is 5.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FlowQpsRunner runner = new FlowQpsRunner(KEY, 1, 10000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        runner.simulateTraffic();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        runner.tick();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>在本地启动的 Nacos 控制台中新建 dataId 为 <code>com.alibaba.nacos.demo.flow.rule</code> 的流控配置</li></ol><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/96000/1543757996381-9b766bd9-d400-4426-8c65-eb5d17fce5db.png" alt="image.png | left | 747x580" class="img_ev3q"></p><ol start="5"><li>运行 <code>NacosDynamicFlowDemo</code>，你会看到如下标准输出信息</li></ol><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/96000/1543758470779-0a01e695-0ef9-4186-b737-190310eaf457.png" alt="image.png | left | 588x222" class="img_ev3q"></p><ol start="6"><li>再到 Nacos 控制台修改刚刚新建的流控配置，将限流阈值 <code>count</code> 的值修改为 <code>1.0</code>，完整的标准输出信息如下</li></ol><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/96000/1543758536357-bdf7733b-aafc-482b-b0c7-27917434e643.png" alt="image.png | left | 592x392" class="img_ev3q"></p><p>以上示例演示了如何通过 Nacos + Sentinel 实现动态流量控制的能力，核心就是用到了 Nacos 配置模块“动态推送”的能力。原理是 <code>sentinel-datasource-nacos</code> 集成了 <code>nacos-client</code> ，其与 <code>nacos-server</code> 维持着连接，当用户在 Nacos 控制台进行配置变更时，<code>nacos-server</code> 会快速地将该配置的最新内容推送到 <code>nacos-client</code> 中，Sentinel 一拿到最新的流控配置，就转换了流控策略，如示例将流控阈值调整为 1.0，限制为更少的流量进入系统的业务处理流程。</p><p>完整示例代码请参看：<a href="https://github.com/nacos-group/nacos-examples/tree/master/nacos-sentinel-example" target="_blank" rel="noopener noreferrer">https://github.com/nacos-group/nacos-examples/tree/master/nacos-sentinel-example</a></p><h1>流量的动态调度</h1><p>业务发展壮大到一定的规模，单一的集群已经承载不了全部的用户请求，需要将用户的流量分流到不同的集群上。当然，更进一步的方案是：不同的集群位于不同的区域，这样，除了缓解业务处理的压力，也给系统带来容灾的能力。</p><p>比如，某电商系统有 1 亿用户量，将系统的流量按照用户的 ID 进行切分，ID 为 1-1000W 的用户请求分发到区域 A 的集群 a 上，ID 为 10001W-2000W 的用户请求流量分发到区域 B 的集群 b 上，以此类推，最终将所有用户的请求流量打散到 10 个不同区域的集群上，同时，每个集群冗余了一些系统资源。当区域 A 的机房发生不可抗的灾难（如地震）时，我们需要有动态调度流量的能力，最好能秒级得将流量从区域 A 调度到另外可用的区域的集群上。</p><p>这正是 Nacos 配置管理大有作为的地方，将用户 ID 的分片和对应的路由规则存放在 Nacos 的中，配合统一接入层等的组件，就能将流量打散到各个集群上，进而让系统能承载更大的流量，以更好的支撑业务的发展。另外，将其存放与 Nacos 中，也就具备了配置“动态化”的能力，一旦某区域出现基础设施无法及时恢复的问题时，只需在 Nacos 的控制台上修改 ID 分片的路由规则，就能将有问题的区域流量快速切换到其他可用的区域上，保障对业务几乎无损。Nacos 在阿里内部能做到秒级推送到十万级别机器上的推送效率。</p><h1>总结</h1><p>本文为 Nacos 5W1H 系列文章的第二篇，围绕“Where”，讲述了 Nacos 配置管理的几个典型的应用场景：数据库连接信息、限流阈值和降级开关、流量的动态调度。其实还有更多更大胆的应用场景，如“大数据实时计算算法调整”、“异地容灾多活”、“应用业务场景动态推送”等等，可以参看 <a href="https://help.aliyun.com/document_detail/59972.html" target="_blank" rel="noopener noreferrer">Nacos 的阿里云产品 ACM 的使用场景</a> 。Nacos 配置管理模块，将敏感配置收拢管控起来，极大降低数据泄露等风险，并且提供如“动态推送”、“版本控制”、“快速回滚”等功能，保障了敏感配置的变更安全平稳的执行。</p><p>在限流与降级的场景，通过一个示例，为大家演示了如何通过 Nacos + Sentinel 实现流量的动态控制，这也是 Nacos 配置管理的一个十分典型的应用场景。降级也一样，大促高峰期间将某个非关键的系统组件进行关闭，在过了高峰期后再开启，这个也是可以通过 Nacos 的“动态推送”的功能来实现。</p><p>总之，只要系统涉及到了“敏感的配置”、“动态的配置”，都应该考虑将配置放入到 Nacos 中，让 Nacos 管控起来。</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1543892400157-f9dbf212-c835-44be-871c-73166b3b177b.png" alt="屏幕快照 2018-12-03 18.59.52.png | left" class="img_ev3q"></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="使用Nacos实现Spring Cloud Zuul的动态路由"><meta itemprop="keywords" content="nacos"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/dynamic-route-zuul-nacos">使用Nacos实现Spring Cloud Zuul的动态路由</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-11-29T00:00:00.000Z" itemprop="datePublished">November 29, 2018</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>authors:叶志远</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="一前言">一.前言<a href="#一前言" class="hash-link" aria-label="Direct link to 一.前言" title="Direct link to 一.前言">​</a></h3><p>Nacos是阿里巴巴开源的致力于服务发现与管理、动态配置管理，以及动态DNS服务的中间件，目前已发布至0.5.0版本，除了与Spring Cloud更加紧密结合以外，还丧心病狂地支持JDK11。如果您目前的项目碍于Eureka的性能，而又缺乏成本引进Consul，那么Nacos是您最好的选择。好了，回到正题，在上周许进搞了一个<a href="http://xujin.org/sc/gw/gw10/" target="_blank" rel="noopener noreferrer">使用Nacos实现Spring Cloud Gateway的动态路由</a>，让我们直观地感受到了Nacos的无缝接入如丝般顺滑，作为Spring Cloud中网关的始祖Zuul，自然也需要这一贴心赋能。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="二spring-cloud-zuul动态路由实现思路">二.Spring Cloud Zuul动态路由实现思路<a href="#二spring-cloud-zuul动态路由实现思路" class="hash-link" aria-label="Direct link to 二.Spring Cloud Zuul动态路由实现思路" title="Direct link to 二.Spring Cloud Zuul动态路由实现思路">​</a></h3><p>在社区书籍《重新定义Spring Cloud实战》中第8章4小节，详细剖析了Zuul的路由配置表加载以及刷新原理，其大致思想就是重写SimpleRouteLocator类的locateRoutes()方法，同时实现RefreshableRouteLocator接口，方法体引用父类的doRefresh()方法。在书中使用DB作为配置存放的仓库，如今有更为强大的Nacos，只需要将之前读取DB的逻辑换成读取Nacos即可。美中不足的是，由于Nacos还需进一步完善，目前对Spring Cloud中的事件支持还不是很完美，动态刷新只能依靠Zuul的内部逻辑。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="三具体实现">三.具体实现<a href="#三具体实现" class="hash-link" aria-label="Direct link to 三.具体实现" title="Direct link to 三.具体实现">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1在zuul-server中添加nacos的配置">1.在zuul-server中添加Nacos的配置<a href="#1在zuul-server中添加nacos的配置" class="hash-link" aria-label="Direct link to 1.在zuul-server中添加Nacos的配置" title="Direct link to 1.在zuul-server中添加Nacos的配置">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;version&gt;0.4.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2读取nacos配置信息核心代码">2.读取Nacos配置信息核心代码<a href="#2读取nacos配置信息核心代码" class="hash-link" aria-label="Direct link to 2.读取Nacos配置信息核心代码" title="Direct link to 2.读取Nacos配置信息核心代码">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PropertiesAssemble{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Map&lt;String, ZuulRoute&gt; getProperties() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, ZuulRoute&gt; routes = new LinkedHashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;ZuulRouteEntity&gt; results = listenerNacos(&quot;zuul-server&quot;,&quot;zuul_route&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (ZuulRouteEntity result : results) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (StringUtils.isBlank(result.getPath())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    /*|| org.apache.commons.lang3.StringUtils.isBlank(result.getUrl())*/) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ZuulRoute zuulRoute = new ZuulRoute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                BeanUtils.copyProperties(result, zuulRoute);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            routes.put(zuulRoute.getPath(), zuulRoute);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return routes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&lt;ZuulRouteEntity&gt; listenerNacos (String dataId, String group) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            properties.put(PropertyKeyConst.SERVER_ADDR, &quot;localhost:8848&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ConfigService configService = NacosFactory.createConfigService(properties);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String content = configService.getConfig(dataId, group, 5000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;从Nacos返回的配置：&quot; + content);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //注册Nacos配置更新监听器，用于监听触发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            configService.addListener(dataId, group, new Listener()  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                public void receiveConfigInfo(String configInfo) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                    System.out.println(&quot;Nacos更新了！&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                public Executor getExecutor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                    return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return JSONObject.parseArray(content, ZuulRouteEntity.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (NacosException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>目前的demo写得比较简单，直接将Nacos的默认地址与端口写了进来，Nacos对于配置的管理有两个坐标，一是dataId，二是group，本demo中笔者将其分别命名为&quot;zuul-server&quot;,&quot;zuul_route&quot;。</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3zuul动态刷新路由实现">3.Zuul动态刷新路由实现<a href="#3zuul动态刷新路由实现" class="hash-link" aria-label="Direct link to 3.Zuul动态刷新路由实现" title="Direct link to 3.Zuul动态刷新路由实现">​</a></h5><p>这部分可以查看demo地址：<a href="https://github.com/SpringCloud/spring-cloud-zuul-nacos" target="_blank" rel="noopener noreferrer">https://github.com/SpringCloud/spring-cloud-zuul-nacos</a>，具体就不赘述。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="四演示">四.演示<a href="#四演示" class="hash-link" aria-label="Direct link to 四.演示" title="Direct link to 四.演示">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1从nacos-github地址pull源码配置环境">1.从Nacos github地址pull源码，配置环境<a href="#1从nacos-github地址pull源码配置环境" class="hash-link" aria-label="Direct link to 1.从Nacos github地址pull源码，配置环境" title="Direct link to 1.从Nacos github地址pull源码，配置环境">​</a></h5><p><img loading="lazy" src="https://img-blog.csdnimg.cn/20181129002717633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
这里需要在IDEA中添加启动参数-Dnacos.standalone=true
<img loading="lazy" src="https://img-blog.csdnimg.cn/20181129002856286.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2启动nacos配置zuul路由信息">2.启动Nacos，配置Zuul路由信息<a href="#2启动nacos配置zuul路由信息" class="hash-link" aria-label="Direct link to 2.启动Nacos，配置Zuul路由信息" title="Direct link to 2.启动Nacos，配置Zuul路由信息">​</a></h5><p>启动Nacos后，在浏览器输入<a href="http://localhost:8848/nacos/index.html" target="_blank" rel="noopener noreferrer">http://localhost:8848/nacos/index.html</a>便会跳转到如下页面：
<img loading="lazy" src="https://img-blog.csdnimg.cn/2018112900323177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
点击配置列表，单击右侧的+号图标，便可以新增一项配置，由于这里已经添加好了，就直接看信息：
<img loading="lazy" src="https://img-blog.csdnimg.cn/20181129003545464.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3启动zuul-server从nacos加载路由信息测试">3.启动zuul-server，从Nacos加载路由信息测试<a href="#3启动zuul-server从nacos加载路由信息测试" class="hash-link" aria-label="Direct link to 3.启动zuul-server，从Nacos加载路由信息测试" title="Direct link to 3.启动zuul-server，从Nacos加载路由信息测试">​</a></h5><p>启动Zuul后，console中出现如下信息：
<img loading="lazy" src="https://img-blog.csdnimg.cn/20181129003851880.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
在浏览器输入<a href="http://localhost:5555/baidu" target="_blank" rel="noopener noreferrer">http://localhost:5555/baidu</a>,出现如下效果，直接跳转到目标地址：
<img loading="lazy" src="https://img-blog.csdnimg.cn/2018112900414387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
我们现在将Nacos中的配置修改一下，将<a href="http://github.com/Lovnx%E6%8D%A2%E6%88%90http://www.baidu.com%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9B%B4%E6%8E%A5%E5%8F%91%E5%B8%83%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://github.com/Lovnx换成http://www.baidu.com，修改后直接发布：</a>
<img loading="lazy" src="https://img-blog.csdnimg.cn/20181129004408166.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
我们会在console看到：
<img loading="lazy" src="https://img-blog.csdnimg.cn/20181129004524375.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q">
在浏览器输入<a href="http://localhost:5555/baidu" target="_blank" rel="noopener noreferrer">http://localhost:5555/baidu</a>,出现如下效果：
<img loading="lazy" src="https://img-blog.csdnimg.cn/20181129004810756.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3JpY2tpeWVhdA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-------------------demo源码"><a href="https://github.com/SpringCloud/spring-cloud-zuul-nacos" target="_blank" rel="noopener noreferrer">-------------------&gt;&gt;&gt;DEMO源码</a><a href="#-------------------demo源码" class="hash-link" aria-label="Direct link to -------------------demo源码" title="Direct link to -------------------demo源码">​</a></h2></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Nacos 0.6版本发布，支持Dubbo生态并且支持Docker部署"><meta itemprop="keywords" content="nacos0.6,dubbo,docker"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/nacos0.6">Nacos 0.6版本发布，支持Dubbo生态并且支持Docker部署</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-11-29T00:00:00.000Z" itemprop="datePublished">November 29, 2018</time> · <!-- -->7 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>Authors: 马昕曦、张龙、邢学超</p></blockquote><p> Alibaba Microservices Open Source Project<a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Dubbo Nacos</a>released this week <strong>v0.6</strong> version, which mainly supports Dubbo&#x27;s service registration and discovery and configuration management, supports docker deployment, provides an official docker image, optimizes the international framework of Nacos console, and optimizes Nacos&#x27;s integration testing efficiency.</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/11189/1544689744102-fd00fec6-ca80-4c0c-9b0d-538f17279963.png" alt="image.png | left | 747x290" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thousands-of-calls-come-out-dubbos-registration-center-and-configuration-center">Thousands of calls come out, Dubbo&#x27;s registration center and configuration center<a href="#thousands-of-calls-come-out-dubbos-registration-center-and-configuration-center" class="hash-link" aria-label="Direct link to Thousands of calls come out, Dubbo&#x27;s registration center and configuration center" title="Direct link to Thousands of calls come out, Dubbo&#x27;s registration center and configuration center">​</a></h2><p><strong>Nacos</strong> Starting with the <strong>v0.6</strong> version, the <strong>Dubbo</strong> registration center and configuration center are supported. Also, as Alibaba&#x27;s open source weight-level product, the two products are inextricably linked within the internal Alibaba Group.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo-service-framework">Dubbo Service Framework<a href="#dubbo-service-framework" class="hash-link" aria-label="Direct link to Dubbo Service Framework" title="Direct link to Dubbo Service Framework">​</a></h3><p>As the rpc service framework, on the one hand, it pays attention to the extremely short delay rt, which ensures that the overall call is efficient, and on the other hand, guarantees a good user experience, ensuring user comfort and good scalability. Dubbo is very good in both aspects, and is widely used in the industry because of its good expansion. The popularity and popularity of Dubbo is evident through the 2w+ github warehouse star attention.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nacos-and-dubbo-are-the-same-genes">Nacos and Dubbo are the same genes<a href="#nacos-and-dubbo-are-the-same-genes" class="hash-link" aria-label="Direct link to Nacos and Dubbo are the same genes" title="Direct link to Nacos and Dubbo are the same genes">​</a></h3><p>But there is such an efficient rpc service framework under Alibaba&#x27;s technology system, but what is supporting Alibaba&#x27;s huge service cluster? It is well known that Alibaba Group has a terrible cluster size. Every year, Alibaba Group&#x27;s Tmall Double 11 Global Shopping Carnival will have a rid of the chin trading scale. In 2018, the Double 11 will carry 213.5 billion in sales. But as a technician, the biggest concern is the peak. If careful practitioners should see an indicator, in 2018 Tmall carried a peak of transaction creation of 491,000 pens per second. For example, Beijing Bird&#x27;s Nest Stadium has a maximum carrying capacity of 91,000 people, and 49.1w transactions per second, which means that the full audience of the five Bird&#x27;s Nest stadiums pushes the shopping cart and simultaneously clears the settlement of Tmall Taobao in one second. Taiwan, this pressure can be imagined. But behind the hosting of such a large-scale service cluster, and Alibaba Dubbo&#x27;s internal use framework HSF, corresponding to ConfigServer, and this is one of Nacos&#x27; predecessors. The 0.6 version released by Nacos is the perfect integration with Dubbo. It also announces that Alibaba&#x27;s experience in large-scale clusters will be shared with Nacos, Dubbo, Sentinel and other contributions to the open source community.</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/11189/1544696219150-b786e8fe-af7d-4e29-9c32-03b051c6db3d.png" alt="image.png | left | 747x413" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo-fusion-nacos">Dubbo Fusion Nacos<a href="#dubbo-fusion-nacos" class="hash-link" aria-label="Direct link to Dubbo Fusion Nacos" title="Direct link to Dubbo Fusion Nacos">​</a></h3><p>Nacos is an important registry infrastructure in the Dubbo ecosystem, with <a href="https://github.com/dubbo/dubbo-registry-nacos" target="_blank" rel="noopener noreferrer">dubbo-registry-nacos</a> being the bridge for Dubbo&#x27;s Fusion Nacos registry, based on Dubbo Powerful <a href="http://dubbo.apache.org/en-us/docs/dev/impls/registry.html" target="_blank" rel="noopener noreferrer">Registry SPI</a> and Nacos Naming services provide real-time service registration and discovery. Currently <a href="https://github.com/dubbo/dubbo-registry-nacos" target="_blank" rel="noopener noreferrer">dubbo-registry-nacos</a> is in the preview stage, the latest release is <code>0.0.2</code>, the latest Dubbo and Dubbo OPS have been tested, recommended Developers use the latest Dubbo <code>2.6.5</code> and Nacos <code>0.6.1</code> to ensure the best experience. If you are currently using ZooKeeper or Redis as your registry, the migration to Nacos is also very simple, with Zookeeper as an example:</p><ul><li>Scene 1: Externalization configuration</li></ul><p>Pre-adjustment configuration:</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## Zookeeper registry address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dubbo.registry.address = zookeeper://127.0.0.1:2181</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Adjusted configuration:</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## Nacos registry address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dubbo.registry.address = nacos://127.0.0.1:8848</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Scenario 2: XML configuration driver</li></ul><p>Pre-adjustment configuration:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Use Zookeeper Registration Center --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">dubbo:</span><span class="token tag" style="color:#00009f">registry</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">address</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">zookeeper://127.0.0.1:2181</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Adjusted configuration:</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Use Nacos Registration Center --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">dubbo:</span><span class="token tag" style="color:#00009f">registry</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">address</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">nacos://127.0.0.1:8848</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the adjustment is complete, make sure the Nacos Server is up and restart your Dubbo app, then you will see the registration information in the Nacos console Service List:</p><p><a href="https://cdn.nlark.com/lark/0/2018/png/11189/1544694815618-d316c463-701a-4095-a7d4-30bb0ec941b6.png" target="_blank" rel="noopener noreferrer">image-20181213174408269-4694248.png | left | 747x132</a></p><p>If you are interested in integrating Dubbo and Nacos, you may wish to visit the project homepage for more details at:</p><ul><li>Dubbo Nacos Registry: <a href="https://github.com/dubbo/dubbo-registry-nacos" target="_blank" rel="noopener noreferrer">https://github.com/dubbo/dubbo-registry-nacos</a></li><li>Apache Dubbo: <a href="https://github.com/apache/incubator-dubbo" target="_blank" rel="noopener noreferrer">https://github.com/apache/incubator-dubbo</a></li></ul><p>If you encounter any problems and have any suggestions during the process, please visit <!-- -->[https://github.com/dubbo/dubbo-registry-nacos/issues]<!-- -->(<a href="https://github.com/dubbo/dubbo" target="_blank" rel="noopener noreferrer">https://github.com/dubbo/dubbo</a> -registry-nacos/issues) for discussion.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="containers-are-popular-nacos-supports-docker-containerization">Containers are popular, Nacos supports Docker containerization<a href="#containers-are-popular-nacos-supports-docker-containerization" class="hash-link" aria-label="Direct link to Containers are popular, Nacos supports Docker containerization" title="Direct link to Containers are popular, Nacos supports Docker containerization">​</a></h2><p>Today, when containers are popular, support for containerization has become a necessity, and Docker has chosen as the container for most people. Nacos announced in v0.6.
Support for Docker deployments, and provide an official image, and will support k8s deployment in the next few releases.</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/11189/1544696801216-88a41d17-d101-4546-acfd-0aba38c6fa81.png" alt="image.png | left | 747x285" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-deploy-via-docker">How to deploy via Docker<a href="#how-to-deploy-via-docker" class="hash-link" aria-label="Direct link to How to deploy via Docker" title="Direct link to How to deploy via Docker">​</a></h3><p>Local needs to make sure that Docker has been followed. If it is not installed, please refer to <a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/install/</a>. After installation, you can quickly pull the image from the remote and pick up a stand-alone version of Nacos to experience it.
Simple and rude, run the following command:</p><div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Docker run --name nacos-standalone -e MODE=standalone -p 8848:8848 nacos/nacos-server:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The operation test is as follows:</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/gif/11189/1544701054438-de9785c4-b9ab-46dc-a162-d22e1419a172.gif" alt="Peek 2018-12-13 11-43.gif | left | 747x407" class="img_ev3q"></p><p>Another application, <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">docker-compose</a> orchestration, you can refer to the following command:</p><ol><li>git clone the project and go to the project root directory</li></ol><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Git clone https://github.com/nacos-group/nacos-docker.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cd nacos-docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Start</li></ol><ul><li>Stand-alone start</li></ul><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Docker-compose -f example/standalone.yaml up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Cluster boot</li></ul><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Docker-compose -f example/cluster-hostname.yaml up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At this point your Nacos is up and you can experience the Nacos feature by visiting <a href="http://localhost:8848/nacos/index.html" target="_blank" rel="noopener noreferrer">http://localhost:8848/nacos/index.html</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-management-function-experience">Configuration Management Function Experience<a href="#configuration-management-function-experience" class="hash-link" aria-label="Direct link to Configuration Management Function Experience" title="Direct link to Configuration Management Function Experience">​</a></h4><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/gif/11189/1544496461571-69f38431-6452-4ddd-8211-c2da28f2ebcf.gif" alt="Peek 2018-12-11 10-11.gif | left | 747x351" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-discovery-feature-experience">Service Discovery Feature Experience<a href="#service-discovery-feature-experience" class="hash-link" aria-label="Direct link to Service Discovery Feature Experience" title="Direct link to Service Discovery Feature Experience">​</a></h4><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/gif/11189/1544521437636-674de542-1873-426b-a2dd-da8265bc267f.gif" alt="Peek 2018-12-11 11-11.gif | left | 747x351" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-booming-nacos-community">The booming Nacos community<a href="#the-booming-nacos-community" class="hash-link" aria-label="Direct link to The booming Nacos community" title="Direct link to The booming Nacos community">​</a></h2><blockquote><p>DISS is cheap, show me your hand
More important than the spit is to take the handle and participate in the community to develop Nacos</p></blockquote><ul><li>Follow the user as a user and join the Nacos community</li></ul><p>The Nacos community is booming. As of the date of publication, Nacos has five WeChat groups in just a few months, four of which are full, one QQ group, one nail group, and nearly 3,000 people who care about Nacos. In the Nacos group, we will learn from the &quot;Tao (base) friends&quot;, exchange experiences, recruit friends, grab red envelopes... and enjoy it.</p><p>To join the Nacos WeChat community, you can use the WeChat QR code of <strong>“超哥”</strong> below to let <strong>“超哥”</strong> help you pull in “Nacos Community WeChat Exchange Group”</p><p><img loading="lazy" src="https://cdn.yuque.com/lark/0/2018/png/15914/1530077965587-8f4e3100-bdd4-469a-9ea0-7af7061bc9ef.png" alt="Screen Shot 2018-06-27 at 13.39.09.png | left" class="img_ev3q"></p><ul><li>Join the Nacos community as a code contributor</li></ul><p>From the development of Nacos users to contributors, and the Nacos development team is indeed growing, from the beginning of only four code contributions to the current 24, with <strong>Alibaba</strong> other team members such as <strong>@小马哥</strong>, <strong>虎牙直播__</strong>@张波__ <strong>@周健</strong> Team et al, <!-- -->[nacos-docker-k8s]<!-- -->(<a href="https://github.com/nacos-group" target="_blank" rel="noopener noreferrer">https://github.com/nacos-group</a> /nacos-docker) Contributors <strong>@张龙</strong>, the main contributors to the front end are hungry <strong>@王彦民</strong>, the founder of Spring Cloud Chinese community <strong>@许进</strong> etc. The power of the Nacos community will grow stronger in the future.</p><p>The community is also planning to add a team introduction page to Nacos&#x27;s official website <a href="http://nacos.io" target="_blank" rel="noopener noreferrer">nacos.io</a> at the right time, and everyone will be officially announced. Welcome everyone to join the Nacos community and contribute to the community. . In the words of Apache, <strong>&quot;Community is higher than the code&quot;!</strong></p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1542704700864-a9d54856-9bf6-4176-b449-c13fa02c5800.png" alt="屏幕快照 2018-11-20 17.04.45.png | left" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="newcomer-moments---what-is-nacos">Newcomer Moments - &quot;What is Nacos?&quot;<a href="#newcomer-moments---what-is-nacos" class="hash-link" aria-label="Direct link to Newcomer Moments - &quot;What is Nacos?&quot;" title="Direct link to Newcomer Moments - &quot;What is Nacos?&quot;">​</a></h2><blockquote><p>I don&#x27;t know what Nacos is? It doesn&#x27;t matter, star on the github and say hello to the program brothers!!</p></blockquote><p><a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Nacos</a> is Alibaba&#x27;s new open source project in July. Nacos&#x27;s main vision is to provide easy-to-use <code>Dynamic Service Discovery</code>, <code>Service Configuration Management</code>, The infrastructure of &quot;Service Sharing and Management&quot; helps users better build, deliver and manage their own microservices platforms in the cloud&#x27;s native era.</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1532436633419-08a42307-7fb7-4d51-9062-fecc3868613b.png" alt="Screen Shot 2018-07-24 at 19.27.28.png | left" class="img_ev3q"></p><p>Github project address is <a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">here</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-open-source-project-information-related-to-nacos">More open source project information related to Nacos<a href="#more-open-source-project-information-related-to-nacos" class="hash-link" aria-label="Direct link to More open source project information related to Nacos" title="Direct link to More open source project information related to Nacos">​</a></h2><ul><li><a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Nacos</a></li><li><a href="https://github.com/dubbo/dubbo-registry-nacos" target="_blank" rel="noopener noreferrer">Dubbo Registry Nacos</a></li><li><a href="https://github.com/nacos-group/nacos-coredns-plugin" target="_blank" rel="noopener noreferrer">Nacos DNS-F</a></li><li><a href="https://github.com/nacos-group/nacos-docker" target="_blank" rel="noopener noreferrer">Nacos Docker</a></li><li><a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer">Nacos Spring Project</a></li><li><a href="https://github.com/nacos-group/nacos-spring-boot-project" target="_blank" rel="noopener noreferrer">Nacos Spring Boot</a></li><li><a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba" target="_blank" rel="noopener noreferrer">Spring Cloud Alibaba</a></li><li><a href="http://dubbo.io" target="_blank" rel="noopener noreferrer">Dubbo</a></li><li><a href="https://github.com/alibaba/Sentinel" target="_blank" rel="noopener noreferrer">Sentinel</a></li><li><a href="https://projects.spring.io/spring-cloud/" target="_blank" rel="noopener noreferrer">Spring Cloud</a></li><li><a href="https://github.com/Nepxion/Discovery" target="_blank" rel="noopener noreferrer">Nepxion Discovery</a></li><li><a href="https://github.com/SpringCloud/spring-cloud-gateway-nacos" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway Nacos</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Nacos0.5发布，支持DNS-based Service Discovery，JAVA 11"><meta itemprop="keywords" content="nacos0.5,DNS-based Service Discovery,JAVA 11"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/nacos0.5">Nacos0.5发布，支持DNS-based Service Discovery，JAVA 11</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-11-25T00:00:00.000Z" itemprop="datePublished">November 25, 2018</time> · <!-- -->24 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>Authors: 坤宇，敦谷</p></blockquote><p>阿里巴巴微服务开源项目<a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Dubbo Nacos</a>于本周发布 <strong>v0.5.0</strong> 版本，该版本主要在 DNS-based Service Discovery，支持 TTL，支持 Java 11，优化Nacos产品用户体验，与Spring Cloud Gateway的集成等方面做了演进。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="发布-dns-f支持-dns-based-service-discovery">发布 DNS-F，支持 DNS-based Service Discovery<a href="#发布-dns-f支持-dns-based-service-discovery" class="hash-link" aria-label="Direct link to 发布 DNS-F，支持 DNS-based Service Discovery" title="Direct link to 发布 DNS-F，支持 DNS-based Service Discovery">​</a></h2><p>为了进一步降低微服务多语言生态、异构系统、Kubernetes体系的服务注册与发现的实现成本，Nacos v0.5.0 发布了一款基于CoreDNS的 <strong>DNS-F</strong>客户端，通过 <strong>DNS-F</strong> 支持将注册在Nacos上的服务以DNS域名的方式暴露出接入点，让三方应用方便的查阅、发现与集成。</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1542705469700-1e4ffc48-9632-4495-a8dd-c3dc8647b345.png" alt="屏幕快照 2018-11-20 17.17.38.png" class="img_ev3q"> </p><p><strong>DNS-F</strong> 不同于Nacos的 Client SDK/API 服务发现模式，<strong>DNS-F</strong> 提供独立于应用进程的Agent, 通过拦截并代理主机应用的域名解析请求，让Nacos处理服务发现对应域名的数据动态推送更新、健康检查、异常节点下线等、同时Nacos UI提供统一的服务发现域名管理视图 (UI域名管理部分，v0.5.0暂未开放)。</p><p>在Nacos的立项之初，提供动态的基于 DNS 协议的服务发现能力就是其核心的三大功能之一，之所以Nacos要提供DNS-SD，主要旨在帮助用户解决三个方面的问题:</p><ul><li><strong>为Kubernetes以及应用的服务发现提供统一解决方案</strong></li></ul><p>应用微服务体系（如Spring Cloud）+ Kubernetes已经逐渐成为新的组合，通过前者解决应用架构问题，通过后者解决微服务部署及运维的成本问题，但是在服务发现这一块，毫无疑问，Kubernetes体系内的服务发现方案无论是SkyDNS，KubeDNS还是CoreDNS，一直都是基于DNS的，但是像Spring Cloud则是基于像Eureka,zookeeper这样的服务发现方案，这种方案的异化和沟鸿给用户统一服务发现和服务管理方案带来了巨大的挑战。</p><p>Nacos DNS-F 目前开源提供的版本，是在CoreDNS的基础上提供了Nacos的plugin <a href="https://github.com/nacos-group/nacos-coredns-plugin" target="_blank" rel="noopener noreferrer">nacos-coredns-plugin</a>, 这样初步打通了CoreDNS与Nacos服务, 这种实现方式为未来Nacos进一步打通Kubernetes集群内部的服务发现与应用服务发现（如Spring Cloud)提供了通路，为Nacos在未来帮助应用以统一的视图管理Kubernetes内部及应用自身的服务及域名提供了基础，从而帮助用户简化基于kubernetes体系的微服务平台的构建与管理。</p><ul><li><strong>帮助用户消除耦合到厂商私有服务发现API上的风险</strong></li></ul><p>很不幸的说，到目前为止，服务发现迄今仍然没有标准协议，市面上的服务发现的解决方案有很多，仅在Java Spring生态中，就有zookeeper，consul，eureka，nacos等解决方案可以用，更不用说在其它的语言和框架中了，Nacos通过提供 <strong>DNS-F</strong>，可以让用户更容易地实现以DNS协议为基础的服务发现（即<strong>DNS-SD</strong>），而DNS协议是一个成熟的标准协议，基于DNS做服务发现，不仅可以有效的帮助用户消除耦合到厂商私有服务发现API上的风险，方便未来的迁移，也有利于服务提供方以更标准的和易理解的方式暴露自己的服务，从而更易于被不同的应用方发现和集成。</p><ul><li><strong>支持异构系统及多语言生态的服务发现</strong></li></ul><p>在一个中大型企业中，传统企业架构要升级为云原生微服务架构，遗留系统和异构系统的服务注册与发现无疑是必须首要解决的问题。另外采用微服务架构的一大承诺收益点也在于每个微服务本身可以独立选择更合适的语言栈，但是到目前为止没有个一个服务发现产品能提供各种语言客户端SDK的100%的完全覆盖，以zookeeper为例子，zookeeper质量比较好的客户端仅有java和c的客户端，那么非java和c两个语言体系的服务和系统就很难通过zookeeper来注册与发现，而DNS天然是各种语言都支持的，一般使用DNS做服务发现对应用的侵入非常的小，非常适合遗留应用或者异构应用往新的微服务平台上的迁移。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="阿里巴巴基于dns-f的dns-sd生产实践">阿里巴巴基于DNS-F的DNS-SD生产实践<a href="#阿里巴巴基于dns-f的dns-sd生产实践" class="hash-link" aria-label="Direct link to 阿里巴巴基于DNS-F的DNS-SD生产实践" title="Direct link to 阿里巴巴基于DNS-F的DNS-SD生产实践">​</a></h3><p>以阿里巴巴为例，基于<strong>DNS-F</strong>模式的服务发现已经是阿里巴巴生产环境中的最重要服务发现方式之一，不同于外界对于阿里巴巴的印象，在像阿里妈妈，高德，优酷，搜索等这样的业务中，存在大量的重要的非Java语言体系的业务系统提供的服务，而基于DNS-F的DNS-SD解决方案，则在发现，打通和勾连这些异构服务的过程中起到了举足轻重的作用。</p><p>距离阿里巴巴内部发布的第一个python版本的<strong>DNS-F</strong>客户端已经过去<strong>5</strong>个年头，python版本的<strong>DNS-F</strong>客户端在生产上的整体装机使用量，对所有VIPServer各语言客户端的占比已经超过 <strong>1/3</strong>,可见其在内部应用之广泛，而不用绑定在私有的VIPServer API上, 业务从LVS/VIP，SLB等网关式(Server-based SD)服务发现方案迁移过来时对业务侵入小，也是众多业务线愿意优先考虑<strong>DNS-F</strong>客户端的首要原因。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dns-协议需要继续演进">DNS 协议需要继续演进<a href="#dns-协议需要继续演进" class="hash-link" aria-label="Direct link to DNS 协议需要继续演进" title="Direct link to DNS 协议需要继续演进">​</a></h3><p>DNS协议本身是为www而生，并非为服务发现而生，所以在协议上，用在服务发现场景下DNS依然有不少的小瑕疵需要在未来从协议层面解决，比如DNS缓存TTL收敛的问题，比如操作系统以及各语言对SRV Record字段的支持问题,DNS包大小限制的问题等等，但随着Kubernetes以及微服务体系在各行业的深入应用，可以说DNS协议已经有为服务发现场景做进一步向前演进的必要，这方面阿里巴巴&amp;<strong>Nacos</strong>会做持续的探索和推进。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="支持-java-11">支持 Java 11<a href="#支持-java-11" class="hash-link" aria-label="Direct link to 支持 Java 11" title="Direct link to 支持 Java 11">​</a></h2><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1542708832647-def4c40d-273c-4515-8ee9-27fd9add5b03.png" alt="屏幕快照 2018-11-20 18.13.36.png" class="img_ev3q"> </p><p>9月25日，Oracle 官方宣布 Java 11正式发布，不同于Java 9以及10，这是继 Java 8 之后的首个长期支持版本，Java 11 在诸如 ZGC，TLS 1.3，新的算法密钥协议，Lambda局部变量语法支持，Standardize HTTP Client API等不少方面做了改进，确实值得关注。</p><p>关于 Nacos 支持 Java 11, 这里有一个有趣的花絮,本来Nacos没有计划在近期的版本支持Java 11,因为Nacos团队考虑到 Java 8 依然是生产上的主流(参见<a href="https://res.cloudinary.com/snyk/image/upload/v1539774333/blog/jvm-ecosystem-report-2018.pdf" target="_blank" rel="noopener noreferrer">JVM生态报告</a>, 报告显示 <strong>79%</strong> 的 Java 开发者使用 Java 8 作为生产环境的主要平台), 但是Spring Cloud 大神 <strong>@Josh Long</strong> 在准备尝试和给全世界演示 Nacos 的时候，居然在 Java 11 上跑不起来，于是他毅然的给Nacos提了个 issue <a href="https://github.com/alibaba/nacos/issues/214" target="_blank" rel="noopener noreferrer">Please support Java 11</a>.</p><blockquote><p>划重点~ <strong>github上给Nacos提issue是实现你的需求和想法的最佳手段!</strong></p></blockquote><p>Nacos支持Java 11, 主要是指2个方面的支持</p><ul><li>Nacos 支持运行在Java 11上</li><li>将Nacos源码开发及构建环境升级到Java 11</li></ul><p>现在Nacos的状态是2方面都已经支持 Java 11。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用nacos实现spring-cloud-gateway的动态路由">使用Nacos实现Spring Cloud Gateway的动态路由<a href="#使用nacos实现spring-cloud-gateway的动态路由" class="hash-link" aria-label="Direct link to 使用Nacos实现Spring Cloud Gateway的动态路由" title="Direct link to 使用Nacos实现Spring Cloud Gateway的动态路由">​</a></h2><p>要实现微服务架构，微服务网关必不可少，Nacos 社区目前正在努力跟 Spring Cloud 的微服务网关做更多的打通与集成，Spring Cloud 中文社区创建者,《重新定义Spring Cloud实战》的作者 <strong>@许进</strong> 与近期贡献了如何基于Spring Cloud Gateway与Nacos实现动态路由能力的示例，<a href="https://github.com/SpringCloud/spring-cloud-gateway-nacos" target="_blank" rel="noopener noreferrer">github 地址在这里</a>，毫无疑问，Spring Cloud Gateway作为所有请求流量的入口，在实际生产环境中为了保证高可靠和高可用，尽量避免重启,需要实现Spring Cloud Gateway 动态路由配置，等到这块足够成熟，会将其包含在Nacos的官方推荐实现中。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ttl--health-status-aggregation">TTL &amp; Health Status Aggregation<a href="#ttl--health-status-aggregation" class="hash-link" aria-label="Direct link to TTL &amp; Health Status Aggregation" title="Direct link to TTL &amp; Health Status Aggregation">​</a></h2><p>在Nacos之前的几个版本中，用户往往会在使用过程中产生疑惑，为什么注册的实例已经下线(宕掉)了，但是依然可以在Nacos控制台上看到实例的信息。这源于SpringCloud以及Dubbo等服务体系中，Eureka或者Zookeeper都有自动注销实例的能力，而且将自动注销作为注册中心的默认行为。但其实当服务的实例下线(宕掉)之后，注册中心有两种可能的行为，一个是将这个实例从服务下的实例列表中剔除出去，一个是保留该实例，只将实例状态置为不健康。Eureka和Zookeeper等注册中心，其实也支持持久化的实例注册，而Nacos只是将这种持久化的注册设成了默认的行为。</p><p>Nacos的服务发现模块，是基于内部的VIPServer演化而来。在VIPServer的主要场景中，服务是以域名的方式通过控制台注册到VIPServer的，并且VIPServer非常注重服务级别的元数据信息的定义带来的灵活“软负载”流量调度的能力，所以首要选择的是服务及实例的元数据的持久性存储，弱化了服务的提供端持续向VIPServer服务端发送心跳的能力，所以前期并没有将VIPServer 上报和汇聚实例健康状态的功能放出来。之前版本的服务实例的健康检查，必须由VIPServer服务端来主动发起来完成。但是如Nacos开源之初规划的那样，Nacos会同时支持两种模式</p><blockquote><p>对于复杂的云环境和网络拓扑环境中（如 VPC、边缘网络等）服务的健康检查，Nacos 提供了心跳上报模式和服务端主动探测2种健康检查模式。</p></blockquote><p>所以随着Nacos 0.5.0 版本的发布，我们很高兴的宣布，Nacos已经正式支持基于TTL的服务实例自动注销功能。这个功能一部分是响应社区关于TTL功能的需求，更重要的一部分，这也是Nacos服务发现自然演进的一个方向。</p><p>从 0.5.0 版本开始，用户通过客户端SDK注册的实例，将默认开启TTL功能，实例会默认每5秒向服务端发送一次心跳，如果Nacos服务端15秒内没有收到实例的心跳，则会将实例置为不健康，如果30秒没有收到心跳，则会将直接将实例删除。Nacos的TTL功能，补充了Nacos作为注册中心在处理实例下线的另一种行为，通过灵活可动态配置的参数，用户还可以根据实际的应用场景任意切换使用这两种行为中的一种。</p><p>Nacos的TTL功能虽然还处在实验性质，主要有以下特色：</p><ul><li><strong>进一步无缝融入SpringCloud生态和Dubbo生态</strong></li></ul><p>Nacos在最初的规划中，就已经计划能够帮助存量用户做无缝平滑迁移。而无缝平滑迁移除了注册中心的功能的完整性，体验、性能、一些重要的认知也能够从老注册中心接续过来。例如Eureka作为Spring Cloud里的主流注册中心，其默认行为就是会在没有收到实例心跳90秒后，将实例自动注销。而 Dubbo 里用的比较多的Zookeeper，也会使用临时节点，依托于Session超时时间来实现TTL功能。这这两种场景中，服务实例的注册基本都是通过服务提供端(Provider)使用注册中心客户端来完成的。Nacos目前已经提供了Spring Cloud体系的服务发现的完整解决方案，同时对Dubbo的适配和支持也会在最近的版本中释放出来。</p><ul><li><strong>服务级别&quot;元数据(metadata)&quot;不会自动注销</strong></li></ul><p>Nacos支持服务、集群和实例多级别的元数据信息，与服务实例可以被自动注销相对的，服务本身的元数据信息不能随着服务的下线而丢失,因为这些元数据通常是在创建服务时有人为设定上去的（例如负载均衡策略，权重规则，保护阈值等）。这意味着同一个服务的实例的上上下下，再注册上来的时候，应该依然保有服务原来设定的相关的元数据信息。</p><p>在Eureka或者Consul中，由于并不支持服务级别设定任何元信息，因此当实例都临时下线时，整个服务也就查询不到任何存在过的痕迹了。而服务级别的元信息作为Nacos的一个非常重要的特色功能，未来会基于此开放一系列流量控制类的特色功能，都决定了Nacos服务本身的元数据信息不能随着服务的下线而丢失，另一方面，在客户端注册实例时，不允许提交服务级别的元信息，这样也保证了单个实例的注册或者注销不会影响服务级别的配置。我们提供了控制台来对服务元数据进行便捷的创建和编辑。</p><ul><li><strong>将HSF的注册中心ConfigServer融入Nacos</strong></li></ul><p>在阿里巴巴集团内部，著名的HSF的注册中心ConfigServer支持的就是长连接注册模式(renew&amp;TTL)，因此当长连接断开时，自然而然的就会将实例注销掉。为了支持未来将HSF一些优秀的特性迁移和输出到Dubbo上，Nacos会逐渐将ConfigServer的核心能力融入到Nacos当中，而TTL则也是这个事情的基础。</p><p>而同时，Nacos非常看中产品在云上的适用性，在公有云上，因为用户往往注册到注册中心的IP是一个VPC的外部IP，因为公有云安全策略的限制，注册中心一般是不允许主动发起到VPC内的连接来做健康检查的，只能通过客户端上报心跳的模式来检查健康状态，也只有在客户端上报的模式下，才能启用自动注销功能。Nacos此次的TTL功能，很好的衔接了公有云和内部ConfigServer输出的需求，为后续的融合做好了初步的准备。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-cloud-for-alibaba-with-nacos">Spring Cloud for Alibaba with Nacos<a href="#spring-cloud-for-alibaba-with-nacos" class="hash-link" aria-label="Direct link to Spring Cloud for Alibaba with Nacos" title="Direct link to Spring Cloud for Alibaba with Nacos">​</a></h2><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1542704490654-b70dcbb2-7bfe-433a-9497-303ba817f860.png" alt="屏幕快照 2018-11-20 16.19.27.png" class="img_ev3q"> </p><p>就像 SpringOne Platform 2018 大会上 Spring 开发者 @Roy Clarkson 和 @Ollie Hughes 在 <strong>《Cloud-Native Java with Spring Cloud Services》</strong> (<a href="https://www.youtube.com/watch?v=0Yh-cebFkN4&amp;index=108&amp;list=PLAdzTan_eSPQsR_aqYBQxpYTEQZnjhTN6" target="_blank" rel="noopener noreferrer">YouTube视频地址</a>) 演讲中阐述的那样，采用微服务设计模式，首要的就是选择 “External Configuration” “Service Registry” “Circuite Breaker” 的实现，而 Spring Cloud for Alibaba 这个项目则旨在通过将阿里巴巴在服务化以及阿里云上基于Aliware支撑各行业的微服务产品打包在一个stack里，给你提供开发支撑大规模微服务应用系统的一站式解决方案, 正如项目所述:</p><blockquote><p>“The Spring Cloud Alibaba project, consisting of Alibaba’s open-source components and several Alibaba Cloud products, aims to implement and expose well known Spring Framework patterns and abstractions to bring the benefits of Spring Boot and Spring Cloud to Java developers using Alibaba products.”</p></blockquote><p>随着 <a href="https://spring.io/blog/2018/10/30/spring-cloud-for-alibaba-0-2-0-released" target="_blank" rel="noopener noreferrer">Spring Cloud for Alibaba 0.2.0 的发布</a>，Nacos Configuration, Nacos Service Discovery 和 Sentinel Circuite Breaker 都已一网而聚之。</p><p>想了解如何在Spring Cloud中快速开始使用 Nacos 做配置中心和服务发现，可以点击<a href="https://nacos.io/zh-cn/docs/quick-start-spring-cloud.html" target="_blank" rel="noopener noreferrer">这里</a>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="持续优化用户体验">持续优化用户体验<a href="#持续优化用户体验" class="hash-link" aria-label="Direct link to 持续优化用户体验" title="Direct link to 持续优化用户体验">​</a></h2><p>正如Nacos团队在开源立项之初发下的宏愿，Nacos希望通过未来团队的持续努力，能给Nacos贴上希望的标签，而追求产品的<strong>极致易用性</strong>永远是Nacos团队的核心关注点之一，Nacos 0.5.0 版本就社区近期反馈较多的的一些体验问题做了积极的修复和优化，这其中包括前端UI的优化，启动状态信息展示的优化,性能调优等等，</p><p><a href="https://github.com/alibaba/nacos/issues/177" target="_blank" rel="noopener noreferrer">#177</a> Console supports registering new empty service and delete empty service.
<a href="https://github.com/alibaba/nacos/issues/222" target="_blank" rel="noopener noreferrer">#222</a> print more nacos server start status info in start.log.
<a href="https://github.com/alibaba/nacos/issues/251" target="_blank" rel="noopener noreferrer">#251</a> Console Editor Optimization.
<a href="https://github.com/alibaba/nacos/issues/254" target="_blank" rel="noopener noreferrer">#254</a> DataId and group are required in historical version and listener query.
<a href="https://github.com/alibaba/nacos/issues/258" target="_blank" rel="noopener noreferrer">#258</a> Remove the Balloon of DataId/Group.</p><p>更多的优化和release信息见 <a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">nacos github</a></p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1542708581826-76439cb4-9cb8-49d1-af0d-790bdd2249bd.png" alt="屏幕快照 2018-11-20 18.09.08.png" class="img_ev3q"> </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="蓬勃发展的-nacos-社区">蓬勃发展的 Nacos 社区<a href="#蓬勃发展的-nacos-社区" class="hash-link" aria-label="Direct link to 蓬勃发展的 Nacos 社区" title="Direct link to 蓬勃发展的 Nacos 社区">​</a></h2><blockquote><p>DISS is cheap, show me your hand
比吐槽更重要的是搭把手，参与社区一起发展Nacos</p></blockquote><ul><li>作为用户关注和加入 Nacos 社区</li></ul><p>Nacos 社区正在蓬勃发展，截止到发文为止，Nacos 短短几个月已经有5个微信群，其中4个已满员，1个QQ群，1个钉钉群，关注 Nacos 的社区人数已经近3000人，在 Nacos 群里跟 “道（基）友” 切磋技术，交流经验，招聘交友，抢抢红包...不亦乐乎。</p><p>要加入 Nacos 微信社区，你可以通过扫下面的<strong>“超哥”</strong>的微信二维码，让<strong>“超哥”</strong> 帮你拉入 “Nacos社区微信交流群”</p><p><img loading="lazy" src="https://cdn.yuque.com/lark/0/2018/png/15914/1530077965587-8f4e3100-bdd4-469a-9ea0-7af7061bc9ef.png" alt="Screen Shot 2018-06-27 at 13.39.09.png | left" class="img_ev3q"></p><ul><li>作为代码贡献者加入 Nacos 社区</li></ul><p>从Nacos用户发展而成贡献者顺理成章，而Nacos开发团队也确实在日趋壮大，从开始的只有4个代码contributor发展到目前的24个，随着<strong>阿里巴巴</strong>其他团队成员如 <strong>@小马哥</strong> 等人，<strong>虎牙直播</strong>的 <strong>@张波</strong> <strong>@周健</strong> 团队等人，<a href="https://github.com/nacos-group/nacos-docker" target="_blank" rel="noopener noreferrer">nacos-docker-k8s</a> 贡献者 <strong>@张龙</strong>，前端的主要贡献者饿了么 <strong>@王彦民</strong>，Spring Cloud中文社区创立者 <strong>@许进</strong> 等的陆续加入，相信未来Nacos社区的力量未来会越来越强大。</p><p>而社区也正在计划在合适的时机上，将在Nacos官网 <a href="http://nacos.io" target="_blank" rel="noopener noreferrer">nacos.io</a> 中添加团队介绍页，将大家正式公布于众，欢迎大家加入Nacos社区，贡献社区。用Apache的话说，<strong>“社区高于代码”!</strong> </p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1542704700864-a9d54856-9bf6-4176-b449-c13fa02c5800.png" alt="屏幕快照 2018-11-20 17.04.45.png" class="img_ev3q"> </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="新人时刻---什么是nacos">新人时刻 - &quot;什么是Nacos？&quot;<a href="#新人时刻---什么是nacos" class="hash-link" aria-label="Direct link to 新人时刻 - &quot;什么是Nacos？&quot;" title="Direct link to 新人时刻 - &quot;什么是Nacos？&quot;">​</a></h2><blockquote><p>还不知道什么是Nacos? 没关系，在github上star一下跟程序猿兄弟打个招呼吧!!</p></blockquote><p><a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Nacos</a> 是阿里巴巴于7月份新开源的项目，Nacos的主要愿景是期望通过提供易用的 <code>动态服务发现</code>、<code>服务配置管理</code>、<code>服务共享与管理</code> 的基础设施，帮助用户在云原生时代更好的构建、交付、管理自己的微服务平台。</p><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/15914/1532436633419-08a42307-7fb7-4d51-9062-fecc3868613b.png" alt="Screen Shot 2018-07-24 at 19.27.28.png" class="img_ev3q"> </p><p>github项目地址在 <a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">这里</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="更多与-nacos-相关的开源项目信息">更多与 Nacos 相关的开源项目信息<a href="#更多与-nacos-相关的开源项目信息" class="hash-link" aria-label="Direct link to 更多与 Nacos 相关的开源项目信息" title="Direct link to 更多与 Nacos 相关的开源项目信息">​</a></h2><ul><li><a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener noreferrer">Nacos</a></li><li><a href="https://github.com/nacos-group/nacos-coredns-plugin" target="_blank" rel="noopener noreferrer">Nacos DNS-F</a></li><li><a href="https://github.com/nacos-group/nacos-docker" target="_blank" rel="noopener noreferrer">Nacos Docker</a></li><li><a href="https://github.com/nacos-group/nacos-spring-project" target="_blank" rel="noopener noreferrer">Nacos Spring Project</a></li><li><a href="https://github.com/nacos-group/nacos-spring-boot-project" target="_blank" rel="noopener noreferrer">Nacos Spring Boot</a></li><li><a href="https://github.com/spring-cloud-incubator/spring-cloud-alibaba" target="_blank" rel="noopener noreferrer">Spring Cloud Alibaba</a></li><li><a href="http://dubbo.io" target="_blank" rel="noopener noreferrer">Dubbo</a></li><li><a href="https://github.com/alibaba/Sentinel" target="_blank" rel="noopener noreferrer">Sentinel</a></li><li><a href="https://projects.spring.io/spring-cloud/" target="_blank" rel="noopener noreferrer">Spring Cloud</a></li><li><a href="https://github.com/Nepxion/Discovery" target="_blank" rel="noopener noreferrer">Nepxion Discovery</a></li><li><a href="https://github.com/SpringCloud/spring-cloud-gateway-nacos" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway Nacos</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Nacos 0.1.0 版本Review 活动设计"><meta itemprop="keywords" content="nacos 0.1.0"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/nacos">Nacos 0.1.0 版本Review 活动设计</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-11-15T00:00:00.000Z" itemprop="datePublished">November 15, 2018</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i-活动任务列表">I. 活动任务列表<a href="#i-活动任务列表" class="hash-link" aria-label="Direct link to I. 活动任务列表" title="Direct link to I. 活动任务列表">​</a></h2><ul><li>阅读官网文案，找官网bug, 给中、英文官网提建设性建议</li><li>阅读中英文档，找文档bug, 给中、英文档改善提建议（尤其是关注英文翻译不好的地方，因为英文都是我们程序员自己撸的）</li><li>尝试下代码 -&gt;编译打包 -&gt; 启动Nacos server -&gt; 停止Nacos server流程，提出改进意见</li><li>尝试配置以及启动多节点 Nacos 集群模式任务，提改进意见</li><li>尝试使用Nacos Java SDK, 给Java SDK提改进建议</li><li>尝试使用Nacos Open API，给OpenAPI提改进建议</li><li>尝试根据《如何贡献Nacos文档 TODO》试一下 贡献流程，给贡献者流程提建议</li><li>给Nacos提需求、发展计划、想法和要求等</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ii-活动参与方式">II. 活动参与方式<a href="#ii-活动参与方式" class="hash-link" aria-label="Direct link to II. 活动参与方式" title="Direct link to II. 活动参与方式">​</a></h2><ul><li><p>扫描 “超哥” 微信2微码，让超哥帮助加入 “Nacos社区交流群”</p><p><img loading="lazy" src="https://cdn.yuque.com/lark/0/2018/png/11189/1532004866850-5e03b901-6d76-4380-b7bf-66e227808bdc.png" alt="微信二维码" class="img_ev3q"> </p></li><li><p>选择I 中的一个或者多个体验任务</p></li><li><p>发现问题或者BUG之后，按照III中的《问题Report方式》，发一个相应的 github issue, 并指派给 @ github账号<a href="https://github.com/xuechaos" target="_blank" rel="noopener noreferrer">xuechaos</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="iii-问题report方式">III. 问题Report方式<a href="#iii-问题report方式" class="hash-link" aria-label="Direct link to III. 问题Report方式" title="Direct link to III. 问题Report方式">​</a></h2><ul><li>流程说明 TODO</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="iv-奖励方式">IV. 奖励方式<a href="#iv-奖励方式" class="hash-link" aria-label="Direct link to IV. 奖励方式" title="Direct link to IV. 奖励方式">​</a></h2><ul><li>我们正在为参与并作出突出贡献的小伙伴定制一些小礼品，会考虑快递给过程中有突出贡献的小伙伴</li><li>礼物虽轻，但希望能表达对你们的帮助的感激之情的万一</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v-其它说明">V. 其它说明<a href="#v-其它说明" class="hash-link" aria-label="Direct link to V. 其它说明" title="Direct link to V. 其它说明">​</a></h2><ul><li>我们不确定每个建议最后都会被采用，但是我们尽量会跟您沟通我们基于何种考虑，您的建议我们最后没有采用</li><li>尽量通过邮件列表或者report issue的方式，而不是在微信群里report问题，以便将我们的沟通过程文档化和更容易沉淀</li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="Nacos 进入CNCF landscape"><meta itemprop="keywords" content="nacos,cncf,alibaba,landscape"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/en/blog/cncf">Nacos 进入CNCF landscape</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-10-28T00:00:00.000Z" itemprop="datePublished">October 28, 2018</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nacos-被cncf-纳入landscape大图">Nacos 被CNCF 纳入landscape大图。<a href="#nacos-被cncf-纳入landscape大图" class="hash-link" aria-label="Direct link to Nacos 被CNCF 纳入landscape大图。" title="Direct link to Nacos 被CNCF 纳入landscape大图。">​</a></h2><p><img loading="lazy" src="https://cdn.nlark.com/lark/0/2018/png/11189/1540738282849-61e2022a-46a9-4d81-ae16-6d6f0515450b.png" alt="image.png | left | 747x408" class="img_ev3q"></p></div></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/blog/page/4"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/blog/page/6"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div></div>
<script src="/en/assets/js/runtime~main.8c5d4764.js"></script>
<script src="/en/assets/js/main.0d2c9db0.js"></script>
</body>
</html>